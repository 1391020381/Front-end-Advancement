* Chrome开发工具(简称DevTools) 是一组网页制作和调试的工具,内嵌于GoogleChrome浏览器中。

* 本文聚焦于 页面的源头 和 网络数据的接收

# Chrome 开发者工具

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/Chrome%20%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.png)

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/chrome%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D.png)


# 网络面板

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/浏览器工作原理与实践/note/img/网络面板概要图.png)

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/%E6%8E%A7%E5%88%B6%E5%99%A8%E6%A6%82%E8%A6%81%E5%9B%BE.png)



* 下载信息概要
- * DOMMContentLoaded  说明页面已经构建好DOM了, 意味着dom需要的html js css 文件都已下载完成
- * Load 说明浏览器已经加载了所有的资源(图像、样式表等)


# 网络面板中的详细列表

1. 列表的属性

* `可以在 列表属性上,右键选择其他需要展示的 属性` 
* 点击相应属性,可以对列表排序

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/%E8%AF%A6%E7%BB%86%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AFpng.png)

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%20HTTP%20%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.png)

![](https://raw.githubusercontent.com/1391020381/Front-end-Advancement/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/note/img/%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E6%97%B6%E9%97%B4%E7%BA%BF.png)

1. Queuing 
* 排队的意思,当浏览器发起一个请求的时候,会有很多导致该请求不能被立即执行,而是需要排队等待。导致请求处于排队的原因有很多。
- * 首先,页面中资源是有优先级的,比如CSS HTML javascript 等都是页面中核心文件,所以优先级最高。 而图片、视频 音频这类资源就不是核心资源,优先级就比较低。通常当后者遇到前者时,就需要'让路' 进入 待排队状态。
- * 其次,浏览器会为每个域名最多维护6个TCP链接,如果发起一个HTTP请求时,这6个TCP连接都处于忙碌状态,那么这个请求就会处于排队状态。
- * 最后,网络进程在为数据分配磁盘空间时,新的HTTP请求也需要短暂地等待磁盘分配结束。


* 等待排队完成之后,就要进入连接的状态了。不过在发起连接之前,还有一些原因可能导致连接过程被推迟,这个推迟就表现在面板中的 `Stalled`,它表示停滞的意思。
* 如果使用了代理服务器, 会有 `Proxy Negotiation` 阶段。 代理协商阶段,它表示代理服务器连接协商所用的时间。

2. Initial connection/ SSL 阶段
* 和服务器建立连接的阶段, 包括了建立 TCP 连接所花费的时间,如果使用HTTPS协议,还需要额外的SSL握手时间,用于协商一些加密信息。

3. Requestsent阶段
* 和服务器建立好连接之后,网络进程会准备请求数据,并将其发送给网络。
* 通常这个阶段非常快,因为只需要把浏览器缓冲区的数据发送出去就结束了,并不需要判断服务器是否接受到了,所以这个时间通常不到1毫秒

4. Waiting (TTFB) 第一字节时间
* 数据发送出去了,接下来就是等待接受服务器第一个字节的数据。
* TTFB是反映服务器响应速度的重要指标,对服务器来说,TTFB时间越短,就说明服务器响应越快。

5. Content Download
* 接受到第一个字节之后,进入陆续接受完整数据的阶段。
* 从第一字节时间到接收到全部响应数据所用的时间。

# 优化时间线上的耗时项
1. 排队(Queeing)时间过久
* 排队时间过久,大概率是由浏览器为每个域名最多维护6个链接导致的。基于这个原因,你就可以让1个站点下面的资源放在多个域名下面,比如放到3个域名下面,这样就可以同时支持18个连接了,这个方案称为`域名分片`技术除了域名分片技术外, `把站点升级到HTTP2` 因为HTTP2已经没有每个域名最多维护6个TCP连接的限制了。
2. 第一字节时间(TTFB) 时间过久
* `服务器生成页面数据的时间过久`。对于动态网页来说,服务器收到用户打开一个页面的请求时,首先要从数据库读取该页面需要的数据,然后把这些数据传入到模板中,模板渲染后,再返回给用户。服务器在处理这个数据的过程中,可能某个环节出问题。
* `网络的原因` 比如使用了低带宽的服务器,或者本来用的是电信的服务器,可联通的网络用户要来访问你的服务器,这样也会拖慢网速。
* `发送请求头时带上了多余的用户信息`比如一些不必要的Cookie信息。服务器接收到这些Cookie信息之后可能需要对每一项都做处理,这样就增大了服务器的处理时长。



* 对于这三种问题，你要有针对性地出一些解决方案。
- * 面对第一种服务器的问题，你可以想办法去提高服务器的处理速度，比如通过增加各种缓存的技术；
- * 针对第二种网络问题，你可以使用 CDN 来缓存一些静态文件；
- * 至于第三种，你在发送请求时就去尽可能地减少一些不必要的 Cookie 数据信息。


3. Content Download时间过久
* 如果单个请求的 Content Download 花费了大量时间，`有可能是字节数太多的原因导致的。这时候你就需要减少文件大小，比如压缩、去掉源码中不必要的注释等方法。`