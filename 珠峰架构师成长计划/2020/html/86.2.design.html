<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>珠峰架构师成长计划</title>
    <link rel="stylesheet" type="text/css" href="../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            珠峰架构师成长计划
        
    </div>
<ul><li><a href="../index.html">0.Async</a></li><li><a href="../html/0.editor.html">0.editor</a></li><li><a href="../html/0.module.html">0.module</a></li><li><a href="../html/1.ES2015.html">1.ES2015</a></li><li><a href="../html/2.Promise.html">2.Promise</a></li><li><a href="../html/3.Node.html">3.Node</a></li><li><a href="../html/4.NodeInstall.html">4.NodeInstall</a></li><li><a href="../html/5.REPL.html">5.REPL</a></li><li><a href="../html/6.NodeCore.html">6.NodeCore</a></li><li><a href="../html/7.module&NPM.html">7.module&NPM</a></li><li><a href="../html/8.Encoding.html">8.Encoding</a></li><li><a href="../html/9.Buffer.html">9.Buffer</a></li><li><a href="../html/10.fs.html">10.fs</a></li><li><a href="../html/11.Stream-1.html">11.Stream-1</a></li><li><a href="../html/11.Stream-2.html">11.Stream-2</a></li><li><a href="../html/11.Stream-3.html">11.Stream-3</a></li><li><a href="../html/11.Stream-4.html">11.Stream-4</a></li><li><a href="../html/12-Network-2.html">12-Network-2</a></li><li><a href="../html/12.NetWork-3.html">12.NetWork-3</a></li><li><a href="../html/12.Network-1.html">12.Network-1</a></li><li><a href="../html/13.tcp.html">13.tcp</a></li><li><a href="../html/14.http-1.html">14.http-1</a></li><li><a href="../html/14.http-2.html">14.http-2</a></li><li><a href="../html/15.compress.html">15.compress</a></li><li><a href="../html/16.crypto.html">16.crypto</a></li><li><a href="../html/17.process.html">17.process</a></li><li><a href="../html/18.yargs.html">18.yargs</a></li><li><a href="../html/19.cache.html">19.cache</a></li><li><a href="../html/20.action.html">20.action</a></li><li><a href="../html/21.https.html">21.https</a></li><li><a href="../html/22.cookie.html">22.cookie</a></li><li><a href="../html/23.session.html">23.session</a></li><li><a href="../html/24.express-1.html">24.express-1</a></li><li><a href="../html/24.express-2.html">24.express-2</a></li><li><a href="../html/24.express-3.html">24.express-3</a></li><li><a href="../html/24.express-4.html">24.express-4</a></li><li><a href="../html/25.koa-1.html">25.koa-1</a></li><li><a href="../html/26.webpack-1-basic.html">26.webpack-1-basic</a></li><li><a href="../html/26.webpack-2-optimize.html">26.webpack-2-optimize</a></li><li><a href="../html/26.webpack-3-file.html">26.webpack-3-file</a></li><li><a href="../html/26.webpack-4.tapable.html">26.webpack-4.tapable</a></li><li><a href="../html/26.webpack-5-AST.html">26.webpack-5-AST</a></li><li><a href="../html/26.webpack-6-sources.html">26.webpack-6-sources</a></li><li><a href="../html/26.webpack-7-loader.html">26.webpack-7-loader</a></li><li><a href="../html/26.webpack-8-plugin.html">26.webpack-8-plugin</a></li><li><a href="../html/26.webpack-9-hand.html">26.webpack-9-hand</a></li><li><a href="../html/26.webpack-10-prepare.html">26.webpack-10-prepare</a></li><li><a href="../html/28.redux.html">28.redux</a></li><li><a href="../html/28.redux-jwt-back.html">28.redux-jwt-back</a></li><li><a href="../html/28.redux-jwt-front.html">28.redux-jwt-front</a></li><li><a href="../html/29.mongodb-1.html">29.mongodb-1</a></li><li><a href="../html/29.mongodb-2.html">29.mongodb-2</a></li><li><a href="../html/29.mongodb-3.html">29.mongodb-3</a></li><li><a href="../html/29.mongodb-4.html">29.mongodb-4</a></li><li><a href="../html/29.mongodb-5.html">29.mongodb-5</a></li><li><a href="../html/29.mongodb-6.html">29.mongodb-6</a></li><li><a href="../html/30.cms-1-mysql.html">30.cms-1-mysql</a></li><li><a href="../html/30.cms-2-mysql.html">30.cms-2-mysql</a></li><li><a href="../html/30.cms-3-mysql.html">30.cms-3-mysql</a></li><li><a href="../html/30.cms-4-nunjucks.html">30.cms-4-nunjucks</a></li><li><a href="../html/30.cms-5-mock.html">30.cms-5-mock</a></li><li><a href="../html/30.cms-6-egg.html">30.cms-6-egg</a></li><li><a href="../html/30.cms-7-api.html">30.cms-7-api</a></li><li><a href="../html/30.cms-8-roadhog.html">30.cms-8-roadhog</a></li><li><a href="../html/30.cms-9-yaml.html">30.cms-9-yaml</a></li><li><a href="../html/30.cms-10-umi.html">30.cms-10-umi</a></li><li><a href="../html/30.cms-12-dva.html">30.cms-12-dva</a></li><li><a href="../html/30.cms-13-dva-ant.html">30.cms-13-dva-ant</a></li><li><a href="../html/30.cms-14-front.html">30.cms-14-front</a></li><li><a href="../html/30.cms-15-deploy.html">30.cms-15-deploy</a></li><li><a href="../html/31.dva.html">31.dva</a></li><li><a href="../html/31.cms-13-dva-antdesign.html">31.cms-13-dva-antdesign</a></li><li><a href="../html/33.redis.html">33.redis</a></li><li><a href="../html/34.unittest.html">34.unittest</a></li><li><a href="../html/35.jwt.html">35.jwt</a></li><li><a href="../html/36.websocket-1.html">36.websocket-1</a></li><li><a href="../html/36.websocket-2.html">36.websocket-2</a></li><li><a href="../html/38.chat-api-1.html">38.chat-api-1</a></li><li><a href="../html/38.chat-api-2.html">38.chat-api-2</a></li><li><a href="../html/38.chat-3.html">38.chat-3</a></li><li><a href="../html/38.chat-api-3.html">38.chat-api-3</a></li><li><a href="../html/38.chat.html">38.chat</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/39.crawl-0.html">39.crawl-0</a></li><li><a href="../html/39.crawl-1.html">39.crawl-1</a></li><li><a href="../html/39.crawl-2.html">39.crawl-2</a></li><li><a href="../html/40.deploy.html">40.deploy</a></li><li><a href="../html/41.safe.html">41.safe</a></li><li><a href="../html/42.test.html">42.test</a></li><li><a href="../html/43.nginx.html">43.nginx</a></li><li><a href="../html/44.enzyme.html">44.enzyme</a></li><li><a href="../html/45.docker.html">45.docker</a></li><li><a href="../html/46.elastic.html">46.elastic</a></li><li><a href="../html/47.oauth.html">47.oauth</a></li><li><a href="../html/48.wxpay.html">48.wxpay</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/51.typescript.html">51.typescript</a></li><li><a href="../html/52.UML.html">52.UML</a></li><li><a href="../html/53.design.html">53.design</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/54.linux.html">54.linux</a></li><li><a href="../html/57.ts.html">57.ts</a></li><li><a href="../html/56.react-ssr.html">56.react-ssr</a></li><li><a href="../html/58.ts_react.html">58.ts_react</a></li><li><a href="../html/59.ketang.html">59.ketang</a></li><li><a href="../html/59.ketang2.html">59.ketang2</a></li><li><a href="../html/61.1.devops-linux.html">61.1.devops-linux</a></li><li><a href="../html/61.2.devops-vi.html">61.2.devops-vi</a></li><li><a href="../html/61.3.devops-user.html">61.3.devops-user</a></li><li><a href="../html/61.4.devops-auth.html">61.4.devops-auth</a></li><li><a href="../html/61.5.devops-shell.html">61.5.devops-shell</a></li><li><a href="../html/61.6.devops-install.html">61.6.devops-install</a></li><li><a href="../html/61.7.devops-system.html">61.7.devops-system</a></li><li><a href="../html/61.8.devops-service.html">61.8.devops-service</a></li><li><a href="../html/61.9.devops-network.html">61.9.devops-network</a></li><li><a href="../html/61.10.devops-nginx.html">61.10.devops-nginx</a></li><li><a href="../html/61.11.devops-docker.html">61.11.devops-docker</a></li><li><a href="../html/61.12.devops-jekins.html">61.12.devops-jekins</a></li><li><a href="../html/61.13.devops-groovy.html">61.13.devops-groovy</a></li><li><a href="../html/61.14.devops-php.html">61.14.devops-php</a></li><li><a href="../html/61.15.devops-java.html">61.15.devops-java</a></li><li><a href="../html/61.16.devops-node.html">61.16.devops-node</a></li><li><a href="../html/61.17.devops-k8s.html">61.17.devops-k8s</a></li><li><a href="../html/62.1.react-basic.html">62.1.react-basic</a></li><li><a href="../html/62.2.react-state.html">62.2.react-state</a></li><li><a href="../html/62.3.react-high.html">62.3.react-high</a></li><li><a href="../html/62.4.react-optimize.html">62.4.react-optimize</a></li><li><a href="../html/62.5.react-hooks.html">62.5.react-hooks</a></li><li><a href="../html/62.6.react-immutable.html">62.6.react-immutable</a></li><li><a href="../html/62.7.react-mobx.html">62.7.react-mobx</a></li><li><a href="../html/62.8.react-source.html">62.8.react-source</a></li><li><a href="../html/63.1.redux.html">63.1.redux</a></li><li><a href="../html/63.2.redux-middleware.html">63.2.redux-middleware</a></li><li><a href="../html/63.3.redux-hooks.html">63.3.redux-hooks</a></li><li><a href="../html/63.4.redux-saga.html">63.4.redux-saga</a></li><li><a href="../html/63.5.redux-saga-hand.html">63.5.redux-saga-hand</a></li><li><a href="../html/64.1.router.html">64.1.router</a></li><li><a href="../html/64.2.router-connected.html">64.2.router-connected</a></li><li><a href="../html/65.1.typescript.html">65.1.typescript</a></li><li><a href="../html/65.2.typescript.html">65.2.typescript</a></li><li><a href="../html/65.3.typescript.html">65.3.typescript</a></li><li><a href="../html/65.4.antd.html">65.4.antd</a></li><li><a href="../html/65.4.definition.html">65.4.definition</a></li><li><a href="../html/66-1.vue-base.html">66-1.vue-base</a></li><li><a href="../html/66-2.vue-component.html">66-2.vue-component</a></li><li><a href="../html/66-3.vue-cli3.0.html">66-3.vue-cli3.0</a></li><li><a href="../html/66-4.$message组件.html">66-4.$message组件</a></li><li><a href="../html/66-5.Form组件.html">66-5.Form组件</a></li><li><a href="../html/66-6.tree.html">66-6.tree</a></li><li><a href="../html/66-7.vue-router-apply.html">66-7.vue-router-apply</a></li><li><a href="../html/66-8.axios-apply.html">66-8.axios-apply</a></li><li><a href="../html/66-9.vuex-apply.html">66-9.vuex-apply</a></li><li><a href="../html/66-10.jwt-vue.html">66-10.jwt-vue</a></li><li><a href="../html/66-11.vue-ssr.html">66-11.vue-ssr</a></li><li><a href="../html/66-12.nuxt-apply.html">66-12.nuxt-apply</a></li><li><a href="../html/66-13.pwa.html">66-13.pwa</a></li><li><a href="../html/66-14.vue单元测试.html">66-14.vue单元测试</a></li><li><a href="../html/66-15.权限校验.html">66-15.权限校验</a></li><li><a href="../html/67-1-network.html">67-1-network</a></li><li><a href="../html/68-2-wireshark.html">68-2-wireshark</a></li><li><a href="../html/7.npm2.html">7.npm2</a></li><li><a href="../html/69-hooks.html">69-hooks</a></li><li><a href="../html/70-deploy.html">70-deploy</a></li><li><a href="../html/71-hmr.html">71-hmr</a></li><li><a href="../html/72.deploy.html">72.deploy</a></li><li><a href="../html/73.import.html">73.import</a></li><li><a href="../html/74.mobile.html">74.mobile</a></li><li><a href="../html/75.webpack-1.文件分析.html">75.webpack-1.文件分析</a></li><li><a href="../html/75.webpack-2.loader.html">75.webpack-2.loader</a></li><li><a href="../html/75.webpack-3.源码流程.html">75.webpack-3.源码流程</a></li><li><a href="../html/75.webpack-4.tapable.html">75.webpack-4.tapable</a></li><li><a href="../html/75.webpack-6.实现.html">75.webpack-6.实现</a></li><li><a href="../html/76.react_optimize.html">76.react_optimize</a></li><li><a href="../html/77.ts_ketang_back.html">77.ts_ketang_back</a></li><li><a href="../html/77.ts_ketang_front.html">77.ts_ketang_front</a></li><li><a href="../html/78.vue-domdiff.html">78.vue-domdiff</a></li><li><a href="../html/79.grammar.html">79.grammar</a></li><li><a href="../html/80.tree.html">80.tree</a></li><li><a href="../html/81.axios.html">81.axios</a></li><li><a href="../html/82.1.react.html">82.1.react</a></li><li><a href="../html/82.2.react-high.html">82.2.react-high</a></li><li><a href="../html/82.3.react-router.html">82.3.react-router</a></li><li><a href="../html/82.4.redux.html">82.4.redux</a></li><li><a href="../html/82.5.redux_middleware.html">82.5.redux_middleware</a></li><li><a href="../html/82.6.connected.html">82.6.connected</a></li><li><a href="../html/82.7.saga.html">82.7.saga</a></li><li><a href="../html/82.8.dva.html">82.8.dva</a></li><li><a href="../html/82.8.dva-source.html">82.8.dva-source</a></li><li><a href="../html/82.9.roadhog.html">82.9.roadhog</a></li><li><a href="../html/82.10.umi.html">82.10.umi</a></li><li><a href="../html/82.11.antdesign.html">82.11.antdesign</a></li><li><a href="../html/82.12.ketang-front.html">82.12.ketang-front</a></li><li><a href="../html/82.12.ketang-back.html">82.12.ketang-back</a></li><li><a href="../html/83.upload.html">83.upload</a></li><li><a href="../html/84.graphql.html">84.graphql</a></li><li><a href="../html/85.antpro.html">85.antpro</a></li><li><a href="../html/86.1.uml.html">86.1.uml</a></li><li class="active"><a href="../html/86.2.design.html">86.2.design</a></li><li><a href="../html/87.postcss.html">87.postcss</a></li><li><a href="../html/88.react16-1.html">88.react16-1</a></li><li><a href="../html/89.nextjs.html">89.nextjs</a></li><li><a href="../html/90.react-test.html">90.react-test</a></li><li><a href="../html/91.react-ts.html">91.react-ts</a></li><li><a href="../html/92.rbac.html">92.rbac</a></li><li><a href="../html/93.tsnode.html">93.tsnode</a></li><li><a href="../html/94.1.JavaScript.html">94.1.JavaScript</a></li><li><a href="../html/94.2.JavaScript.html">94.2.JavaScript</a></li><li><a href="../html/94.3.MODULE.html">94.3.MODULE</a></li><li><a href="../html/94.4.EventLoop.html">94.4.EventLoop</a></li><li><a href="../html/94.5.文件上传.html">94.5.文件上传</a></li><li><a href="../html/94.6.https.html">94.6.https</a></li><li><a href="../html/94.7. nginx.html">94.7. nginx</a></li><li><a href="../html/95.1. react.html">95.1. react</a></li><li><a href="../html/95.2.react.html">95.2.react</a></li><li><a href="../html/96.1.react16.html">96.1.react16</a></li><li><a href="../html/96.2.fiber.html">96.2.fiber</a></li><li><a href="../html/96.3.fiber.html">96.3.fiber</a></li><li><a href="../html/97.serverless.html">97.serverless</a></li></ul></div>


<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t01. 什么是面向对象">1. 什么是面向对象</a><ul><li><a href="#t11.1 抽象(Abstraction)">1.1 抽象(Abstraction)</a></li><li><a href="#t21.2 继承">1.2 继承</a></li><li><a href="#t31.3 封装">1.3 封装</a></li><li><a href="#t41.4 多态">1.4 多态</a></li></ul></li><li><a href="#t52. 设计原则">2. 设计原则</a><ul><li><a href="#t62.1 什么是设计？">2.1 什么是设计？</a></li><li><a href="#t72.2 SOLID五大设计原则">2.2 SOLID五大设计原则</a><ul><li><a href="#t82.2.1 O 开放封闭原则">2.2.1 O 开放封闭原则</a></li><li><a href="#t92.2.2 S 单一职责原则">2.2.2 S 单一职责原则</a></li><li><a href="#t102.2.3 L 里氏替换原则">2.2.3 L 里氏替换原则</a></li><li><a href="#t112.2.4 D 依赖倒置原则">2.2.4 D 依赖倒置原则</a></li><li><a href="#t122.2.5  I 接口隔离原则">2.2.5  I 接口隔离原则</a></li></ul></li><li><a href="#t132.3  迪米特法则">2.3  迪米特法则</a></li><li><a href="#t142.4  合成复用原则">2.4  合成复用原则</a><ul><li><a href="#t152.4.1 类的关系">2.4.1 类的关系</a></li><li><a href="#t162.4.2 合成复用原则">2.4.2 合成复用原则</a></li></ul></li><li><a href="#t172.5 总结">2.5 总结</a></li><li><a href="#t182.6 如何写出好代码?">2.6 如何写出好代码?</a></li></ul></li><li><a href="#t193. 23种设计模式">3. 23种设计模式</a><ul><li><a href="#t203.1 创建型">3.1 创建型</a></li><li><a href="#t213.2 结构型模式">3.2 结构型模式</a></li><li><a href="#t223.3 行为型">3.3 行为型</a></li></ul></li><li><a href="#t234. 工厂模式">4. 工厂模式</a><ul><li><a href="#t244.1 简单工厂模式">4.1 简单工厂模式</a><ul><li><a href="#t254.1.1 类图">4.1.1 类图</a></li><li><a href="#t264.1.2 代码">4.1.2 代码</a></li></ul></li><li><a href="#t274.1.3 缺点">4.1.3 缺点</a><ul><li><a href="#t284.1.3 前端应用场景">4.1.3 前端应用场景</a><ul><li><a href="#t294.1.3.1 jQuery">4.1.3.1 jQuery</a></li><li><a href="#t304.1.3.2 React">4.1.3.2 React</a></li></ul></li></ul></li><li><a href="#t314.2 工厂方法模式">4.2 工厂方法模式</a><ul><li><a href="#t324.2.1 类图">4.2.1 类图</a></li><li><a href="#t334.2.2 代码">4.2.2 代码</a></li><li><a href="#t344.2.3 应用场景">4.2.3 应用场景</a><ul><li><a href="#t354.2.3.1 React">4.2.3.1 React</a></li></ul></li></ul></li><li><a href="#t364.3 抽象工厂模式">4.3 抽象工厂模式</a><ul><li><a href="#t374.3.1  组成角色">4.3.1  组成角色</a></li><li><a href="#t384.3.1 类图">4.3.1 类图</a></li><li><a href="#t394.3.2 代码">4.3.2 代码</a></li></ul></li></ul></li><li><a href="#t405.单例模式">5.单例模式</a><ul><li><a href="#t415.1 类图">5.1 类图</a></li><li><a href="#t425.2 代码">5.2 代码</a><ul><li><a href="#t435.2.1 单例模式">5.2.1 单例模式</a></li><li><a href="#t445.2.2 ES5单例模式">5.2.2 ES5单例模式</a></li><li><a href="#t455.2.3 透明单例">5.2.3 透明单例</a></li><li><a href="#t465.2.4 单例与构建分离">5.2.4 单例与构建分离</a></li><li><a href="#t475.2.5 封装变化">5.2.5 封装变化</a></li></ul></li><li><a href="#t485.3 场景">5.3 场景</a><ul><li><a href="#t495.3.2 commonjs">5.3.2 commonjs</a></li><li><a href="#t505.3.2 jQuery">5.3.2 jQuery</a></li><li><a href="#t515.3.3 模态窗口">5.3.3 模态窗口</a></li><li><a href="#t525.3.4 store">5.3.4 store</a></li><li><a href="#t535.3.5 缓存">5.3.5 缓存</a></li></ul></li></ul></li><li><a href="#t546. 适配器模式">6. 适配器模式</a><ul><li><a href="#t556.1 类图">6.1 类图</a></li><li><a href="#t566.2 代码">6.2 代码</a></li><li><a href="#t576.3 场景">6.3 场景</a><ul><li><a href="#t586.2.1 axios">6.2.1 axios</a></li><li><a href="#t596.2.2 toAxiosAdapter">6.2.2 toAxiosAdapter</a></li><li><a href="#t606.2.3 promisify">6.2.3 promisify</a></li><li><a href="#t616.2.4 computed">6.2.4 computed</a></li><li><a href="#t626.2.5 tree">6.2.5 tree</a></li><li><a href="#t636.2.6 Sequelize">6.2.6 Sequelize</a></li></ul></li></ul></li><li><a href="#t647.装饰器模式">7.装饰器模式</a><ul><li><a href="#t657.1 类图">7.1 类图</a></li><li><a href="#t667.2 代码">7.2 代码</a></li><li><a href="#t677.3 应用场景">7.3 应用场景</a><ul><li><a href="#t687.3.1  装饰器">7.3.1  装饰器</a><ul><li><a href="#t697.3.1.1 类装饰器">7.3.1.1 类装饰器</a></li><li><a href="#t707.3.1.2  属性装饰器">7.3.1.2  属性装饰器</a></li><li><a href="#t717.3.1.3 core-decorator">7.3.1.3 core-decorator</a></li></ul></li><li><a href="#t727.3.2  AOP概念">7.3.2  AOP概念</a></li><li><a href="#t737.3.3 埋点">7.3.3 埋点</a><ul><li><a href="#t747.3.3.1 项目配置">7.3.3.1 项目配置</a></li><li><a href="#t757.3.3.2 index.js">7.3.3.2 index.js</a></li><li><a href="#t767.3.3.3 track.js">7.3.3.3 track.js</a></li></ul></li><li><a href="#t777.3.4 表单校验">7.3.4 表单校验</a></li></ul></li></ul></li><li><a href="#t788.代理模式">8.代理模式</a><ul><li><a href="#t798.1 类图">8.1 类图</a></li><li><a href="#t808.2 代码">8.2 代码</a></li><li><a href="#t818.3 场景">8.3 场景</a><ul><li><a href="#t828.3.1 事件委托代理">8.3.1 事件委托代理</a></li><li><a href="#t838.3.2 虚拟代理(图片预加载)">8.3.2 虚拟代理(图片预加载)</a><ul><li><a href="#t848.3.2.1 app.js">8.3.2.1 app.js</a></li><li><a href="#t858.3.2.2 index.html">8.3.2.2 index.html</a></li></ul></li><li><a href="#t868.3.3 虚拟代理(图片懒加载)">8.3.3 虚拟代理(图片懒加载)</a><ul><li><a href="#t878.3.3.1 index.html">8.3.3.1 index.html</a></li></ul></li><li><a href="#t888.3.4 缓存代理">8.3.4 缓存代理</a></li><li><a href="#t898.3.5 防抖代理">8.3.5 防抖代理</a><ul><li><a href="#t908.3.5.1 节流">8.3.5.1 节流</a></li><li><a href="#t918.3.5.2 防抖">8.3.5.2 防抖</a></li><li><a href="#t928.3.5.3 未防抖">8.3.5.3 未防抖</a></li><li><a href="#t938.3.5.4 防抖">8.3.5.4 防抖</a></li></ul></li><li><a href="#t948.3.6 代理跨域">8.3.6 代理跨域</a><ul><li><a href="#t958.3.6.1 正向代理和反向代理">8.3.6.1 正向代理和反向代理</a></li><li><a href="#t968.3.6.2 代理跨域">8.3.6.2 代理跨域</a></li></ul></li><li><a href="#t978.3.7 $.proxy">8.3.7 $.proxy</a></li><li><a href="#t988.3.8 Proxy">8.3.8 Proxy</a></li><li><a href="#t998.3.9 Vue2和Vue3">8.3.9 Vue2和Vue3</a></li><li><a href="#t1008.3.10">8.3.10</a></li></ul></li></ul></li><li><a href="#t1019.观察者模式">9.观察者模式</a><ul><li><a href="#t1029.1 类图">9.1 类图</a></li><li><a href="#t1039.2 代码">9.2 代码</a></li><li><a href="#t1049.3 场景">9.3 场景</a><ul><li><a href="#t1059.3.1 DOM事件绑定">9.3.1 DOM事件绑定</a></li><li><a href="#t1069.3.2 Promise">9.3.2 Promise</a></li><li><a href="#t1079.3.3 callbacks">9.3.3 callbacks</a></li><li><a href="#t1089.3.4 EventEmitter">9.3.4 EventEmitter</a></li><li><a href="#t1099.3.5 流">9.3.5 流</a></li><li><a href="#t1109.3.6 http服务器">9.3.6 http服务器</a></li><li><a href="#t1119.3.7 生命周期函数">9.3.7 生命周期函数</a></li><li><a href="#t1129.3.8 EventBus">9.3.8 EventBus</a></li><li><a href="#t1139.3.9 Vue响应式">9.3.9 Vue响应式</a></li><li><a href="#t1149.3.9 redux">9.3.9 redux</a></li></ul></li><li><a href="#t1159.4 发布订阅模式">9.4 发布订阅模式</a><ul><li><a href="#t1169.4.1 区别">9.4.1 区别</a></li><li><a href="#t1179.4.2 类图">9.4.2 类图</a></li><li><a href="#t1189.4.3 代码">9.4.3 代码</a></li><li><a href="#t1199.4.4 Redis发布订阅">9.4.4 Redis发布订阅</a></li></ul></li></ul></li><li><a href="#t12010. 外观模式">10. 外观模式</a><ul><li><a href="#t12110.1 计算器">10.1 计算器</a></li><li><a href="#t12210.2 计算机">10.2 计算机</a></li><li><a href="#t12310.3 压缩">10.3 压缩</a></li><li><a href="#t12410.4 redux">10.4 redux</a></li><li><a href="#t12510.5 函数重载">10.5 函数重载</a><ul><li><a href="#t12610.5.1 参数重载">10.5.1 参数重载</a></li><li><a href="#t12710.5.2 react createElement">10.5.2 react createElement</a></li><li><a href="#t12810.5.3 vue createElement">10.5.3 vue createElement</a></li><li><a href="#t12910.5.4 buffer">10.5.4 buffer</a></li><li><a href="#t13010.5.5 createStore">10.5.5 createStore</a></li><li><a href="#t13110.5.6 axios">10.5.6 axios</a></li><li><a href="#t13210.5.7 polyfill">10.5.7 polyfill</a></li></ul></li></ul></li><li><a href="#t13311. 迭代器模式">11. 迭代器模式</a><ul><li><a href="#t13411.1 类图">11.1 类图</a></li><li><a href="#t13511.2 代码">11.2 代码</a></li><li><a href="#t13611.3 场景">11.3 场景</a><ul><li><a href="#t13711.3.1 forEach">11.3.1 forEach</a></li><li><a href="#t13811.3.2 each">11.3.2 each</a></li><li><a href="#t13911.3.3 Iterator">11.3.3 Iterator</a></li><li><a href="#t14011.3.4 yield*">11.3.4 yield*</a></li><li><a href="#t14111.3.5 二叉树遍历">11.3.5 二叉树遍历</a></li></ul></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="t01. &#x4EC0;&#x4E48;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;">1. &#x4EC0;&#x4E48;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61; <a href="#t01. &#x4EC0;&#x4E48;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;"> # </a></h2>
<ul>
<li>&#x4EE5;&#x7C7B;&#x548C;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x7EC4;&#x7EC7;&#x4EE3;&#x7801;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x5C01;&#x88C5;&#x3001;&#x62BD;&#x8C61;&#x3001;&#x7EE7;&#x627F;&#x3001;&#x591A;&#x6001;&#x56DB;&#x4E2A;&#x7279;&#x6027;</li>
<li>&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x7ECF;&#x5386;&#x5206;&#x6790;&#x3001;&#x8BBE;&#x8BA1;&#x548C;&#x7F16;&#x7801;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;<ul>
<li>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x5206;&#x6790;(OOA) Object Oriented Analysis</li>
<li>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;(OOD) Object Oriented Design</li>
<li>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;(OOP)Object Oriented Programming</li>
</ul>
</li>
</ul>
<h3 id="t11.1 &#x62BD;&#x8C61;(Abstraction)">1.1 &#x62BD;&#x8C61;(Abstraction) <a href="#t11.1 &#x62BD;&#x8C61;(Abstraction)"> # </a></h3>
<ul>
<li>&#x62BD;&#x8C61;&#x4E3B;&#x8981;&#x662F;&#x9690;&#x85CF;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8BA9;&#x8C03;&#x7528;&#x8005;&#x53EA;&#x5173;&#x5FC3;&#x6709;&#x54EA;&#x4E9B;&#x529F;&#x80FD;&#x800C;&#x4E0D;&#x662F;&#x5173;&#x5FC3;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;</li>
<li>&#x62BD;&#x8C61;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x548C;&#x7EF4;&#x62A4;&#x6027;&#xFF0C;&#x4FEE;&#x6539;&#x5B9E;&#x73B0;&#x4E0D;&#x9700;&#x8981;&#x6539;&#x53D8;&#x5B9A;&#x4E49;&#xFF0C;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x7684;&#x6539;&#x52A8;&#x8303;&#x56F4;</li>
</ul>
<pre><code class="lang-js">interface IStorage {
    save(key: any, <span class="hljs-attr">value</span>: any): <span class="hljs-keyword">void</span>;
    read(key: any): <span class="hljs-keyword">void</span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocalStorage</span> <span class="hljs-title">implements</span> <span class="hljs-title">IStorage</span> </span>{
    save(key: any, <span class="hljs-attr">value</span>: any) {
        localStorage.setItem(key, value);
    }
    read(key: any) {
        <span class="hljs-keyword">return</span> localStorage.getItem(key);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string, public storage: IStorage) {

    }
    save() {
        <span class="hljs-keyword">this</span>.storage.save(<span class="hljs-string">&apos;userInfo&apos;</span>, <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>));
    }
    read() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.storage.read(<span class="hljs-string">&apos;userInfo&apos;</span>);
    }
}
<span class="hljs-keyword">let</span> user = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&apos;&#x5F20;&#x4E09;&apos;</span>, <span class="hljs-keyword">new</span> LocalStorage());
user.save();
user.read();
</code></pre>
<h3 id="t21.2 &#x7EE7;&#x627F;">1.2 &#x7EE7;&#x627F; <a href="#t21.2 &#x7EE7;&#x627F;"> # </a></h3>
<ul>
<li>&#x7EE7;&#x627F;&#x4E3B;&#x8981;&#x7684;&#x8981;&#x5904;&#x662F;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x590D;&#x7528;</li>
<li>&#x7EE7;&#x627F;&#x53EF;&#x4EE5;&#x628A;&#x7236;&#x7C7B;&#x548C;&#x5B50;&#x7C7B;&#x7684;&#x516C;&#x5171;&#x65B9;&#x6CD5;&#x62BD;&#x79BB;&#x51FA;&#x6765;&#xFF0C;&#x63D0;&#x9AD8;&#x590D;&#x7528;&#xFF0C;&#x51CF;&#x5C11;&#x5197;&#x4F59;</li>
<li>&#x662F;&#x4E00;&#x79CD; <code>is-a</code> &#x5173;&#x7CFB;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { };
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
    name: string;
    <span class="hljs-keyword">constructor</span>(name: string) {
        <span class="hljs-keyword">this</span>.name = name;
    }
    eat() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> eat`</span>)
    }
}
<span class="hljs-keyword">let</span> animal = <span class="hljs-keyword">new</span> Animal(<span class="hljs-string">&apos;&#x52A8;&#x7269;&apos;</span>);
animal.eat();

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    age: number;
    <span class="hljs-keyword">constructor</span>(name: string, age: number) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.age = age;
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is barking!`</span>);
    }
}
<span class="hljs-keyword">let</span> dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&apos;&#x1F436;&apos;</span>, <span class="hljs-number">5</span>);
dog.eat();
dog.speak();
</code></pre>
<blockquote>
<p>&#x8FC7;&#x5EA6;&#x4F7F;&#x7528;&#x7EE7;&#x627F;&#x6216;&#x8005;&#x8BF4;&#x7EE7;&#x627F;&#x5C42;&#x6B21;&#x8FC7;&#x6DF1;&#x4F1A;&#x5BFC;&#x81F4;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;&#x3001;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x53D8;&#x5DEE;
&#x5B50;&#x7C7B;&#x548C;&#x7236;&#x7C7B;&#x9AD8;&#x5EA6;&#x8026;&#x5408;&#xFF0C;&#x4FEE;&#x6539;&#x7236;&#x7C7B;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x5F71;&#x54CD;&#x5230;&#x5B50;&#x7C7B;</p>
</blockquote>
<h3 id="t31.3 &#x5C01;&#x88C5;">1.3 &#x5C01;&#x88C5; <a href="#t31.3 &#x5C01;&#x88C5;"> # </a></h3>
<ul>
<li>&#x628A;&#x6570;&#x636E;&#x5C01;&#x88C5;&#x8D77;&#x6765;</li>
<li>&#x51CF;&#x5C11;&#x8026;&#x5408;&#xFF0C;&#x4E0D;&#x8BE5;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x7684;&#x4E0D;&#x8981;&#x8BA9;&#x5916;&#x90E8;&#x8BBF;&#x95EE;</li>
<li>&#x5229;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x63A5;&#x53E3;&#x6743;&#x9650;&#x7BA1;&#x7406;</li>
<li>&#x4EC5;&#x66B4;&#x9732;&#x6709;&#x9650;&#x7684;&#x5FC5;&#x8981;&#x63A5;&#x53E3;&#xFF0C;&#x63D0;&#x9AD8;&#x7C7B;&#x7684;&#x6613;&#x7528;&#x6027;</li>
<li>&#x5B9E;&#x73B0;<ul>
<li>public:&#x516C;&#x6709;&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7C7B;&#x5185;&#x6216;&#x8005;&#x7C7B;&#x5916;&#x4F7F;&#x7528;public&#x4FEE;&#x9970;&#x7684;&#x5C5E;&#x6027;&#x6216;&#x8005;&#x884C;&#x4E3A;&#xFF0C;&#x9ED8;&#x8BA4;&#x4FEE;&#x9970;&#x7B26;</li>
<li>protected:&#x53D7;&#x4FDD;&#x62A4;&#x7684;&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x53EF;&#x4EE5;&#x672C;&#x7C7B;&#x548C;&#x5B50;&#x7C7B;&#x4E2D;&#x4F7F;&#x7528;protected&#x4FEE;&#x9970;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x884C;&#x4E3A;</li>
<li>private : &#x79C1;&#x6709;&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x53EA;&#x53EF;&#x4EE5;&#x5728;&#x7C7B;&#x5185;&#x4F7F;&#x7528;private&#x4FEE;&#x9970;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x884C;&#x4E3A;</li>
</ul>
</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/1control.png" alt="1control">
<img src="http://img.zhufengpeixun.cn/2control.png" alt="2control"></p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
    public name: string;
    protected age: number;
    private weight: number;
    <span class="hljs-keyword">constructor</span>(name: string, age: number, weight: number) {
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.age = age;
        <span class="hljs-keyword">this</span>.weight = weight;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    private money: number;
    <span class="hljs-keyword">constructor</span>(name: string, age: number, weight: number, money: number) {
        <span class="hljs-keyword">super</span>(name, age, weight);
        <span class="hljs-keyword">this</span>.money = money;
    }
    getName() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
    }
    getAge() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.age);
    }
    getWeight() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.weight);
    }
    getMoney() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.money);
    }
}
<span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&apos;zfpx&apos;</span>, <span class="hljs-number">9</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
<span class="hljs-built_in">console</span>.log(p.name);
<span class="hljs-built_in">console</span>.log(p.age);
<span class="hljs-built_in">console</span>.log(p.weight);
</code></pre>
<h3 id="t41.4 &#x591A;&#x6001;">1.4 &#x591A;&#x6001; <a href="#t41.4 &#x591A;&#x6001;"> # </a></h3>
<ul>
<li>&#x591A;&#x6001;&#x662F;&#x6307;&#xFF0C;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x66FF;&#x6362;&#x7236;&#x7C7B;</li>
<li>&#x4FDD;&#x6301;&#x5B50;&#x7C7B;&#x7684;&#x5F00;&#x653E;&#x6027;&#x548C;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x7236;&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</li>
<li>&#x5B9E;&#x73B0;&#x9762;&#x5411;&#x63A5;&#x53E3;&#x7F16;&#x7A0B;  </li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
    public name: string;
    protected age: number;
    private weight: number;
    <span class="hljs-keyword">constructor</span>(name: string, age: number, weight: number) {
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.age = age;
        <span class="hljs-keyword">this</span>.weight = weight;
    }
    speak() {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;&#x6B64;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;!&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    private money: number;
    <span class="hljs-keyword">constructor</span>(name: string, age: number, weight: number, money: number) {
        <span class="hljs-keyword">super</span>(name, age, weight);
        <span class="hljs-keyword">this</span>.money = money;
    }
    getName() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
    }
    getAge() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.age);
    }
    getMoney() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.money);
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x4F60;&#x597D;!&apos;</span>);
    }

}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    <span class="hljs-keyword">constructor</span>(name: string, age: number, weight: number) {
        <span class="hljs-keyword">super</span>(name, age, weight);
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x6C6A;&#x6C6A;&#x6C6A;!&apos;</span>);
    }
}
<span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&apos;zfpx&apos;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);
p.speak();
<span class="hljs-keyword">let</span> d = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&apos;zfpx&apos;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);
d.speak();
</code></pre>
<h2 id="t52. &#x8BBE;&#x8BA1;&#x539F;&#x5219;">2. &#x8BBE;&#x8BA1;&#x539F;&#x5219; <a href="#t52. &#x8BBE;&#x8BA1;&#x539F;&#x5219;"> # </a></h2>
<h3 id="t62.1 &#x4EC0;&#x4E48;&#x662F;&#x8BBE;&#x8BA1;&#xFF1F;">2.1 &#x4EC0;&#x4E48;&#x662F;&#x8BBE;&#x8BA1;&#xFF1F; <a href="#t62.1 &#x4EC0;&#x4E48;&#x662F;&#x8BBE;&#x8BA1;&#xFF1F;"> # </a></h3>
<ul>
<li>&#x6309;&#x54EA;&#x4E00;&#x79CD;&#x601D;&#x8DEF;&#x6216;&#x8005;&#x6807;&#x51C6;&#x6765;&#x5B9E;&#x73B0;&#x529F;&#x80FD;</li>
<li>&#x529F;&#x80FD;&#x76F8;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x4E0D;&#x540C;&#x8BBE;&#x8BA1;&#x7684;&#x65B9;&#x5F0F;</li>
<li>&#x9700;&#x6C42;&#x5982;&#x679C;&#x4E0D;&#x65AD;&#x53D8;&#x5316;&#xFF0C;&#x8BBE;&#x8BA1;&#x7684;&#x4F5C;&#x7528;&#x624D;&#x80FD;&#x4F53;&#x73B0;&#x51FA;&#x6765;</li>
</ul>
<h3 id="t72.2 SOLID&#x4E94;&#x5927;&#x8BBE;&#x8BA1;&#x539F;&#x5219;">2.2 SOLID&#x4E94;&#x5927;&#x8BBE;&#x8BA1;&#x539F;&#x5219; <a href="#t72.2 SOLID&#x4E94;&#x5927;&#x8BBE;&#x8BA1;&#x539F;&#x5219;"> # </a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">&#x9996;&#x5B57;&#x6BCD;</th>
<th style="text-align:left">&#x6307;&#x4EE3;</th>
<th style="text-align:left">&#x6982;&#x5FF5;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">S</td>
<td style="text-align:left">&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;</td>
<td style="text-align:left">&#x5355;&#x4E00;&#x529F;&#x80FD;&#x539F;&#x5219;&#x8BA4;&#x4E3A;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x4EC5;&#x5177;&#x6709;&#x4E00;&#x79CD;<code>&#x5355;&#x4E00;&#x529F;&#x80FD;</code>&#x7684;&#x6982;&#x5FF5;</td>
</tr>
<tr>
<td style="text-align:left">O</td>
<td style="text-align:left">&#x5F00;&#x653E;&#x5C01;&#x95ED;&#x539F;&#x5219;</td>
<td style="text-align:left">&#x5F00;&#x95ED;&#x539F;&#x5219;&#x8BA4;&#x4E3A;<code>&#x8F6F;&#x4EF6;&#x4F53;&#x5E94;&#x8BE5;&#x662F;&#x5BF9;&#x4E8E;&#x6269;&#x5C55;&#x5F00;&#x653E;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4FEE;&#x6539;&#x5C01;&#x95ED;&#x7684;</code>&#x7684;&#x6982;&#x5FF5;</td>
</tr>
<tr>
<td style="text-align:left">L</td>
<td style="text-align:left">&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;</td>
<td style="text-align:left">&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x8BA4;&#x4E3A;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x662F;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x7A0B;&#x5E8F;&#x6B63;&#x786E;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;<code>&#x88AB;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x6240;&#x66FF;&#x6362;</code>&#x7684;&#x7684;&#x6982;&#x5FF5;</td>
</tr>
<tr>
<td style="text-align:left">I</td>
<td style="text-align:left">&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</td>
<td style="text-align:left">&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;&#x8BA4;&#x4E3A;<code>&#x591A;&#x4E2A;&#x7279;&#x5B9A;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x53E3;&#x8981;&#x597D;&#x4E8E;&#x4E00;&#x4E2A;&#x5BBD;&#x6CDB;&#x7528;&#x9014;&#x7684;&#x63A5;&#x53E3;</code>&#x7684;&#x6982;&#x5FF5;</td>
</tr>
<tr>
<td style="text-align:left">D</td>
<td style="text-align:left">&#x4F9D;&#x8D56;&#x53CD;&#x8F6C;&#x539F;&#x5219;</td>
<td style="text-align:left">&#x4F9D;&#x8D56;&#x53CD;&#x8F6C;&#x539F;&#x5219;&#x8BA4;&#x4E3A;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x5E94;&#x8BE5;&#x9075;&#x4ECE;<code>&#x4F9D;&#x8D56;&#x4E8E;&#x62BD;&#x8C61;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;</code>&#x7684;&#x6982;&#x5FF5;,&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x662F;&#x8BE5;&#x539F;&#x5219;&#x7684;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x3002;</td>
</tr>
</tbody>
</table>
<h4 id="t82.2.1 O &#x5F00;&#x653E;&#x5C01;&#x95ED;&#x539F;&#x5219;">2.2.1 O &#x5F00;&#x653E;&#x5C01;&#x95ED;&#x539F;&#x5219; <a href="#t82.2.1 O &#x5F00;&#x653E;&#x5C01;&#x95ED;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li><code>Open Closed Principle</code></li>
<li>&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#xFF0C;&#x5BF9;&#x4FEE;&#x6539;&#x5173;&#x95ED;</li>
<li>&#x589E;&#x52A0;&#x9700;&#x6C42;&#x65F6;&#xFF0C;&#x6269;&#x5C55;&#x65B0;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x975E;&#x4FEE;&#x6539;&#x5DF2;&#x6709;&#x4EE3;&#x7801;</li>
<li>&#x5F00;&#x95ED;&#x539F;&#x5219;&#x662F;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x603B;&#x539F;&#x5219;</li>
<li>&#x5BF9;&#x8FD1;&#x671F;&#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x5316;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x6709;&#x53D8;&#x5316;&#x4F46;&#x6539;&#x52A8;&#x91CF;&#x5DE8;&#x5927;&#x7684;&#x5730;&#x65B9;&#x8981;&#x589E;&#x52A0;&#x6269;&#x5C55;&#x70B9;,&#x6269;&#x5C55;&#x70B9;&#x8FC7;&#x591A;&#x4F1A;&#x964D;&#x4F4E;&#x53EF;&#x8BFB;&#x6027;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> </span>{
    <span class="hljs-keyword">constructor</span>(public rank: string) { }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string, public price: number) {

    }
    cost(customer: Customer) {
        <span class="hljs-keyword">switch</span> (customer.rank) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;member&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.price * <span class="hljs-number">.8</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;vip&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.price * <span class="hljs-number">.6</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.price;
        }
    }
}
<span class="hljs-keyword">let</span> p1 = <span class="hljs-keyword">new</span> Product(<span class="hljs-string">&apos;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&apos;</span>, <span class="hljs-number">1000</span>);
<span class="hljs-keyword">let</span> member = <span class="hljs-keyword">new</span> Customer(<span class="hljs-string">&apos;member&apos;</span>);
<span class="hljs-keyword">let</span> vip = <span class="hljs-keyword">new</span> Customer(<span class="hljs-string">&apos;vip&apos;</span>);
<span class="hljs-keyword">let</span> guest = <span class="hljs-keyword">new</span> Customer(<span class="hljs-string">&apos;guest&apos;</span>);
<span class="hljs-built_in">console</span>.log(p1.cost(member));
<span class="hljs-built_in">console</span>.log(p1.cost(vip));
<span class="hljs-built_in">console</span>.log(p1.cost(guest));
</code></pre>
<pre><code class="lang-diff">class Customer {
<span class="hljs-addition">+    constructor(public rank: string, public discount: number = 1) { }</span>
<span class="hljs-addition">+    getDiscount() {</span>
<span class="hljs-addition">+        return this.discount;</span>
<span class="hljs-addition">+    }</span>
}
class Product {
    constructor(public name: string, public price: number) {

    }
    cost(customer: Customer) {
<span class="hljs-deletion">-        /*  switch (customer.rank) {</span>
<span class="hljs-deletion">-             case &apos;member&apos;:</span>
<span class="hljs-deletion">-                 return this.price * .8;</span>
<span class="hljs-deletion">-             case &apos;vip&apos;:</span>
<span class="hljs-deletion">-                 return this.price * .6;</span>
<span class="hljs-deletion">-             default:</span>
<span class="hljs-deletion">-                 return this.price;</span>
<span class="hljs-deletion">-         } */</span>
<span class="hljs-addition">+        return this.price * customer.getDiscount();</span>
    }
}
<span class="hljs-addition">+let p1 = new Product(&apos;&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&apos;, 1000);</span>
<span class="hljs-addition">+let member = new Customer(&apos;member&apos;, .8);</span>
<span class="hljs-addition">+let vip = new Customer(&apos;vip&apos;, .6);</span>
let guest = new Customer(&apos;guest&apos;);
console.log(p1.cost(member));
console.log(p1.cost(vip));
console.log(p1.cost(guest));
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> axios, { AxiosInstance, AxiosRequestConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;axios&apos;</span>;
<span class="hljs-keyword">let</span> instance: AxiosInstance = axios.create();
instance.interceptors.request.use(<span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> {
    config.url = <span class="hljs-string">&apos;http://localhost:8080&apos;</span> + config.url;
    <span class="hljs-keyword">return</span> config;
});

instance.interceptors.response.use(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">200</span> || response.data.code != <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(response);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> response.data.data;
    }
})
<span class="hljs-comment">/**
 * {code:0,data:{id:1,name:&apos;zhufeng&apos;}}
 */</span>
instance({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;/api/users&apos;</span>
}).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(result);
}, error =&gt; {
    <span class="hljs-built_in">console</span>.error(error);
});
</code></pre>
<h4 id="t92.2.2 S &#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;">2.2.2 S &#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219; <a href="#t92.2.2 S &#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li>Single responsibility principle</li>
<li>&#x4E00;&#x4E2A;&#x7C7B;&#x6216;&#x8005;&#x6A21;&#x5757;&#x53EA;&#x8D1F;&#x8D23;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x804C;&#x8D23;,&#x5982;&#x679C;&#x529F;&#x80FD;&#x7279;&#x522B;&#x590D;&#x6742;&#x5C31;&#x8FDB;&#x884C;&#x62C6;&#x5206;</li>
<li>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x7C7B;&#x7684;&#x590D;&#x6742;&#x6027;&#xFF0C;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;&#x3001;&#x53EF;&#x7EF4;&#x62A4;&#x6027;</li>
<li>&#x5F53;&#x7C7B;&#x4EE3;&#x7801;&#x884C;&#x6570;&#x8FC7;&#x591A;&#x3001;&#x65B9;&#x6CD5;&#x8FC7;&#x591A;&#x3001;&#x529F;&#x80FD;&#x592A;&#x591A;&#x3001;&#x804C;&#x8D23;&#x592A;&#x6742;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x8981;&#x5BF9;&#x7C7B;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#x4E86;</li>
<li><p>&#x62C6;&#x5206;&#x4E0D;&#x80FD;&#x8FC7;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x62C6;&#x5206;&#x8FC7;&#x5EA6;&#x4F1A;&#x635F;&#x5931;&#x5185;&#x805A;&#x6027;&#x548C;&#x7EF4;&#x62A4;&#x6027;</p>
</li>
<li><p><a href="https://www.lodashjs.com/docs/latest">lodashjs</a></p>
</li>
<li><a href="https://api.jquery.com/">jquery</a></li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/product.png" alt="product"></p>
<pre><code class="lang-diff">class Product {
    public name: string;
<span class="hljs-deletion">-    public categoryName: string;</span>
<span class="hljs-deletion">-    public categoryIcon: string;</span>
<span class="hljs-addition">+     public category:Category;</span>
}
<span class="hljs-addition">+class Category {</span>
<span class="hljs-addition">+    public name: string;</span>
<span class="hljs-addition">+    public icon: string;</span>
<span class="hljs-addition">+}</span>
</code></pre>
<h4 id="t102.2.3 L &#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;">2.2.3 L &#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219; <a href="#t102.2.3 L &#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li>Liskov Substitution Principle</li>
<li>&#x6240;&#x6709;&#x5F15;&#x7528;&#x57FA;&#x7C7B;&#x7684;&#x5730;&#x65B9;&#x5FC5;&#x987B;&#x80FD;&#x900F;&#x660E;&#x5730;&#x4F7F;&#x7528;&#x5176;&#x5B50;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x5B50;&#x7C7B;&#x80FD;&#x66FF;&#x6362;&#x6389;&#x7236;&#x7C7B;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x53EF;&#x80FD;&#x6839;&#x672C;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x77E5;&#x9053;&#x662F;&#x7236;&#x7C7B;&#x8FD8;&#x662F;&#x5B50;&#x7C7B;,&#x53CD;&#x4E4B;&#x5219;&#x4E0D;&#x884C;</li>
<li>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x662F;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x7684;&#x5B9E;&#x73B0;&#x57FA;&#x7840;,&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x7684;&#x65F6;&#x5019;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x57FA;&#x7C7B;&#x5B9A;&#x4E49;&#x53CA;&#x5F15;&#x7528;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x518D;&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x5B50;&#x7C7B;</li>
<li>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x590D;&#x7528;&#x6027;&#xFF0C;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x4E5F;&#x589E;&#x52A0;&#x4E86;&#x8026;&#x5408;&#x6027;</li>
<li>&#x76F8;&#x5BF9;&#x4E8E;&#x591A;&#x6001;&#xFF0C;&#x8FD9;&#x4E2A;&#x539F;&#x5219;&#x662F;&#x8BB2;&#x7684;&#x662F;&#x7C7B;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#xFF0C;&#x5B50;&#x7C7B;&#x5982;&#x679C;&#x8FDD;&#x53CD;&#x4E86;&#x7236;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#x5219;&#x8868;&#x793A;&#x8FDD;&#x53CD;&#x4E86;&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/3.Substitution.png" alt="Substitution"></p>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractDrink</span> </span>{
    abstract getName(): string;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CocaCola</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDrink</span> </span>{
    getName(): string {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&#x53EF;&#x4E50;&apos;</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sprite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDrink</span> </span>{
    getName(): string {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&#x96EA;&#x78A7;&apos;</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fanta</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDrink</span> </span>{
    getName(): string {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&#x82AC;&#x8FBE;&apos;</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> </span>{
    drink(drink: AbstractDrink) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x559D;&apos;</span> + drink.getName());
    }
}
<span class="hljs-keyword">let</span> customer = <span class="hljs-keyword">new</span> Customer();
<span class="hljs-keyword">let</span> cocaCola = <span class="hljs-keyword">new</span> CocaCola();
<span class="hljs-keyword">let</span> sprite = <span class="hljs-keyword">new</span> Sprite();
<span class="hljs-keyword">let</span> fanta = <span class="hljs-keyword">new</span> Fanta();
customer.drink(cocaCola);
customer.drink(sprite);
customer.drink(fanta);
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    }
}
<span class="hljs-keyword">let</span> element = React.createElement(App);
ReactDOM.render(element, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>));
</code></pre>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractDrink</span> </span>{
    abstract getName(): any;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CocaCola</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDrink</span> </span>{
    getName(): any {
        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
    }
}
</code></pre>
<h4 id="t112.2.4 D &#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;">2.2.4 D &#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219; <a href="#t112.2.4 D &#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li>Dependence Inversion Principle</li>
<li>&#x9762;&#x5411;&#x63A5;&#x53E3;&#x7F16;&#x7A0B;&#xFF0C;&#x4F9D;&#x8D56;&#x4E8E;&#x62BD;&#x8C61;&#x800C;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x5177;&#x4F53;&#x5B9E;&#x73B0;</li>
<li>&#x8981;&#x6C42;&#x6211;&#x4EEC;&#x5728;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4E2D;&#x4F20;&#x9012;&#x53C2;&#x6570;&#x65F6;&#x6216;&#x5728;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x4E2D;&#xFF0C;&#x5C3D;&#x91CF;&#x5F15;&#x7528;&#x5C42;&#x6B21;&#x9AD8;&#x7684;&#x62BD;&#x8C61;&#x5C42;&#x7C7B;</li>
<li>&#x4F7F;&#x7528;&#x65B9;&#x53EA;&#x5173;&#x6CE8;&#x63A5;&#x53E3;&#x800C;&#x4E0D;&#x5173;&#x6CE8;&#x5177;&#x4F53;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/5.Inversion.png" alt="Inversion"></p>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GirlFriend</span> </span>{
    public age: number;
    public height: number;
    public abstract cook(): <span class="hljs-keyword">void</span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinZhiLing</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GirlFriend</span> </span>{
    public cook(): <span class="hljs-keyword">void</span> {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HanMeiMei</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GirlFriend</span> </span>{
    public cook(): <span class="hljs-keyword">void</span> {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SingleDog</span> </span>{
    <span class="hljs-keyword">constructor</span>(public girlFriend: GirlFriend) {

    }
}
<span class="hljs-keyword">let</span> s1 = <span class="hljs-keyword">new</span> SingleDog(<span class="hljs-keyword">new</span> LinZhiLing());
<span class="hljs-keyword">let</span> s2 = <span class="hljs-keyword">new</span> SingleDog(<span class="hljs-keyword">new</span> HanMeiMei());
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux&apos;</span>;
<span class="hljs-keyword">let</span> store = createStore(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state);
<span class="hljs-keyword">export</span> interface Action&lt;T = any&gt; {
    <span class="hljs-attr">type</span>: T
}
<span class="hljs-keyword">export</span> interface AnyAction extends Action {
    <span class="hljs-comment">// Allows any extra properties to be defined in an action.</span>
    [extraProps: string]: any
}
<span class="hljs-keyword">let</span> action: AnyAction = { <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;increment&apos;</span>, <span class="hljs-attr">payload</span>: <span class="hljs-number">5</span> }
store.dispatch(action);
</code></pre>
<h4 id="t122.2.5  I &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;">2.2.5  I &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219; <a href="#t122.2.5  I &#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li>Interface Segregation Principle</li>
<li>&#x4FDD;&#x6301;&#x63A5;&#x53E3;&#x7684;&#x5355;&#x4E00;&#x72EC;&#x7ACB;&#xFF0C;&#x907F;&#x514D;&#x51FA;&#x73B0;&#x80D6;&#x63A5;&#x53E3;</li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7C7B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5E94;&#x8BE5;&#x5EFA;&#x7ACB;&#x5728;&#x6700;&#x5C0F;&#x7684;&#x63A5;&#x53E3;&#x4E0A;</li>
<li>&#x63A5;&#x53E3;&#x5C3D;&#x91CF;&#x7EC6;&#x5316;&#xFF0C;&#x800C;&#x4E14;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x5C3D;&#x91CF;&#x7684;&#x5C11;</li>
<li>&#x7C7B;&#x4F3C;&#x4E8E;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#xFF0C;&#x66F4;&#x5173;&#x6CE8;&#x63A5;&#x53E3;</li>
</ul>
<pre><code class="lang-js">interface IUserManager {
    updateUserInfo(): <span class="hljs-keyword">void</span>;
    updatePassword(): <span class="hljs-keyword">void</span>;
}
interface IProductManager {
    updateProduct(): <span class="hljs-keyword">void</span>;
    updatePrice(): <span class="hljs-keyword">void</span>;
}
</code></pre>
<p><img src="http://img.zhufengpeixun.cn/play.jpg" alt="play"></p>
<pre><code class="lang-js">interface Running {
    run(): <span class="hljs-keyword">void</span>;
}
interface Flying {
    fly(): <span class="hljs-keyword">void</span>;
}
interface Swimming {
    swim(): <span class="hljs-keyword">void</span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Automobile</span> <span class="hljs-title">implements</span> <span class="hljs-title">Running</span>, <span class="hljs-title">Flying</span>, <span class="hljs-title">Swimming</span> </span>{
    run() { }
    fly() { }
    swim() { }
}
</code></pre>
<h3 id="t132.3  &#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;">2.3  &#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219; <a href="#t132.3  &#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;"> # </a></h3>
<ul>
<li>Law of Demeter&#xFF0C;LOD</li>
<li>&#x6709;&#x65F6;&#x5019;&#x4E5F;&#x53EB;&#x505A;&#x6700;&#x5C11;&#x77E5;&#x8BC6;&#x539F;&#x5219;</li>
<li>&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;&#x5B9E;&#x4F53;&#x5E94;&#x5F53;&#x5C3D;&#x53EF;&#x80FD;&#x5C11;&#x5730;&#x4E0E;&#x5176;&#x5B83;&#x5B9E;&#x4F53;&#x53D1;&#x751F;&#x76F8;&#x4E92;&#x4F5C;&#x7528;</li>
<li>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x7684;&#x521D;&#x8877;&#x5728;&#x4E8E;&#x964D;&#x4F4E;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;</li>
<li>&#x7C7B;&#x5B9A;&#x4E49;&#x65F6;&#x5C3D;&#x91CF;&#x8981;&#x5B9E;&#x73B0;&#x5185;&#x805A;,&#x5C11;&#x4F7F;&#x7528;<code>public</code>&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;<code>private</code>&#x3001;<code>protected</code> &#x7B49;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/6.Demeter.png" alt="Demeter"></p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Salesman</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {

    }
    sale() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">&apos; &#x9500;&#x552E;&#x4E2D;....&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SaleManager</span> </span>{
    private salesmen: <span class="hljs-built_in">Array</span>&lt;Salesman&gt; = [<span class="hljs-keyword">new</span> Salesman(<span class="hljs-string">&apos;&#x5F20;&#x4E09;&apos;</span>), <span class="hljs-keyword">new</span> Salesman(<span class="hljs-string">&apos;&#x674E;&#x56DB;&apos;</span>)];
    sale() {
        <span class="hljs-keyword">this</span>.salesmen.forEach(<span class="hljs-function"><span class="hljs-params">salesman</span> =&gt;</span> salesman.sale());
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CEO</span> </span>{
    private saleManager: SaleManager = <span class="hljs-keyword">new</span> SaleManager();
    sale() {
        <span class="hljs-keyword">this</span>.saleManager.sale();
    }
}
<span class="hljs-keyword">let</span> ceo = <span class="hljs-keyword">new</span> CEO();
ceo.sale();
</code></pre>
<h3 id="t142.4  &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;">2.4  &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219; <a href="#t142.4  &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;"> # </a></h3>
<h4 id="t152.4.1 &#x7C7B;&#x7684;&#x5173;&#x7CFB;">2.4.1 &#x7C7B;&#x7684;&#x5173;&#x7CFB; <a href="#t152.4.1 &#x7C7B;&#x7684;&#x5173;&#x7CFB;"> # </a></h4>
<ul>
<li>&#x7C7B;&#x4E4B;&#x95F4;&#x6709;&#x4E09;&#x79CD;&#x57FA;&#x672C;&#x5173;&#x7CFB;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x5173;&#x8054;(&#x805A;&#x5408;&#x548C;&#x7EC4;&#x5408;)&#x3001;&#x6CDB;&#x5316;&#x548C;&#x4F9D;&#x8D56;</li>
<li>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7C7B;&#x5355;&#x5411;&#x4F9D;&#x8D56;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;,&#x90A3;&#x4E48;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x5C31;&#x662F;&#x5355;&#x5411;&#x5173;&#x8054;&#x3002;&#x5982;&#x679C;&#x5F7C;&#x6B64;&#x4F9D;&#x8D56;,&#x5219;&#x4E3A;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;,&#x5373;&#x53CC;&#x5411;&#x5173;&#x8054;</li>
<li>&#x5173;&#x8054;&#x5173;&#x7CFB;&#x5305;&#x62EC;&#x4E24;&#x79CD;&#x7279;&#x4F8B;&#xFF1A;&#x805A;&#x5408;&#x548C;&#x7EC4;&#x5408;<ul>
<li>&#x805A;&#x5408;&#xFF0C;&#x7528;&#x6765;&#x8868;&#x793A;&#x6574;&#x4F53;&#x4E0E;&#x90E8;&#x5206;&#x7684;&#x5173;&#x7CFB;&#x6216;&#x8005;<code>&#x62E5;&#x6709;</code>&#x5173;&#x7CFB;,&#x4EE3;&#x8868;&#x90E8;&#x5206;&#x7684;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x6574;&#x4F53;&#x62E5;&#x6709;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x5B9A;&#x5B9A;&#x4F1A;&#x968F;&#x7740;&#x6574;&#x4F53;&#x7684;&#x6D88;&#x4EA1;&#x800C;&#x9500;&#x6BC1;,&#x6BD4;&#x5982;&#x73ED;&#x7EA7;&#x548C;&#x5B66;&#x751F;</li>
<li>&#x5408;&#x6210;&#x6216;&#x8005;&#x8BF4;&#x7EC4;&#x5408;&#x8981;&#x6BD4;&#x805A;&#x5408;&#x5173;&#x7CFB;&#x5F3A;&#x7684;&#x591A;&#xFF0C;&#x90E8;&#x5206;&#x548C;&#x6574;&#x4F53;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x662F;&#x4E00;&#x81F4;&#x7684;,&#x6BD4;&#x5982;&#x4EBA;&#x548C;&#x5668;&#x5B98;&#x4E4B;&#x95F4;</li>
</ul>
</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/xinyuanjieyi.png" alt="xinyuanjieyi"></p>
<p><img src="http://img.zhufengpeixun.cn/7.composite.png" alt="composite"></p>
<h4 id="t162.4.2 &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;">2.4.2 &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219; <a href="#t162.4.2 &#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;"> # </a></h4>
<ul>
<li>&#x5408;&#x6210;&#x590D;&#x7528;&#x539F;&#x5219;&#x662F;&#x901A;&#x8FC7;&#x5C06;&#x5DF2;&#x6709;&#x7684;&#x5BF9;&#x8C61;&#x7EB3;&#x5165;&#x65B0;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x4F5C;&#x4E3A;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x6210;&#x5458;&#x5BF9;&#x8C61;&#x6765;&#x5B9E;&#x73B0;&#x7684;</li>
<li>&#x65B0;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5DF2;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x590D;&#x7528;</li>
<li>&#x539F;&#x5219;&#x662F;&#x5C3D;&#x91CF;&#x9996;&#x5148;&#x4F7F;&#x7528;&#x7EC4;&#x5408;/&#x805A;&#x5408;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528;&#x7EE7;&#x627F;</li>
<li>&#x4E13;&#x4E1A;&#x4EBA;&#x505A;&#x4E13;&#x4E1A;&#x4E8B;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cooker</span> </span>{
    cook() {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
    private cooker: Cooker = <span class="hljs-keyword">new</span> Cooker();
    cook() {
        <span class="hljs-keyword">this</span>.cooker.cook();
    }
}
</code></pre>
<h3 id="t172.5 &#x603B;&#x7ED3;">2.5 &#x603B;&#x7ED3; <a href="#t172.5 &#x603B;&#x7ED3;"> # </a></h3>
<ul>
<li>&#x5F00;&#x95ED;&#x539F;&#x5219;&#x662F;&#x6838;&#x5FC3;&#xFF0C;&#x5BF9;&#x4FEE;&#x6539;&#x5173;&#x95ED;&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#x662F;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x7684;&#x57FA;&#x77F3;</li>
<li>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x8981;&#x6C42;&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x63A5;&#x53E3;&#x548C;&#x6A21;&#x5757;&#x529F;&#x80FD;&#x7684;&#x65F6;&#x5019;&#x5C3D;&#x91CF;&#x4FDD;&#x8BC1;&#x5355;&#x4E00;&#x6027;&#x548C;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x4FEE;&#x6539;&#x4E00;&#x6761;&#x4E0D;&#x5F71;&#x54CD;&#x5168;&#x5C40;&#x548C;&#x5176;&#x5B83;&#x6A21;&#x5757;</li>
<li>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x548C;&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#x8981;&#x6C42;&#x9762;&#x5411;&#x63A5;&#x53E3;&#x548C;&#x62BD;&#x8C61;&#x7F16;&#x7A0B;,&#x4E0D;&#x8981;&#x4F9D;&#x8D56;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x5426;&#x5219;&#x5B9E;&#x73B0;&#x4E00;&#x6539;&#xFF0C;&#x4E0A;&#x5C42;&#x8C03;&#x7528;&#x8005;&#x5C31;&#x8981;&#x5BF9;&#x5E94;&#x4FEE;&#x6539;</li>
</ul>
<h3 id="t182.6 &#x5982;&#x4F55;&#x5199;&#x51FA;&#x597D;&#x4EE3;&#x7801;?">2.6 &#x5982;&#x4F55;&#x5199;&#x51FA;&#x597D;&#x4EE3;&#x7801;? <a href="#t182.6 &#x5982;&#x4F55;&#x5199;&#x51FA;&#x597D;&#x4EE3;&#x7801;?"> # </a></h3>
<ul>
<li>&#x53EF;&#x7EF4;&#x62A4;&#x6027; BUG&#x662F;&#x5426;&#x597D;&#x6539;?</li>
<li>&#x53EF;&#x8BFB;&#x6027; &#x662F;&#x5426;&#x5BB9;&#x6613;&#x770B;&#x61C2;?</li>
<li>&#x53EF;&#x6269;&#x5C55;&#x6027; &#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x65B0;&#x529F;&#x80FD;?</li>
<li>&#x7075;&#x6D3B;&#x6027; &#x6DFB;&#x52A0;&#x65B0;&#x529F;&#x80FD;&#x662F;&#x5426;&#x5BB9;&#x6613;?&#x8001;&#x65B9;&#x6CD5;&#x548C;&#x63A5;&#x53E3;&#x662F;&#x5426;&#x5BB9;&#x6613;&#x590D;&#x7528;?</li>
<li>&#x7B80;&#x6D01;&#x6027; &#x4EE3;&#x7801;&#x662F;&#x5426;&#x7B80;&#x5355;&#x6E05;&#x6670;?</li>
<li>&#x53EF;&#x590D;&#x7528;&#x6027; &#x76F8;&#x540C;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x8981;&#x5199;2&#x904D;?</li>
<li>&#x53EF;&#x6D4B;&#x8BD5;&#x6027; &#x662F;&#x5426;&#x65B9;&#x4FBF;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;?</li>
</ul>
<h2 id="t193. 23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;">3. 23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; <a href="#t193. 23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;"> # </a></h2>
<h3 id="t203.1 &#x521B;&#x5EFA;&#x578B;">3.1 &#x521B;&#x5EFA;&#x578B; <a href="#t203.1 &#x521B;&#x5EFA;&#x578B;"> # </a></h3>
<ul>
<li><code>&#x91CD;&#x8981;: &#x5DE5;&#x5382;&#x6A21;&#x5F0F;(&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x3001;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x3001;&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;)&#x3001;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x3001;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</code></li>
<li>&#x4E0D;&#x91CD;&#x8981;: &#x539F;&#x578B;&#x6A21;&#x5F0F;</li>
</ul>
<h3 id="t213.2 &#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;">3.2 &#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F; <a href="#t213.2 &#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;"> # </a></h3>
<ul>
<li><code>&#x91CD;&#x8981;: &#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x3001;&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#x3001;&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;&#x3001;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</code></li>
<li>&#x4E0D;&#x91CD;&#x8981;: &#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x3001;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x3001;&#x4EAB;&#x5143;&#x6A21;&#x5F0F;</li>
</ul>
<h3 id="t223.3 &#x884C;&#x4E3A;&#x578B;">3.3 &#x884C;&#x4E3A;&#x578B; <a href="#t223.3 &#x884C;&#x4E3A;&#x578B;"> # </a></h3>
<ul>
<li><code>&#x91CD;&#x8981;: &#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x3001;&#x6A21;&#x7248;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x3001;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x3001;&#x804C;&#x8D23;&#x94FE;&#x6A21;&#x5F0F;&#x3001;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#x3001;&#x72B6;&#x6001;&#x6A21;&#x5F0F;</code></li>
<li>&#x4E0D;&#x91CD;&#x8981;: &#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x3001;&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#x3001;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x3001;&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;&#x3001;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;</li>
</ul>
<h2 id="t234. &#x5DE5;&#x5382;&#x6A21;&#x5F0F;">4. &#x5DE5;&#x5382;&#x6A21;&#x5F0F; <a href="#t234. &#x5DE5;&#x5382;&#x6A21;&#x5F0F;"> # </a></h2>
<h3 id="t244.1 &#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;">4.1 &#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F; <a href="#t244.1 &#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;"> # </a></h3>
<ul>
<li>&#x7B80;&#x5355;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x662F;&#x7531;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x5BF9;&#x8C61;&#x51B3;&#x5B9A;&#x521B;&#x5EFA;&#x51FA;&#x54EA;&#x4E00;&#x79CD;&#x4EA7;&#x54C1;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;<h4 id="t254.1.1 &#x7C7B;&#x56FE;">4.1.1 &#x7C7B;&#x56FE; <a href="#t254.1.1 &#x7C7B;&#x56FE;"> # </a></h4>
</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/simplefatory2.png" alt="simplefatory2"></p>
<h4 id="t264.1.2 &#x4EE3;&#x7801;">4.1.2 &#x4EE3;&#x7801; <a href="#t264.1.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AmericanoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LatteCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CappuccinoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Caf</span>&#xE9; </span>{
    <span class="hljs-keyword">static</span> order(name: string) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Americano&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AmericanoCoffee(<span class="hljs-string">&apos;&#x7F8E;&#x5F0F;&#x5496;&#x5561;&apos;</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Latte&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LatteCoffee(<span class="hljs-string">&apos;&#x62FF;&#x94C1;&#x5496;&#x5561;&apos;</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Cappuccino&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LatteCoffee(<span class="hljs-string">&apos;&#x5361;&#x5E03;&#x5947;&#x8BFA;&apos;</span>);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Americano&apos;</span>));
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Latte&apos;</span>));
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Cappuccino&apos;</span>));

</code></pre>
<h3 id="t274.1.3 &#x7F3A;&#x70B9;">4.1.3 &#x7F3A;&#x70B9; <a href="#t274.1.3 &#x7F3A;&#x70B9;"> # </a></h3>
<ul>
<li>&#x5982;&#x679C;&#x4EA7;&#x54C1;&#x7684;&#x79CD;&#x7C7B;&#x975E;&#x5E38;&#x591A;<code>switch case</code>&#x7684;&#x5224;&#x65AD;&#x4F1A;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x591A;</li>
<li>&#x4E0D;&#x7B26;&#x5408;&#x5F00;&#x653E;&#x2014;&#x5C01;&#x95ED;&#x539F;&#x5219;,&#x5982;&#x679C;&#x8981;&#x589E;&#x52A0;&#x6216;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x79CD;&#x7C7B;&#xFF0C;&#x5C31;&#x8981;&#x4FEE;&#x6539;<code>switch case</code>&#x7684;&#x5224;&#x65AD;&#x4EE3;&#x7801;</li>
</ul>
<h4 id="t284.1.3 &#x524D;&#x7AEF;&#x5E94;&#x7528;&#x573A;&#x666F;">4.1.3 &#x524D;&#x7AEF;&#x5E94;&#x7528;&#x573A;&#x666F; <a href="#t284.1.3 &#x524D;&#x7AEF;&#x5E94;&#x7528;&#x573A;&#x666F;"> # </a></h4>
<h5 id="t294.1.3.1 jQuery">4.1.3.1 jQuery <a href="#t294.1.3.1 jQuery"> # </a></h5>
<ul>
<li><a href="https://github.com/jquery/jquery/blob/c1ee33aded44051b8f1288b59d2efdc68d0413cc/src/core.js#L24-L29">jQuery</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">jQuery</span></span>{
    <span class="hljs-keyword">constructor</span>(selector){
        <span class="hljs-keyword">let</span> elements = <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.querySelectorAll(selector));
        <span class="hljs-keyword">let</span> length = elements?elements.length:<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;length;i++){
            <span class="hljs-keyword">this</span>[i]=elements[i];
        }
        <span class="hljs-keyword">this</span>.length = length;
    }
    html(html){
        <span class="hljs-keyword">if</span>(html){
           <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>].innerHTML=html;
        }<span class="hljs-keyword">else</span>{
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>].innerHTML;
        }
    }
}
<span class="hljs-built_in">window</span>.$ = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector</span>)</span>{
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> jQuery(selector);
}
</code></pre>
<h5 id="t304.1.3.2 React">4.1.3.2 React <a href="#t304.1.3.2 React"> # </a></h5>
<ul>
<li><a href="https://github.com/facebook/react/blob/master/packages/react/src/ReactElement.js#L313-L395">createElement</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span>(<span class="hljs-params">type, config, children</span>) </span>{
    <span class="hljs-keyword">return</span> ReactElement(
        type,
        key,
        ref,
        self,
        source,
        ReactCurrentOwner.current,
        props,
    );
}
</code></pre>
<h3 id="t314.2 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;">4.2 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F; <a href="#t314.2 &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;"> # </a></h3>
<ul>
<li>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;<code>Factory Method</code>,&#x53C8;&#x79F0;&#x591A;&#x6001;&#x6027;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x3002;</li>
<li>&#x5728;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x4E2D;,&#x6838;&#x5FC3;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x4E0D;&#x518D;&#x8D1F;&#x8D23;&#x6240;&#x6709;&#x7684;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5177;&#x4F53;&#x521B;&#x5EFA;&#x7684;&#x5DE5;&#x4F5C;&#x4EA4;&#x7ED9;&#x5DE5;&#x5382;&#x5B50;&#x7C7B;&#x53BB;&#x505A;&#x3002;</li>
</ul>
<h4 id="t324.2.1 &#x7C7B;&#x56FE;">4.2.1 &#x7C7B;&#x56FE; <a href="#t324.2.1 &#x7C7B;&#x56FE;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/factorymethod.png" alt="factorymethod"></p>
<h4 id="t334.2.2 &#x4EE3;&#x7801;">4.2.2 &#x4EE3;&#x7801; <a href="#t334.2.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { }
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {

    }
}
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Factory</span> </span>{
    abstract createCoffee(): Coffee;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AmericanoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AmericanoCoffeeFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Factory</span> </span>{
    createCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AmericanoCoffee(<span class="hljs-string">&apos;&#x7F8E;&#x5F0F;&#x5496;&#x5561;&apos;</span>)
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LatteCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LatteCoffeeFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Factory</span> </span>{
    createCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LatteCoffee(<span class="hljs-string">&apos;&#x62FF;&#x94C1;&#x5496;&#x5561;&apos;</span>)
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CappuccinoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Coffee</span> </span>{
    <span class="hljs-keyword">constructor</span>(public name: string) {
        <span class="hljs-keyword">super</span>(name);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CappuccinoFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Factory</span> </span>{
    createCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> CappuccinoCoffee(<span class="hljs-string">&apos;&#x5361;&#x5E03;&#x5947;&#x8BFA;&apos;</span>)
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Caf</span>&#xE9; </span>{
    <span class="hljs-keyword">static</span> order(name: string) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Americano&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AmericanoCoffeeFactory().createCoffee();
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Latte&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LatteCoffeeFactory().createCoffee();
            <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;Cappuccino&apos;</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> CappuccinoFactory().createCoffee();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Americano&apos;</span>));
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Latte&apos;</span>));
<span class="hljs-built_in">console</span>.log(Caf&#xE9;.order(<span class="hljs-string">&apos;Cappuccino&apos;</span>));
</code></pre>
<h4 id="t344.2.3 &#x5E94;&#x7528;&#x573A;&#x666F;">4.2.3 &#x5E94;&#x7528;&#x573A;&#x666F; <a href="#t344.2.3 &#x5E94;&#x7528;&#x573A;&#x666F;"> # </a></h4>
<h5 id="t354.2.3.1 React">4.2.3.1 React <a href="#t354.2.3.1 React"> # </a></h5>
<ul>
<li><a href="https://github.com/facebook/react/blob/master/packages/react/src/ReactElement.js#L401-L409">createFactory</a></li>
</ul>
<h3 id="t364.3 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;">4.3 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F; <a href="#t364.3 &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;"> # </a></h3>
<ul>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x4E0D;&#x5FC5;&#x6307;&#x5B9A;&#x4EA7;&#x54C1;&#x7684;&#x5177;&#x4F53;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x4E2D;&#x7684;&#x4EA7;&#x54C1;&#x5BF9;&#x8C61;</li>
<li>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x9488;&#x5BF9;&#x7684;&#x662F;&#x540C;&#x4E00;&#x7C7B;&#x6216;&#x540C;&#x7B49;&#x7EA7;&#x4EA7;&#x54C1;,&#x800C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x9488;&#x5BF9;&#x7684;&#x662F;&#x591A;&#x79CD;&#x7C7B;&#x7684;&#x4EA7;&#x54C1;&#x8BBE;&#x8BA1;</li>
<li>&#x7CFB;&#x7EDF;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#xFF0C;&#x6BCF;&#x4E2A;&#x5177;&#x4F53;&#x5DE5;&#x5382;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x540C;&#x4E00;&#x65CF;&#x4F46;&#x5C5E;&#x4E8E;&#x4E0D;&#x540C;&#x4EA7;&#x54C1;&#x7B49;&#x7EA7;(&#x4EA7;&#x54C1;&#x79CD;&#x7C7B;)&#x7684;&#x4EA7;&#x54C1;</li>
<li>&#x4EA7;&#x54C1;&#x65CF;&#x662F;&#x4E00;&#x7EC4;&#x76F8;&#x5173;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x7CFB;&#x7EDF;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6D88;&#x8D39;&#x67D0;&#x4E00;&#x65CF;&#x4EA7;&#x54C1;&#xFF0C;&#x5373;&#x76F8;&#x540C;&#x4EA7;&#x54C1;&#x65CF;&#x7684;&#x4EA7;&#x54C1;&#x662F;&#x4E00;&#x8D77;&#x88AB;&#x4F7F;&#x7528;&#x7684;</li>
<li>&#x5F53;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x65CF;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x5373;&#x53EF;&#xFF0C;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x6E90;&#x4EE3;&#x7801;&#xFF1B;&#x4F46;&#x662F;&#x5982;&#x679C;&#x9700;&#x8981;&#x4EA7;&#x54C1;&#x65CF;&#x4E2D;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x79CD;&#x7C7B;&#x7684;&#x4EA7;&#x54C1;&#x65F6;&#xFF0C;&#x5219;&#x6240;&#x6709;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x90FD;&#x9700;&#x8981;&#x4FEE;&#x6539;</li>
</ul>
<h4 id="t374.3.1  &#x7EC4;&#x6210;&#x89D2;&#x8272;">4.3.1  &#x7EC4;&#x6210;&#x89D2;&#x8272; <a href="#t374.3.1  &#x7EC4;&#x6210;&#x89D2;&#x8272;"> # </a></h4>
<ul>
<li>&#x62BD;&#x8C61;&#x5DE5;&#x5382;: &#x63D0;&#x4F9B;&#x4E86;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x63A5;&#x53E3;,&#x5305;&#x542B;&#x591A;&#x4E2A;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x6CD5;,&#x5373;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x7C7B;&#x4F3C;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x6CD5;</li>
<li>&#x5177;&#x4F53;&#x5DE5;&#x5382;: &#x5B9E;&#x73B0;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;,&#x5B8C;&#x6210;&#x67D0;&#x4E2A;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x7684;&#x521B;&#x5EFA;</li>
<li>&#x62BD;&#x8C61;&#x4EA7;&#x54C1;: &#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x5B9A;&#x4E49;,&#x4E00;&#x822C;&#x6709;&#x591A;&#x5C11;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;,&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x4E2D;&#x5C31;&#x5305;&#x542B;&#x591A;&#x5C11;&#x4E2A;&#x521B;&#x5EFA;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x6CD5;</li>
<li>&#x5177;&#x4F53;&#x4EA7;&#x54C1;: &#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;</li>
</ul>
<h4 id="t384.3.1 &#x7C7B;&#x56FE;">4.3.1 &#x7C7B;&#x56FE; <a href="#t384.3.1 &#x7C7B;&#x56FE;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/abstractfactory3.png" alt="abstractfactory3"></p>
<p><img src="http://img.zhufengpeixun.cn/abstractfactory2.png" alt="abstractfactory2"></p>
<h4 id="t394.3.2 &#x4EE3;&#x7801;">4.3.2 &#x4EE3;&#x7801; <a href="#t394.3.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { };
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AmericanoCoffee</span> </span>{ }
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LatteCoffee</span> </span>{ }
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CappuccinoCoffee</span> </span>{ }

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StarbucksAmericanoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AmericanoCoffee</span> </span>{ }
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StarbucksLatteCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LatteCoffee</span> </span>{ }
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StarbucksCappuccinoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CappuccinoCoffee</span> </span>{ }

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LuckinAmericanoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AmericanoCoffee</span> </span>{ }
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LuckinLatteCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LatteCoffee</span> </span>{ }
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LuckinCappuccinoCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CappuccinoCoffee</span> </span>{ }

abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CafeFactory</span> </span>{
    abstract createAmericanoCoffee(): AmericanoCoffee;
    abstract createLatteCoffee(): LatteCoffee;
    abstract createCappuccinoCoffee(): CappuccinoCoffee;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StarbucksCafeFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CafeFactory</span> </span>{
    createAmericanoCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StarbucksAmericanoCoffee();
    }
    createLatteCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StarbucksLatteCoffee();
    }
    createCappuccinoCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StarbucksCappuccinoCoffee();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LuckinCafeFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CafeFactory</span> </span>{
    createAmericanoCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LuckinAmericanoCoffee();
    }
    createLatteCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LuckinLatteCoffee();
    }
    createCappuccinoCoffee() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LuckinCappuccinoCoffee();
    }
}

<span class="hljs-keyword">let</span> starbucksCafeFactory = <span class="hljs-keyword">new</span> StarbucksCafeFactory();
<span class="hljs-built_in">console</span>.log(starbucksCafeFactory.createAmericanoCoffee());
<span class="hljs-built_in">console</span>.log(starbucksCafeFactory.createCappuccinoCoffee());
<span class="hljs-built_in">console</span>.log(starbucksCafeFactory.createLatteCoffee());

<span class="hljs-keyword">let</span> luckinCafeFactory = <span class="hljs-keyword">new</span> LuckinCafeFactory();
<span class="hljs-built_in">console</span>.log(luckinCafeFactory.createAmericanoCoffee());
<span class="hljs-built_in">console</span>.log(luckinCafeFactory.createCappuccinoCoffee());
<span class="hljs-built_in">console</span>.log(luckinCafeFactory.createLatteCoffee());
</code></pre>
<h2 id="t405.&#x5355;&#x4F8B;&#x6A21;&#x5F0F;">5.&#x5355;&#x4F8B;&#x6A21;&#x5F0F; <a href="#t405.&#x5355;&#x4F8B;&#x6A21;&#x5F0F;"> # </a></h2>
<h4 id="t415.1 &#x7C7B;&#x56FE;">5.1 &#x7C7B;&#x56FE; <a href="#t415.1 &#x7C7B;&#x56FE;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/singleobject.jpg" alt="singleobject"></p>
<h4 id="t425.2 &#x4EE3;&#x7801;">5.2 &#x4EE3;&#x7801; <a href="#t425.2 &#x4EE3;&#x7801;"> # </a></h4>
<h5 id="t435.2.1 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;">5.2.1 &#x5355;&#x4F8B;&#x6A21;&#x5F0F; <a href="#t435.2.1 &#x5355;&#x4F8B;&#x6A21;&#x5F0F;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { };
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span> </span>{
    private <span class="hljs-keyword">static</span> instance: Window;
    private <span class="hljs-keyword">constructor</span>() { }
    <span class="hljs-keyword">static</span> getInstance() {
        <span class="hljs-keyword">if</span> (!Window.instance) {
            Window.instance = <span class="hljs-keyword">new</span> Window();
        }
        <span class="hljs-keyword">return</span> Window.instance;
    }
}
<span class="hljs-comment">//new Window();</span>
<span class="hljs-keyword">var</span> w1 = Window.getInstance();
<span class="hljs-keyword">var</span> w2 = Window.getInstance();
<span class="hljs-built_in">console</span>.log(w1 === w2);
</code></pre>
<h5 id="t445.2.2 ES5&#x5355;&#x4F8B;&#x6A21;&#x5F0F;">5.2.2 ES5&#x5355;&#x4F8B;&#x6A21;&#x5F0F; <a href="#t445.2.2 ES5&#x5355;&#x4F8B;&#x6A21;&#x5F0F;"> # </a></h5>
<pre><code class="lang-js">interface Window {
    <span class="hljs-attr">hello</span>: any
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Window</span>(<span class="hljs-params"></span>) </span>{ }
Window.prototype.hello = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;hello&apos;</span>);
}
Window.getInstance = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span>: Window;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>)
            <span class="hljs-built_in">window</span> = <span class="hljs-keyword">new</span> (Window <span class="hljs-keyword">as</span> any)();
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>;
    }
})();
<span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span> = Window.getInstance();
<span class="hljs-built_in">window</span>.hello();
</code></pre>
<h5 id="t455.2.3 &#x900F;&#x660E;&#x5355;&#x4F8B;">5.2.3 &#x900F;&#x660E;&#x5355;&#x4F8B; <a href="#t455.2.3 &#x900F;&#x660E;&#x5355;&#x4F8B;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> Window = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span>: Window;
    <span class="hljs-keyword">let</span> Window = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">this: Window</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> (<span class="hljs-built_in">window</span> = <span class="hljs-keyword">this</span>);
        }
    }
    Window.prototype.hello = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;hello&apos;</span>);
    }
    <span class="hljs-keyword">return</span> Window;
})();

<span class="hljs-keyword">let</span> window1 = <span class="hljs-keyword">new</span> (Window <span class="hljs-keyword">as</span> any)();
<span class="hljs-keyword">let</span> window2 = <span class="hljs-keyword">new</span> (Window <span class="hljs-keyword">as</span> any)();
window1.hello();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h5 id="t465.2.4 &#x5355;&#x4F8B;&#x4E0E;&#x6784;&#x5EFA;&#x5206;&#x79BB;">5.2.4 &#x5355;&#x4F8B;&#x4E0E;&#x6784;&#x5EFA;&#x5206;&#x79BB; <a href="#t465.2.4 &#x5355;&#x4F8B;&#x4E0E;&#x6784;&#x5EFA;&#x5206;&#x79BB;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { }
interface Window {
    <span class="hljs-attr">hello</span>: any
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Window</span>(<span class="hljs-params"></span>) </span>{
}
Window.prototype.hello = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;hello&apos;</span>);
}

<span class="hljs-keyword">let</span> createInstance = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> instance: Window;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!instance) {
            instance = <span class="hljs-keyword">new</span> (Window <span class="hljs-keyword">as</span> any)();
        }
        <span class="hljs-keyword">return</span> instance;
    }
})();

<span class="hljs-keyword">let</span> window1 = createInstance();
<span class="hljs-keyword">let</span> window2 = createInstance();
window1.hello();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h5 id="t475.2.5 &#x5C01;&#x88C5;&#x53D8;&#x5316;">5.2.5 &#x5C01;&#x88C5;&#x53D8;&#x5316; <a href="#t475.2.5 &#x5C01;&#x88C5;&#x53D8;&#x5316;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { }
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Window</span>(<span class="hljs-params"></span>) </span>{

}
Window.prototype.hello = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;hello&apos;</span>);
}

<span class="hljs-keyword">let</span> createInstance = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Constructor: any</span>) </span>{
    <span class="hljs-keyword">let</span> instance: any;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">this: any</span>) </span>{
        <span class="hljs-keyword">if</span> (!instance) {
            Constructor.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
            <span class="hljs-built_in">Object</span>.setPrototypeOf(<span class="hljs-keyword">this</span>, Constructor.prototype)
            instance = <span class="hljs-keyword">this</span>;
        }
        <span class="hljs-keyword">return</span> instance;
    }
};
<span class="hljs-keyword">let</span> CreateWindow: any = createInstance(Window);
<span class="hljs-keyword">let</span> window1 = <span class="hljs-keyword">new</span> CreateWindow();
<span class="hljs-keyword">let</span> window2 = <span class="hljs-keyword">new</span> CreateWindow();
window1.hello();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h4 id="t485.3 &#x573A;&#x666F;">5.3 &#x573A;&#x666F; <a href="#t485.3 &#x573A;&#x666F;"> # </a></h4>
<h5 id="t495.3.2 commonjs">5.3.2 commonjs <a href="#t495.3.2 commonjs"> # </a></h5>
<ul>
<li><a href="https://github.com/webpack/webpack/blob/8070bcd333cd1d07ce13fe5e91530c80779d51c6/lib/hmr/HotModuleReplacement.runtime.js#L55">HotModuleReplacement</a></li>
</ul>
<pre><code class="lang-js">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modules</span>) </span>{
  <span class="hljs-comment">// webpack&#x7684;&#x542F;&#x52A8;&#x51FD;&#x6570;</span>
  <span class="hljs-comment">//&#x6A21;&#x5757;&#x7684;&#x7F13;&#x5B58;</span>
  <span class="hljs-keyword">var</span> installedModules = {};
  <span class="hljs-comment">//&#x5B9A;&#x4E49;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;&#x7684;require&#x65B9;&#x6CD5;</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__webpack_require__</span>(<span class="hljs-params">moduleId</span>) </span>{
    <span class="hljs-comment">//&#x68C0;&#x67E5;&#x6A21;&#x5757;&#x662F;&#x5426;&#x5728;&#x7F13;&#x5B58;&#x4E2D;</span>
    <span class="hljs-keyword">if</span> (installedModules[moduleId]) {
      <span class="hljs-keyword">return</span> installedModules[moduleId].exports;
    }
    <span class="hljs-comment">//&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6A21;&#x5757;&#x5E76;&#x4E14;&#x653E;&#x5230;&#x6A21;&#x5757;&#x7684;&#x7F13;&#x5B58;&#x4E2D;</span>
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = (installedModules[moduleId] = {
      <span class="hljs-attr">i</span>: moduleId,
      <span class="hljs-attr">l</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">exports</span>: {}
    });

    <span class="hljs-comment">//&#x6267;&#x884C;&#x6A21;&#x5757;&#x51FD;&#x6570;</span>
    modules[moduleId].call(
      <span class="hljs-built_in">module</span>.exports,
      <span class="hljs-built_in">module</span>,
      <span class="hljs-built_in">module</span>.exports,
      __webpack_require__
    );

    <span class="hljs-comment">//&#x628A;&#x6A21;&#x5757;&#x8BBE;&#x7F6E;&#x4E3A;&#x5DF2;&#x7ECF;&#x52A0;&#x8F7D;</span>
    <span class="hljs-built_in">module</span>.l = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">//&#x8FD4;&#x56DE;&#x6A21;&#x5757;&#x7684;&#x5BFC;&#x51FA;&#x5BF9;&#x8C61;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
  }
}
</code></pre>
<h5 id="t505.3.2 jQuery">5.3.2 jQuery <a href="#t505.3.2 jQuery"> # </a></h5>
<ul>
<li><a href="https://code.jquery.com/jquery-3.4.1.js">jquery</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.jQuery!=<span class="hljs-literal">null</span>){
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.jQuery;
}<span class="hljs-keyword">else</span>{
    <span class="hljs-comment">//init~~~~~~~</span>
}
</code></pre>
<h5 id="t515.3.3 &#x6A21;&#x6001;&#x7A97;&#x53E3;">5.3.3 &#x6A21;&#x6001;&#x7A97;&#x53E3; <a href="#t515.3.3 &#x6A21;&#x6001;&#x7A97;&#x53E3;"> # </a></h5>
<ul>
<li><a href="https://github.com/twbs/bootstrap/blob/master/js/src/modal.js">bootstrap modal.js</a></li>
</ul>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button id=&quot;show-button&quot;&gt;&#x663E;&#x793A;&#x6A21;&#x6001;&#x7A97;&#x53E3;&lt;/button&gt;
    &lt;button id=&quot;hide-button&quot;&gt;&#x9690;&#x85CF;&#x6A21;&#x6001;&#x7A97;&#x53E3;&lt;/button&gt;
    &lt;script&gt;
        class Login {
            constructor() {
                this.element = document.createElement(&apos;div&apos;);
                this.element.innerHTML = (
                    `
            &#x7528;&#x6237;&#x540D; &lt;input type=&quot;text&quot;/&gt;
            &lt;button&gt;&#x767B;&#x5F55;&lt;/button&gt;
            `
                );
                this.element.style.cssText = &apos;width: 100px; height: 100px; position: absolute; left: 50%; top: 50%; display: block;&apos;;
                document.body.appendChild(this.element);
            }
            show() {
                this.element.style.display = &apos;block&apos;;
            }
            hide() {
                this.element.style.display = &apos;none&apos;;
            }
        }
        Login.getInstance = (function () {
            let instance;
            return function () {
                if (!instance) {
                    instance = new Login();
                }
                return instance;
            }
        })();

        document.getElementById(&apos;show-button&apos;).addEventListener(&apos;click&apos;, function (event) {
            Login.getInstance().show();
        });
        document.getElementById(&apos;hide-button&apos;).addEventListener(&apos;click&apos;, function (event) {
            Login.getInstance().hide();
        });
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<h5 id="t525.3.4 store">5.3.4 store <a href="#t525.3.4 store"> # </a></h5>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/master/src/createStore.ts">createStore.ts</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStore</span>(<span class="hljs-params">reducer: any</span>) </span>{
    <span class="hljs-keyword">let</span> state: any;
    <span class="hljs-keyword">let</span> listeners: any[] = [];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getState</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> state;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dispatch</span>(<span class="hljs-params">action: any</span>) </span>{
        state = reducer(state, action);
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l());
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscribe</span>(<span class="hljs-params">listener: any</span>) </span>{
        listeners.push(listener);
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            listeners = listeners.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item != listener);
            <span class="hljs-built_in">console</span>.log(listeners);
        }
    }
    dispatch({});
    <span class="hljs-keyword">return</span> {
        getState,
        dispatch,
        subscribe
    }
}
<span class="hljs-keyword">let</span> store = createStore(<span class="hljs-function">(<span class="hljs-params">state: any, action: any</span>) =&gt;</span> state);
</code></pre>
<h5 id="t535.3.5 &#x7F13;&#x5B58;">5.3.5 &#x7F13;&#x5B58; <a href="#t535.3.5 &#x7F13;&#x5B58;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">let</span> cache: Record&lt;any, any&gt; = {};
<span class="hljs-keyword">let</span> app = express();
app.get(<span class="hljs-string">&apos;/user/:id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req: any, res: any</span>) </span>{
    <span class="hljs-keyword">let</span> id = req.params.id;
    <span class="hljs-keyword">let</span> user = cache.get(id);
    <span class="hljs-keyword">if</span> (user) {
        res.json(user);
    } <span class="hljs-keyword">else</span> {
        fs.readFile(<span class="hljs-string">`./users/<span class="hljs-subst">${id}</span>.json`</span>, <span class="hljs-string">&apos;utf8&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err: any, data: any</span>) </span>{
            <span class="hljs-keyword">let</span> user = <span class="hljs-built_in">JSON</span>.parse(data);
            cache.put(id, user);
            res.json(user);
        });
    }
});
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h2 id="t546. &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;">6. &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F; <a href="#t546. &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x53C8;&#x79F0;&#x5305;&#x88C5;&#x5668;&#x6A21;&#x5F0F;,&#x5C06;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x8F6C;&#x5316;&#x4E3A;&#x7528;&#x6237;&#x9700;&#x8981;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;,&#x89E3;&#x51B3;&#x7C7B;(&#x5BF9;&#x8C61;)&#x4E4B;&#x95F4;&#x63A5;&#x53E3;&#x4E0D;&#x517C;&#x5BB9;&#x7684;&#x95EE;&#x9898;</li>
<li>&#x65E7;&#x7684;&#x63A5;&#x53E3;&#x548C;&#x4F7F;&#x7528;&#x8005;&#x4E0D;&#x517C;&#x5BB9;</li>
<li>&#x4E2D;&#x95F4;&#x52A0;&#x4E00;&#x4E2A;&#x9002;&#x914D;&#x5668;&#x8F6C;&#x6362;&#x63A5;&#x53E3;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/myadapor.jpg" alt="myadapor"></p>
<h4 id="t556.1 &#x7C7B;&#x56FE;">6.1 &#x7C7B;&#x56FE; <a href="#t556.1 &#x7C7B;&#x56FE;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/poweradaptor4.png" alt="poweradaptor4"></p>
<p><img src="http://img.zhufengpeixun.cn/myadapters.png" alt="myadapters"></p>
<h4 id="t566.2 &#x4EE3;&#x7801;">6.2 &#x4EE3;&#x7801; <a href="#t566.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Socket</span> </span>{
    output() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&#x8F93;&#x51FA;220V&apos;</span>;
    }
}

abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Power</span> </span>{
    abstract charge(): string;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PowerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Power</span> </span>{
    <span class="hljs-keyword">constructor</span>(public socket: Socket) {
        <span class="hljs-keyword">super</span>();
    }
    <span class="hljs-comment">//&#x8F6C;&#x6362;&#x540E;&#x7684;&#x63A5;&#x53E3;&#x548C;&#x8F6C;&#x6362;&#x524D;&#x4E0D;&#x4E00;&#x6837;</span>
    charge() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.socket.output() + <span class="hljs-string">&apos; &#x7ECF;&#x8FC7;&#x8F6C;&#x6362; &#x8F93;&#x51FA;24V&apos;</span>;
    }
}
<span class="hljs-keyword">let</span> powerAdapter = <span class="hljs-keyword">new</span> PowerAdapter(<span class="hljs-keyword">new</span> Socket());
<span class="hljs-built_in">console</span>.log(powerAdapter.charge());
</code></pre>
<h4 id="t576.3 &#x573A;&#x666F;">6.3 &#x573A;&#x666F; <a href="#t576.3 &#x573A;&#x666F;"> # </a></h4>
<h5 id="t586.2.1 axios">6.2.1 axios <a href="#t586.2.1 axios"> # </a></h5>
<ul>
<li><a href="https://github.com/axios/axios/blob/master/lib/core/Axios.js#L6">Axios</a></li>
<li><a href="https://github.com/axios/axios/blob/master/lib/core/dispatchRequest.js#L50-L79">dispatchRequest</a></li>
<li><a href="https://github.com/axios/axios/blob/master/lib/defaults.js#L16-L26">defaults</a></li>
<li><a href="https://github.com/axios/axios/blob/dc4bc49673943e35280e5df831f5c3d0347a9393/lib/adapters/xhr.js">xhr</a></li>
<li><a href="https://github.com/axios/axios/blob/dc4bc49673943e35280e5df831f5c3d0347a9393/lib/adapters/http.js">http</a></li>
<li>&#x9002;&#x914D;&#x5668;&#x7684;&#x5165;&#x53C2;&#x90FD;&#x662F;<code>config</code>,&#x8FD4;&#x56DE;&#x7684;&#x90FD;&#x662F;<code>promise</code></li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">//let axios = require(&apos;axios&apos;);</span>
<span class="hljs-keyword">let</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;url&apos;</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">axios</span>(<span class="hljs-params">config: any</span>): <span class="hljs-title">any</span> </span>{
    <span class="hljs-keyword">let</span> adaptor = getDefaultAdapter();
    <span class="hljs-keyword">return</span> adaptor(config);
}
axios({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://localhost:8080/api/user?id=1&apos;</span>
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response: any</span>) </span>{
    <span class="hljs-built_in">console</span>.log(response);
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error: any</span>) </span>{
    <span class="hljs-built_in">console</span>.log(error);
})

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xhr</span>(<span class="hljs-params">config: any</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
        <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();
        request.open(config.method, config.url, <span class="hljs-literal">true</span>);
        request.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (request.readyState == <span class="hljs-number">4</span>) {
                <span class="hljs-keyword">if</span> (request.status == <span class="hljs-number">200</span>) {
                    resolve(request.response);
                } <span class="hljs-keyword">else</span> {
                    reject(<span class="hljs-string">&apos;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&apos;</span>);
                }
            }
        }
    })
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">http</span>(<span class="hljs-params">config: any</span>) </span>{
    <span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;http&apos;</span>);
    <span class="hljs-keyword">let</span> urlObject = url.parse(config.url);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
        <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">hostname</span>: urlObject.hostname,
            <span class="hljs-attr">port</span>: urlObject.port,
            <span class="hljs-attr">path</span>: urlObject.pathname,
            <span class="hljs-attr">method</span>: config.method
        };
        <span class="hljs-keyword">var</span> req = http.request(options, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res: any</span>) </span>{
            <span class="hljs-keyword">let</span> chunks: any[] = [];
            res.on(<span class="hljs-string">&apos;data&apos;</span>, (chunk: any) =&gt; {
                chunks.push(chunk);
            });
            res.on(<span class="hljs-string">&apos;end&apos;</span>, () =&gt; {
                resolve(Buffer.concat(chunks).toString());
            });
        });
        req.on(<span class="hljs-string">&apos;error&apos;</span>, (err: any) =&gt; {
            reject(err);
        });
        req.end();
    })
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefaultAdapter</span>(<span class="hljs-params"></span>): <span class="hljs-title">any</span> </span>{
    <span class="hljs-keyword">var</span> adapter;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> XMLHttpRequest !== <span class="hljs-string">&apos;undefined&apos;</span>) {
        adapter = xhr;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">&apos;undefined&apos;</span>) {
        adapter = http;
    }
    <span class="hljs-keyword">return</span> adapter;
}
</code></pre>
<p>server.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> app = express();
app.get(<span class="hljs-string">&apos;/api/user&apos;</span>, (req, res) =&gt; {
    res.json({ <span class="hljs-attr">id</span>: req.query.id, <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;zhufeng&apos;</span> });
});
app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<h5 id="t596.2.2 toAxiosAdapter">6.2.2 toAxiosAdapter <a href="#t596.2.2 toAxiosAdapter"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toAxiosAdapter</span>(<span class="hljs-params">options: any</span>) </span>{
    <span class="hljs-keyword">return</span> axios({
        <span class="hljs-attr">url</span>: options.url,
        <span class="hljs-attr">method</span>: options.type
    }).then(options.success)
        .catch(options.error)
}


$.ajax = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">options: any</span>) </span>{
    <span class="hljs-keyword">return</span> toAxiosAdapter(options)
}

$.ajax({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;/api/user&apos;</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;GET&apos;</span>,
    <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data: any</span>) </span>{
        <span class="hljs-built_in">console</span>.log(data)
    },
    <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err: any</span>) </span>{
        <span class="hljs-built_in">console</span>.error(err);
    }
})
</code></pre>
<h5 id="t606.2.3 promisify">6.2.3 promisify <a href="#t606.2.3 promisify"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">var</span> Bluebird = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;bluebird&quot;</span>);
<span class="hljs-keyword">let</span> readFile = Bluebird.promisify(fs.readFile);

(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> content = <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">&apos;./1.txt&apos;</span>, <span class="hljs-string">&apos;utf8&apos;</span>);
    <span class="hljs-built_in">console</span>.log(content);
})()
</code></pre>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">readFile: any</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">filename: any, encoding: any</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
            readFile(filename, encoding, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err: any, data: any</span>) </span>{
                <span class="hljs-keyword">if</span> (err)
                    reject(err);
                <span class="hljs-keyword">else</span>
                    resolve(data);
            })
        });
    }
}
</code></pre>
<h5 id="t616.2.4 computed">6.2.4 computed <a href="#t616.2.4 computed"> # </a></h5>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;script src=&quot;https://cdn.bootcss.com/vue/2.5.17/vue.js&quot;&gt;&lt;/script&gt;
    &lt;title&gt;vue&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;root&quot;&gt;
&lt;p&gt;{{name}}&lt;/p&gt;
&lt;p&gt;{{upperName}}&lt;/p&gt;
&lt;/div&gt;    
&lt;script&gt;
let vm=new Vue({
    el: &apos;#root&apos;,
    data: {
        name:&apos;zfpx&apos;
    },
    computed: {
        upperName() {
            return this.name.toUpperCase();
        }
    }
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h5 id="t626.2.5 tree">6.2.5 tree <a href="#t626.2.5 tree"> # </a></h5>
<ul>
<li>&#x6811;&#x578B;&#x7ED3;&#x6784;&#x6570;&#x636E;&#x5728;&#x4E0B;&#x62C9;&#x6846;&#x4E2D;&#x663E;&#x793A;</li>
</ul>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;select id=&quot;users&quot;&gt;&lt;/select&gt;
    &lt;script&gt;
        let tree = [{
            name: &apos;&#x7236;&#x4EB2;&apos;,
            key: &apos;1&apos;,
            children: [
                {
                    name: &apos;&#x513F;&#x5B50;&apos;,
                    key: &apos;1-1&apos;,
                    children: [
                        {
                            name: &apos;&#x5B59;&#x5B50;&apos;,
                            key: &apos;1-1-1&apos;
                        }
                    ]
                }
            ]
        }]
        function flattenAdapter(tree, flattenArray) {
            tree.forEach((item) =&gt; {
                if (item.children) {
                    flattenAdapter(item.children, flattenArray)
                }
                flattenArray.push({ name: item.name, key: item.key })
            })
            return flattenArray
        }
        let array = [];
        flattenAdapter(tree, array);
        array.reverse();
        let users = document.getElementById(&apos;users&apos;);
        let options = array.map(item =&gt; `&lt;option value=&quot;${item.key}&quot;&gt;${item.name}&lt;/option&gt;`).join(&apos;&apos;);
        users.innerHTML = options;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h5 id="t636.2.6 Sequelize">6.2.6 Sequelize <a href="#t636.2.6 Sequelize"> # </a></h5>
<ul>
<li><a href="https://github.com/demopark/sequelize-docs-Zh-CN/tree/master">sequelize</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">//cnpm i sequelize sqlite3 -S</span>
<span class="hljs-keyword">const</span> { Sequelize, Model, DataTypes } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;sequelize&apos;</span>);
<span class="hljs-keyword">const</span> sequelize = <span class="hljs-keyword">new</span> Sequelize(<span class="hljs-string">&apos;sqlite::memory:&apos;</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{ }
User.init({
    <span class="hljs-attr">username</span>: DataTypes.STRING
}, { sequelize, <span class="hljs-attr">modelName</span>: <span class="hljs-string">&apos;user&apos;</span> });

sequelize.sync()
    .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> User.create({
        <span class="hljs-attr">username</span>: <span class="hljs-string">&apos;zhufeng&apos;</span>
    }))
    .then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(result.toJSON());
    });
</code></pre>
<h2 id="t647.&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;">7.&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F; <a href="#t647.&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x5176;&#x539F;&#x6709;&#x7684;&#x7ED3;&#x6784;&#x548C;&#x529F;&#x80FD;&#x4E3A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x65B0;&#x529F;&#x80FD;&#x7684;&#x6A21;&#x5F0F;&#x5176;&#x5B9E;&#x5C31;&#x53EB;&#x505A;&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;</li>
<li>&#x6700;&#x76F4;&#x89C2;&#x5730;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4E70;&#x623F;&#x540E;&#x7684;&#x88C5;&#x4FEE;</li>
<li>&#x88C5;&#x9970;&#x6BD4;&#x7EE7;&#x627F;&#x66F4;&#x52A0;&#x7075;&#x6D3B;,&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x88C5;&#x9970;&#x8005;&#x548C;&#x88AB;&#x88C5;&#x9970;&#x8005;&#x4E4B;&#x95F4;&#x677E;&#x8026;&#x5408;</li>
<li>&#x88AB;&#x88C5;&#x9970;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x88C5;&#x9970;&#x8005;&#x52A8;&#x6001;&#x5730;&#x589E;&#x52A0;&#x548C;&#x64A4;&#x9500;&#x529F;&#x80FD;</li>
</ul>
<h4 id="t657.1 &#x7C7B;&#x56FE;">7.1 &#x7C7B;&#x56FE; <a href="#t657.1 &#x7C7B;&#x56FE;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/shapedecorator.png" alt="shapedecorator"></p>
<h4 id="t667.2 &#x4EE3;&#x7801;">7.2 &#x4EE3;&#x7801; <a href="#t667.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js">
abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{
    abstract draw(): <span class="hljs-keyword">void</span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    draw() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x7ED8;&#x5236;&#x5706;&#x5F62;&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    draw() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x7ED8;&#x5236;&#x77E9;&#x5F62;&apos;</span>);
    }
}

abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ColorfulShape</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    public <span class="hljs-keyword">constructor</span>(public shape: Shape) {
        <span class="hljs-keyword">super</span>();
    }
    abstract draw(): <span class="hljs-keyword">void</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedColorfulShape</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ColorfulShape</span> </span>{
    draw() {
        <span class="hljs-keyword">this</span>.shape.draw();
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x628A;&#x8FB9;&#x6846;&#x6D82;&#x6210;&#x7EA2;&#x8272;&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GreenColorfulShape</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ColorfulShape</span> </span>{
    draw() {
        <span class="hljs-keyword">this</span>.shape.draw();
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x628A;&#x8FB9;&#x6846;&#x6D82;&#x6210;&#x7EFF;&#x8272;&apos;</span>);
    }
}

<span class="hljs-keyword">let</span> circle = <span class="hljs-keyword">new</span> Circle();
<span class="hljs-keyword">let</span> redColorfulShape = <span class="hljs-keyword">new</span> RedColorfulShape(circle);
redColorfulShape.draw();

<span class="hljs-keyword">let</span> rectangle = <span class="hljs-keyword">new</span> Rectangle();
<span class="hljs-keyword">let</span> greenColorfulShape = <span class="hljs-keyword">new</span> GreenColorfulShape(rectangle);
greenColorfulShape.draw();
</code></pre>
<h4 id="t677.3 &#x5E94;&#x7528;&#x573A;&#x666F;">7.3 &#x5E94;&#x7528;&#x573A;&#x666F; <a href="#t677.3 &#x5E94;&#x7528;&#x573A;&#x666F;"> # </a></h4>
<h5 id="t687.3.1  &#x88C5;&#x9970;&#x5668;">7.3.1  &#x88C5;&#x9970;&#x5668; <a href="#t687.3.1  &#x88C5;&#x9970;&#x5668;"> # </a></h5>
<ul>
<li>&#x88C5;&#x9970;&#x5668;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x58F0;&#x660E;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x88AB;&#x9644;&#x52A0;&#x5230;&#x7C7B;&#x58F0;&#x660E;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x5C5E;&#x6027;&#x6216;&#x53C2;&#x6570;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x7C7B;&#x7684;&#x884C;&#x4E3A;</li>
<li>&#x5E38;&#x89C1;&#x7684;&#x88C5;&#x9970;&#x5668;&#x6709;&#x7C7B;&#x88C5;&#x9970;&#x5668;&#x3001;&#x5C5E;&#x6027;&#x88C5;&#x9970;&#x5668;&#x3001;&#x65B9;&#x6CD5;&#x88C5;&#x9970;&#x5668;&#x548C;&#x53C2;&#x6570;&#x88C5;&#x9970;&#x5668;</li>
<li>&#x88C5;&#x9970;&#x5668;&#x7684;&#x5199;&#x6CD5;&#x5206;&#x4E3A;&#x666E;&#x901A;&#x88C5;&#x9970;&#x5668;&#x548C;&#x88C5;&#x9970;&#x5668;&#x5DE5;&#x5382;</li>
</ul>
<h6 id="t697.3.1.1 &#x7C7B;&#x88C5;&#x9970;&#x5668;">7.3.1.1 &#x7C7B;&#x88C5;&#x9970;&#x5668; <a href="#t697.3.1.1 &#x7C7B;&#x88C5;&#x9970;&#x5668;"> # </a></h6>
<ul>
<li>&#x7C7B;&#x88C5;&#x9970;&#x5668;&#x5728;&#x7C7B;&#x58F0;&#x660E;&#x4E4B;&#x524D;&#x58F0;&#x660E;&#xFF0C;&#x7528;&#x6765;&#x76D1;&#x63A7;&#x3001;&#x4FEE;&#x6539;&#x6216;&#x66FF;&#x6362;&#x7C7B;&#x5B9A;&#x4E49;</li>
<li>&#x53C2;&#x6570;&#x662F;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#x6216;&#x8005;&#x8BF4;&#x6784;&#x9020;&#x51FD;&#x6570;</li>
<li><a href="https://babeljs.io/docs/en/babel-plugin-proposal-decorators">babel-plugin-proposal-decorators</a></li>
</ul>
<p>decorator</p>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { }
namespace decorator {
    interface Animal {
        <span class="hljs-attr">swings</span>: string;
        fly: any
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flyable</span>(<span class="hljs-params">target: any</span>) </span>{
        <span class="hljs-built_in">console</span>.log(target);

        target.prototype.swings = <span class="hljs-number">2</span>;
        target.prototype.fly = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;I can fly&apos;</span>);
        }
    }
    @flyable
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
        <span class="hljs-keyword">constructor</span>() { }
    }
    <span class="hljs-keyword">let</span> animal: Animal = <span class="hljs-keyword">new</span> Animal();
    <span class="hljs-built_in">console</span>.log(animal.swings);
    animal.fly();
}
</code></pre>
<p>decorator_factory</p>
<pre><code class="lang-js">namespace decorator_factory {
    interface Animal {
        <span class="hljs-attr">swings</span>: string;
        fly: any
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flyable</span>(<span class="hljs-params">swings: number</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flyable</span>(<span class="hljs-params">target: any</span>) </span>{
            <span class="hljs-built_in">console</span>.log(target);

            target.prototype.swings = swings;
            target.prototype.fly = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;I can fly&apos;</span>);
            }
        }
    }

    @flyable(<span class="hljs-number">2</span>)
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
        <span class="hljs-keyword">constructor</span>() { }
    }
    <span class="hljs-keyword">let</span> animal: Animal = <span class="hljs-keyword">new</span> Animal();
    <span class="hljs-built_in">console</span>.log(animal.swings);
    animal.fly();
}
</code></pre>
<h6 id="t707.3.1.2  &#x5C5E;&#x6027;&#x88C5;&#x9970;&#x5668;">7.3.1.2  &#x5C5E;&#x6027;&#x88C5;&#x9970;&#x5668; <a href="#t707.3.1.2  &#x5C5E;&#x6027;&#x88C5;&#x9970;&#x5668;"> # </a></h6>
<ul>
<li>&#x5C5E;&#x6027;&#x88C5;&#x9970;&#x5668;&#x8868;&#x8FBE;&#x5F0F;&#x4F1A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5F53;&#x4F5C;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;</li>
<li>&#x5C5E;&#x6027;&#x5206;&#x4E3A;&#x5B9E;&#x4F8B;&#x5C5E;&#x6027;&#x548C;&#x7C7B;&#x5C5E;&#x6027;</li>
<li>&#x65B9;&#x6CD5;&#x5206;&#x4E3A;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x548C;&#x7C7B;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code class="lang-js">namespace property_namespace {
    <span class="hljs-comment">//&#x5B9E;&#x4F8B;&#x5C5E;&#x6027;target&#x662F;&#x7C7B;&#x7684;&#x539F;&#x578B;&#x5BF9;&#x8C61;,key&#x662F;&#x5C5E;&#x6027;&#x540D;&#x79F0;</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">instancePropertyDecorator</span>(<span class="hljs-params">target: any, key: string</span>) </span>{
    }
    <span class="hljs-comment">//&#x7C7B;&#x5C5E;&#x6027;target&#x662F;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">classPropertyDecorator</span>(<span class="hljs-params">target: any, key: string</span>) </span>{
    }
    <span class="hljs-comment">//&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x88C5;&#x9970;&#x5668;target&#x662F;&#x539F;&#x578B;&#x5BF9;&#x8C61;,key&#x65B9;&#x6CD5;&#x540D;,descriptor&#x662F;&#x65B9;&#x6CD5;&#x63CF;&#x8FF0;&#x7B26;</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">instanceMethodDecorator</span>(<span class="hljs-params">target: any, key: string, descriptor: PropertyDescriptor</span>) </span>{
    }
    <span class="hljs-comment">//&#x7C7B;&#x65B9;&#x6CD5;&#x88C5;&#x9970;&#x5668;target&#x662F;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">classMethodDecorator</span>(<span class="hljs-params">target: any, key: string, descriptor: PropertyDescriptor</span>) </span>{
    }
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
        @instancePropertyDecorator
        instanceProperty: string;
        @classPropertyDecorator
        public <span class="hljs-keyword">static</span> classProperty: string;
        @instanceMethodDecorator
        instanceMethod() {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;instanceMethod&apos;</span>);
        }
        @classMethodDecorator
        classMethod() {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;classMethod&apos;</span>);
        }
    }
}
</code></pre>
<h6 id="t717.3.1.3 core-decorator">7.3.1.3 core-decorator <a href="#t717.3.1.3 core-decorator"> # </a></h6>
<ul>
<li><a href="https://github.com/jayphelps/core-decorators">core-decorator</a></li>
<li><a href="https://github.com/jayphelps/core-decorators#deprecate-alias-deprecated">deprecate-alias-deprecated</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> { readonly } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;core-decorators&apos;</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">msg: string, options: any</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target: any, attr: any, descriptor: any</span>) </span>{
        <span class="hljs-comment">//DEPRECATION Calculator#add: This function will be removed in future versions.</span>
        <span class="hljs-keyword">let</span> oldVal = descriptor.value;
        descriptor.value = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args: any[]</span>) </span>{
            <span class="hljs-keyword">let</span> message = msg ? msg : <span class="hljs-string">`DEPRECATION <span class="hljs-subst">${target.constructor.name}</span>#<span class="hljs-subst">${attr}</span>: This function will be removed in future versions.`</span>;
            <span class="hljs-keyword">let</span> see = options &amp;&amp; options.url ? <span class="hljs-string">`see <span class="hljs-subst">${options.url}</span>`</span> : <span class="hljs-string">``</span>;
            <span class="hljs-built_in">console</span>.warn(message + <span class="hljs-string">&apos;\r\n&apos;</span> + see);
            <span class="hljs-keyword">return</span> oldVal(...args);
        }
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> </span>{
    @deprecate(<span class="hljs-string">&apos;stop using this&apos;</span>, { <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://www.baidu.com&apos;</span> })
    add(a: number, <span class="hljs-attr">b</span>: number) {
        <span class="hljs-keyword">return</span> a + b;
    }
}
<span class="hljs-keyword">let</span> calculator = <span class="hljs-keyword">new</span> Calculator();
calculator.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>
<h5 id="t727.3.2  AOP&#x6982;&#x5FF5;">7.3.2  AOP&#x6982;&#x5FF5; <a href="#t727.3.2  AOP&#x6982;&#x5FF5;"> # </a></h5>
<ul>
<li>&#x5728;&#x8F6F;&#x4EF6;&#x4E1A;&#xFF0C;AOP&#x4E3A;<code>Aspect Oriented Programming</code>&#x7684;&#x7F29;&#x5199;,&#x610F;&#x4E3A;&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;</li>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9884;&#x7F16;&#x8BD1;&#x65B9;&#x5F0F;&#x548C;&#x8FD0;&#x884C;&#x671F;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7ED9;&#x7A0B;&#x5E8F;&#x52A8;&#x6001;&#x7EDF;&#x4E00;&#x6DFB;&#x52A0;&#x529F;&#x80FD;&#x7684;&#x4E00;&#x79CD;&#x6280;&#x672F;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/springaop2.jpeg" alt="springaop"></p>
<p><img src="http://img.zhufengpeixun.cn/apoprogram.jpg" alt="apoprogram"></p>
<h5 id="t737.3.3 &#x57CB;&#x70B9;">7.3.3 &#x57CB;&#x70B9; <a href="#t737.3.3 &#x57CB;&#x70B9;"> # </a></h5>
<ul>
<li>&#x57CB;&#x70B9;&#x5206;&#x6790;: &#x662F;&#x7F51;&#x7AD9;&#x5206;&#x6790;&#x7684;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x65B9;&#x6CD5;</li>
<li>&#x65E0;&#x75D5;&#x57CB;&#x70B9;: &#x901A;&#x8FC7;&#x6280;&#x672F;&#x624B;&#x6BB5;&#xFF0C;&#x5B8C;&#x6210;&#x5BF9;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x6570;&#x636E;&#x65E0;&#x5DEE;&#x522B;&#x7684;&#x7EDF;&#x8BA1;&#x4E0A;&#x4F20;&#x7684;&#x5DE5;&#x4F5C;,&#x540E;&#x671F;&#x6570;&#x636E;&#x5206;&#x6790;&#x5904;&#x7406;&#x7684;&#x65F6;&#x5019;&#x901A;&#x8FC7;&#x6280;&#x672F;&#x624B;&#x6BB5;&#x7B5B;&#x9009;&#x51FA;&#x5408;&#x9002;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#x5206;&#x6790;</li>
</ul>
<h6 id="t747.3.3.1 &#x9879;&#x76EE;&#x914D;&#x7F6E;">7.3.3.1 &#x9879;&#x76EE;&#x914D;&#x7F6E; <a href="#t747.3.3.1 &#x9879;&#x76EE;&#x914D;&#x7F6E;"> # </a></h6>
<ol>
<li>&#x521B;&#x5EFA;&#x9879;&#x76EE;</li>
</ol>
<pre><code class="lang-js">create-react-app zhufeng_tract
yarn add customize-cra react-app-rewired --dev
</code></pre>
<ol start="2">
<li><p>config-overrides.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> {
 override,
 addDecoratorsLegacy,
} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;customize-cra&quot;</span>);
<span class="hljs-built_in">module</span>.exports = override(
 addDecoratorsLegacy(),
);
</code></pre>
</li>
<li><p>jsconfig.json</p>
<pre><code class="lang-js">{
 <span class="hljs-string">&quot;compilerOptions&quot;</span>: {
     <span class="hljs-string">&quot;experimentalDecorators&quot;</span>: <span class="hljs-literal">true</span>
 }
}
</code></pre>
</li>
</ol>
<h6 id="t757.3.3.2 index.js">7.3.3.2 index.js <a href="#t757.3.3.2 index.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;
<span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>;
<span class="hljs-keyword">import</span> { before, after } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./track&apos;</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    @before(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x70B9;&#x51FB;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x524D;&apos;</span>))
    onClickBeforeButton() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;beforeClick&apos;</span>);
    }

    @after(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x70B9;&#x51FB;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x540E;&apos;</span>))
    onClickAfterButton() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;afterClick&apos;</span>);
    }

    @after(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetch(<span class="hljs-string">&apos;/api/report&apos;</span>))
    onClickAjaxButton() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;ajaxClick&apos;</span>);
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onClickBeforeButton}</span>&gt;</span>beforeClick<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onClickAfterButton}</span>&gt;</span>afterClick<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onClickAjaxButton}</span>&gt;</span>ajaxClick<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    }
}
render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>, document.getElementById(&apos;root&apos;));
</span></code></pre>
<h6 id="t767.3.3.3 track.js">7.3.3.3 track.js <a href="#t767.3.3.3 track.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> before = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">beforeFn</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target, methodName, descriptor</span>) </span>{
        <span class="hljs-keyword">let</span> oldMethod = descriptor.value;
        descriptor.value = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            beforeFn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
            <span class="hljs-keyword">return</span> oldMethod.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        }
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> after = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">afterFn</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target, methodName, descriptor</span>) </span>{
        <span class="hljs-keyword">let</span> oldMethod = descriptor.value;
        descriptor.value = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            oldMethod.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
            afterFn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        }
    }
}
</code></pre>
<h5 id="t777.3.4 &#x8868;&#x5355;&#x6821;&#x9A8C;">7.3.4 &#x8868;&#x5355;&#x6821;&#x9A8C; <a href="#t777.3.4 &#x8868;&#x5355;&#x6821;&#x9A8C;"> # </a></h5>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>&#x7528;&#x6237;&#x6CE8;&#x518C;<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>
        &#x7528;&#x6237;&#x540D;<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span>
        &#x5BC6;&#x7801;<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;submit-btn&quot;</span>&gt;</span>&#x6CE8;&#x518C;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-built_in">Function</span>.prototype.before = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">beforeFn</span>) </span>{
            <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">let</span> ret = beforeFn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
                <span class="hljs-keyword">if</span> (ret)
                    _this.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submit</span>(<span class="hljs-params"></span>) </span>{
            alert(<span class="hljs-string">&apos;&#x63D0;&#x4EA4;&#x8868;&#x5355;&apos;</span>);
        }
        submit = submit.before(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">let</span> username = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;username&apos;</span>).value;
            <span class="hljs-keyword">if</span> (username.length &lt; <span class="hljs-number">6</span>) {
                <span class="hljs-keyword">return</span> alert(<span class="hljs-string">&apos;&#x7528;&#x6237;&#x540D;&#x4E0D;&#x80FD;&#x5C11;&#x4E8E;6&#x4F4D;&apos;</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        });
        submit = submit.before(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">let</span> username = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;username&apos;</span>).value;
            <span class="hljs-keyword">if</span> (!username) {
                <span class="hljs-keyword">return</span> alert(<span class="hljs-string">&apos;&#x7528;&#x6237;&#x540D;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;&apos;</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        });
        <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;submit-btn&apos;</span>).addEventListener(<span class="hljs-string">&apos;click&apos;</span>, submit);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="t788.&#x4EE3;&#x7406;&#x6A21;&#x5F0F;">8.&#x4EE3;&#x7406;&#x6A21;&#x5F0F; <a href="#t788.&#x4EE3;&#x7406;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x7531;&#x4E8E;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x5728;&#x8FD9;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x8D77;&#x5230;&#x4E2D;&#x4ECB;&#x4F5C;&#x7528;</li>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x5C31;&#x662F;&#x4E3A;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x521B;&#x9020;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;</li>
<li>&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x91CC;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x903B;&#x8F91;&#x5224;&#x65AD;&#x3001;&#x8C03;&#x7528;&#x524D;&#x6216;&#x8C03;&#x7528;&#x540E;&#x6267;&#x884C;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E86;&#x6269;&#x5C55;&#x76EE;&#x6807;&#x7684;&#x529F;&#x80FD;</li>
<li>&#x706B;&#x8F66;&#x7968;&#x4EE3;&#x8D2D;&#x3001;&#x623F;&#x4EA7;&#x4E2D;&#x4ECB;&#x3001;&#x5F8B;&#x5E08;&#x3001;&#x6D77;&#x5916;&#x4EE3;&#x8D2D;&#x3001;&#x660E;&#x661F;&#x7ECF;&#x7EAA;&#x4EBA;</li>
</ul>
<h4 id="t798.1 &#x7C7B;&#x56FE;">8.1 &#x7C7B;&#x56FE; <a href="#t798.1 &#x7C7B;&#x56FE;"> # </a></h4>
<ul>
<li>Target &#x76EE;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x88AB;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x662F;&#x5177;&#x4F53;&#x4E1A;&#x52A1;&#x7684;&#x6267;&#x884C;&#x8005;</li>
<li>Proxy &#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x91CC;&#x9762;&#x4F1A;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x8BBF;&#x95EE;&#x7684;&#x6269;&#x5C55;&#x548C;&#x989D;&#x5916;&#x5904;&#x7406;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/proxystar.png" alt="proxystar"></p>
<h4 id="t808.2 &#x4EE3;&#x7801;">8.2 &#x4EE3;&#x7801; <a href="#t808.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Star</span> </span>{
    abstract answerPhone(): <span class="hljs-keyword">void</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Angelababy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Star</span> </span>{
    public available: boolean = <span class="hljs-literal">true</span>;
    answerPhone(): <span class="hljs-keyword">void</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x4F60;&#x597D;,&#x6211;&#x662F;Angelababy.&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AngelababyAgent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Star</span> </span>{
    <span class="hljs-keyword">constructor</span>(private angelababy: Angelababy) {
        <span class="hljs-keyword">super</span>();
    }
    answerPhone(): <span class="hljs-keyword">void</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x4F60;&#x597D;,&#x6211;&#x662F;Angelababy&#x7684;&#x7ECF;&#x7EAA;&#x4EBA;.&apos;</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.angelababy.available) {
            <span class="hljs-keyword">this</span>.angelababy.answerPhone();
        }
    }
}
<span class="hljs-keyword">let</span> angelababyAgent = <span class="hljs-keyword">new</span> AngelababyAgent(<span class="hljs-keyword">new</span> Angelababy());
angelababyAgent.answerPhone();
</code></pre>
<h4 id="t818.3 &#x573A;&#x666F;">8.3 &#x573A;&#x666F; <a href="#t818.3 &#x573A;&#x666F;"> # </a></h4>
<h5 id="t828.3.1 &#x4E8B;&#x4EF6;&#x59D4;&#x6258;&#x4EE3;&#x7406;">8.3.1 &#x4E8B;&#x4EF6;&#x59D4;&#x6258;&#x4EE3;&#x7406; <a href="#t828.3.1 &#x4E8B;&#x4EF6;&#x59D4;&#x6258;&#x4EE3;&#x7406;"> # </a></h5>
<ul>
<li>&#x4E8B;&#x4EF6;&#x6355;&#x83B7;&#x6307;&#x7684;&#x662F;&#x4ECE;document&#x5230;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x7684;&#x90A3;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5373;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x7684;&#x53BB;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;</li>
<li>&#x4E8B;&#x4EF6;&#x5192;&#x6CE1;&#x662F;&#x81EA;&#x4E0B;&#x800C;&#x4E0A;&#x7684;&#x53BB;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;</li>
<li>&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x662F;&#x63A7;&#x5236;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x987A;&#x5E8F;&#x662F;&#x5426;&#x4E3A;&#x4E8B;&#x4EF6;&#x6355;&#x83B7;&#x3002;true&#x4E3A;&#x4E8B;&#x4EF6;&#x6355;&#x83B7;&#xFF1B;false&#x4E3A;&#x4E8B;&#x4EF6;&#x5192;&#x6CE1;,&#x9ED8;&#x8BA4;false&#x3002;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/captureevent.jpg" alt="captureevent"></p>
<pre><code class="lang-js">&lt;body&gt;
    &lt;ul id=&quot;list&quot;&gt;
        &lt;li&gt;1&lt;/li&gt;
        &lt;li&gt;2&lt;/li&gt;
        &lt;li&gt;3&lt;/li&gt;
    &lt;/ul&gt;
&lt;script&gt;
  let list = document.querySelector(&apos;#list&apos;);
  list.addEventListener(&apos;click&apos;,event=&gt;{
       alert(event.target.innerHTML);
  });     
&lt;/script&gt;    
&lt;/body&gt;
</code></pre>
<h5 id="t838.3.2 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x9884;&#x52A0;&#x8F7D;)">8.3.2 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x9884;&#x52A0;&#x8F7D;) <a href="#t838.3.2 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x9884;&#x52A0;&#x8F7D;)"> # </a></h5>
<ul>
<li><a href="http://img.zhufengpeixun.cn/bg-images.zip">bg-images</a></li>
</ul>
<h6 id="t848.3.2.1 app.js">8.3.2.1 app.js <a href="#t848.3.2.1 app.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> path=<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">let</span> app=express();
app.get(<span class="hljs-string">&apos;/images/loading.gif&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.sendFile(path.join(__dirname,req.path));
});
app.get(<span class="hljs-string">&apos;/images/:name&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        res.sendFile(path.join(__dirname,req.path));
    }, <span class="hljs-number">2000</span>);
});
app.get(<span class="hljs-string">&apos;/&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.sendFile(path.resolve(<span class="hljs-string">&apos;index.html&apos;</span>));
});
app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<h6 id="t858.3.2.2 index.html">8.3.2.2 index.html <a href="#t858.3.2.2 index.html"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.bg-container</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span> auto;
        }

        <span class="hljs-selector-class">.bg-container</span> <span class="hljs-selector-id">#bg-image</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;background&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>&#x80CC;&#x666F;1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>&#x80CC;&#x666F;2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;bg-image&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#background&apos;</span>);

        <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BackgroundImage</span> </span>{
            <span class="hljs-keyword">constructor</span>() {
                <span class="hljs-keyword">this</span>.bgImage = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#bg-image&apos;</span>);
            }
            setSrc(src) {
                <span class="hljs-keyword">this</span>.bgImage.src = src;
            }
        }
        <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoadingBackgroundImage</span> </span>{ 
             <span class="hljs-keyword">static</span> LOADING_URL= <span class="hljs-string">`/images/loading.gif`</span>;
            <span class="hljs-keyword">constructor</span>() {
                <span class="hljs-keyword">this</span>.backgroundImage = <span class="hljs-keyword">new</span> BackgroundImage();
            }
            setSrc(src) {
                <span class="hljs-keyword">this</span>.backgroundImage.setSrc(LoadingBackgroundImage.LOADING_URL);
                <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> Image();
                img.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                    <span class="hljs-keyword">this</span>.backgroundImage.setSrc(src);
                }
                img.src = src;
            }
        }
        <span class="hljs-keyword">let</span> loadingBackgroundImage = <span class="hljs-keyword">new</span> LoadingBackgroundImage();
        container.addEventListener(<span class="hljs-string">&apos;click&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
            <span class="hljs-keyword">let</span> src = event.target.dataset.src;
            loadingBackgroundImage.setSrc(src + <span class="hljs-string">&apos;?ts=&apos;</span> + <span class="hljs-built_in">Date</span>.now());
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t868.3.3 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x61D2;&#x52A0;&#x8F7D;)">8.3.3 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x61D2;&#x52A0;&#x8F7D;) <a href="#t868.3.3 &#x865A;&#x62DF;&#x4EE3;&#x7406;(&#x56FE;&#x7247;&#x61D2;&#x52A0;&#x8F7D;)"> # </a></h5>
<ul>
<li>&#x5F53;&#x524D;&#x53EF;&#x89C6;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6; <code>window.innerHeight || document.documentElement.clientHeight</code></li>
<li>&#x5143;&#x7D20;&#x8DDD;&#x79BB;&#x53EF;&#x89C6;&#x533A;&#x57DF;&#x9876;&#x90E8;&#x7684;&#x9AD8;&#x5EA6; <code>getBoundingClientRect().top</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect">getBoundingClientRect</a></li>
<li>DOMRect &#x5BF9;&#x8C61;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x7EC4;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x8FB9;&#x6846;&#x7684;&#x53EA;&#x8BFB;&#x5C5E;&#x6027;&#x2014;&#x2014;left&#x3001;top&#x3001;right &#x548C; bottom&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x50CF;&#x7D20;&#x3002;&#x9664;&#x4E86; width &#x548C; height &#x5916;&#x7684;&#x5C5E;&#x6027;&#x90FD;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x5DE6;&#x4E0A;&#x89D2;&#x4F4D;&#x7F6E;&#x800C;&#x8A00;&#x7684;</li>
</ul>
<h6 id="t878.3.3.1 index.html">8.3.3.1 index.html <a href="#t878.3.3.1 index.html"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Lazy-Load<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.image</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#CCC</span>;
        }

        <span class="hljs-selector-class">.image</span> <span class="hljs-selector-tag">img</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image-container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg1.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/images/bg2.jpg&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> imgs = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&apos;img&apos;</span>);
    <span class="hljs-keyword">const</span> clientHeight = <span class="hljs-built_in">window</span>.innerHeight || <span class="hljs-built_in">document</span>.documentElement.clientHeight;
    <span class="hljs-keyword">let</span> loadedIndex = <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lazyload</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = loadedIndex; i &lt; imgs.length; i++) {
            <span class="hljs-keyword">if</span> (clientHeight - imgs[i].getBoundingClientRect().top &gt; <span class="hljs-number">0</span>) {
                imgs[i].src = imgs[i].dataset.src;
                loadedIndex = i + <span class="hljs-number">1</span>;
            }
        }
    }
    lazyload();
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&apos;scroll&apos;</span>, lazyload, <span class="hljs-literal">false</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t888.3.4 &#x7F13;&#x5B58;&#x4EE3;&#x7406;">8.3.4 &#x7F13;&#x5B58;&#x4EE3;&#x7406; <a href="#t888.3.4 &#x7F13;&#x5B58;&#x4EE3;&#x7406;"> # </a></h5>
<ul>
<li>&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x7528;&#x7A7A;&#x95F4;&#x6362;&#x65F6;&#x95F4;</li>
<li>&#x4E00;&#x4E2A;&#x6B63;&#x6574;&#x6570;&#x7684;&#x9636;&#x4E58;&#xFF08;factorial&#xFF09;&#x662F;&#x6240;&#x6709;&#x5C0F;&#x4E8E;&#x53CA;&#x7B49;&#x4E8E;&#x8BE5;&#x6570;&#x7684;&#x6B63;&#x6574;&#x6570;&#x7684;&#x79EF;&#xFF0C;&#x5E76;&#x4E14;0&#x7684;&#x9636;&#x4E58;&#x4E3A;1</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> factorial = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">num</span>) </span>{
    <span class="hljs-keyword">if</span> (num === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> (num * f(num - <span class="hljs-number">1</span>));
    }
}

<span class="hljs-keyword">const</span> proxy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
    <span class="hljs-keyword">const</span> cache = {};  <span class="hljs-comment">// &#x7F13;&#x5B58;&#x5BF9;&#x8C61;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>{
        <span class="hljs-keyword">if</span> (num <span class="hljs-keyword">in</span> cache) {
            <span class="hljs-keyword">return</span> cache[num];   <span class="hljs-comment">// &#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x4EE3;&#x7406;</span>
        }
        <span class="hljs-keyword">return</span> cache[num] = fn.call(<span class="hljs-keyword">this</span>, num);
    }
}

<span class="hljs-keyword">const</span> proxyFactorial = proxy(factorial);
<span class="hljs-built_in">console</span>.log(proxyFactorial(<span class="hljs-number">5</span>));
<span class="hljs-built_in">console</span>.log(proxyFactorial(<span class="hljs-number">5</span>));
<span class="hljs-built_in">console</span>.log(proxyFactorial(<span class="hljs-number">5</span>));
</code></pre>
<ul>
<li>&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;(Fibonacci sequence)&#x6307;&#x7684;&#x662F;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x6570;&#x5217;&#xFF1A;1&#x3001;1&#x3001;2&#x3001;3&#x3001;5&#x3001;8&#x3001;13&#x3001;21&#x3001;34&#x3002;&#x5728;&#x6570;&#x5B66;&#x4E0A;&#xFF0C;&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;&#x4EE5;&#x5982;&#x4E0B;&#x88AB;&#x4EE5;&#x9012;&#x63A8;&#x7684;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#xFF1A;F(1)=1,F(2)=1,F(n)=F(n-1)+F(n-2)&#xFF08;n&gt;=3&#xFF0C;n&#x2208;N*&#xFF09;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>) </span>{
    count++;
    <span class="hljs-keyword">return</span> n &lt;= <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>);
}
<span class="hljs-keyword">var</span> result = fib(<span class="hljs-number">10</span>);
<span class="hljs-built_in">console</span>.log(result, count);<span class="hljs-comment">//55 110</span>
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> fibWithCache = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> cache = {};
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fib</span>(<span class="hljs-params">n</span>) </span>{
        count++;
        <span class="hljs-keyword">if</span> (cache[n]) {
            <span class="hljs-keyword">return</span> cache[n];
        }
        <span class="hljs-keyword">let</span> result = n &lt;= <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>);
        cache[n] = result;
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-keyword">return</span> fib;
})();
<span class="hljs-keyword">var</span> result = fibWithCache(<span class="hljs-number">10</span>);
<span class="hljs-built_in">console</span>.log(result, count);<span class="hljs-comment">//55 17</span>
</code></pre>
<h5 id="t898.3.5 &#x9632;&#x6296;&#x4EE3;&#x7406;">8.3.5 &#x9632;&#x6296;&#x4EE3;&#x7406; <a href="#t898.3.5 &#x9632;&#x6296;&#x4EE3;&#x7406;"> # </a></h5>
<ul>
<li>&#x901A;&#x8FC7;&#x9632;&#x6296;&#x4EE3;&#x7406;&#x4F18;&#x5316;&#x53EF;&#x4EE5;&#x628A;&#x591A;&#x6B21;&#x8BF7;&#x6C42;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x6B21;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;</li>
<li>&#x8282;&#x6D41;&#x4E0E;&#x9632;&#x6296;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x9891;&#x7E41;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x56DE;&#x8C03;</li>
<li>&#x8282;&#x6D41;(Throttle)&#x662F;&#x5728;&#x67D0;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x4E0D;&#x7BA1;&#x89E6;&#x53D1;&#x4E86;&#x591A;&#x5C11;&#x6B21;&#x56DE;&#x8C03;&#x90FD;&#x53EA;&#x8BA4;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;&#x5E76;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x7ED3;&#x675F;&#x540E;&#x6267;&#x884C;&#x56DE;&#x8C03;</li>
<li>&#x9632;&#x6296;(Debounce)&#x5C31;&#x662F;&#x5728;&#x67D0;&#x6BB5;&#x65F6;&#x95F4;&#x4E0D;&#x7BA1;&#x89E6;&#x53D1;&#x4E86;&#x591A;&#x5C11;&#x56DE;&#x8C03;&#x90FD;&#x53EA;&#x770B;&#x6700;&#x540E;&#x4E00;&#x4E2A;</li>
</ul>
<h6 id="t908.3.5.1 &#x8282;&#x6D41;">8.3.5.1 &#x8282;&#x6D41; <a href="#t908.3.5.1 &#x8282;&#x6D41;"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-id">#container</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
            <span class="hljs-attribute">overflow</span>: auto;
        }

        <span class="hljs-selector-id">#container</span> <span class="hljs-selector-class">.content</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">4000px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">callback, interval</span>) </span>{
            <span class="hljs-keyword">let</span> last;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>;
                <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span>;
                <span class="hljs-keyword">let</span> now = <span class="hljs-built_in">Date</span>.now();
                <span class="hljs-keyword">if</span> (last) {
                    <span class="hljs-keyword">if</span> (now - last &gt;= interval) {
                        last = now;
                        callback.apply(context, args);
                    }
                } <span class="hljs-keyword">else</span> {
                    callback.apply(context, args);
                    last = now;
                }

            }
        }
        <span class="hljs-keyword">let</span> lastTime = <span class="hljs-built_in">Date</span>.now();
        <span class="hljs-keyword">const</span> throttle_scroll = throttle(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x89E6;&#x53D1;&#x4E86;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&apos;</span>, (<span class="hljs-built_in">Date</span>.now() - lastTime) / <span class="hljs-number">1000</span>);
        }, <span class="hljs-number">1000</span>);
        <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;container&apos;</span>).addEventListener(<span class="hljs-string">&apos;scroll&apos;</span>, throttle_scroll);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h6 id="t918.3.5.2 &#x9632;&#x6296;">8.3.5.2 &#x9632;&#x6296; <a href="#t918.3.5.2 &#x9632;&#x6296;"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-id">#container</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
            <span class="hljs-attribute">overflow</span>: auto;
        }

        <span class="hljs-selector-id">#container</span> <span class="hljs-selector-class">.content</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">4000px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">callback, delay</span>) </span>{
            <span class="hljs-keyword">let</span> timer;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">let</span> context = <span class="hljs-keyword">this</span>;
                <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span>;
                <span class="hljs-keyword">if</span> (timer)
                    clearTimeout(timer);
                timer = setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                    callback.apply(context, args);
                }, delay);
            }
        }
        <span class="hljs-keyword">let</span> lastTime = <span class="hljs-built_in">Date</span>.now();
        <span class="hljs-keyword">const</span> throttle_scroll = throttle(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x89E6;&#x53D1;&#x4E86;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&apos;</span>, (<span class="hljs-built_in">Date</span>.now() - lastTime) / <span class="hljs-number">1000</span>);
        }, <span class="hljs-number">1000</span>);
        <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;container&apos;</span>).addEventListener(<span class="hljs-string">&apos;scroll&apos;</span>, throttle_scroll);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h6 id="t928.3.5.3 &#x672A;&#x9632;&#x6296;">8.3.5.3 &#x672A;&#x9632;&#x6296; <a href="#t928.3.5.3 &#x672A;&#x9632;&#x6296;"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;todos&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> todos = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#todos&apos;</span>);
    <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        fetch(<span class="hljs-string">&apos;/todos&apos;</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            todos.innerHTML = response.map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-string">`&lt;li &quot;&gt;&lt;input value=&quot;<span class="hljs-subst">${item.id}</span>&quot; type=&quot;checkbox&quot; <span class="hljs-subst">${item.completed?<span class="hljs-string">&quot;checked&quot;</span>:<span class="hljs-string">&quot;&quot;</span>}</span>/&gt;<span class="hljs-subst">${item.text}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">&apos;&apos;</span>);
        });
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle</span>(<span class="hljs-params">id</span>)</span>{
       fetch(<span class="hljs-string">`/toggle/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;response&apos;</span>,response);
        });
    }
    todos.addEventListener(<span class="hljs-string">&apos;click&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
        <span class="hljs-keyword">let</span> checkbox = event.target;
        <span class="hljs-keyword">let</span> id = checkbox.value;
        toggle(id);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>app.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> app=express();
app.use(express.static(__dirname));
<span class="hljs-keyword">let</span> todos=[
    {<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">&apos;a&apos;</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">&apos;b&apos;</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">&apos;c&apos;</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
];
app.get(<span class="hljs-string">&apos;/todos&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.json(todos);
});
app.get(<span class="hljs-string">&apos;/toggle/:id&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> id=req.params.id;
    todos = todos.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (item.id==id) {
            item.completed=!item.completed;
        }
        <span class="hljs-keyword">return</span> item;
    });
    res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>});
});
app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<h6 id="t938.3.5.4 &#x9632;&#x6296;">8.3.5.4 &#x9632;&#x6296; <a href="#t938.3.5.4 &#x9632;&#x6296;"> # </a></h6>
<p>todos.html</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;todos&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> todos = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#todos&apos;</span>);
    <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        fetch(<span class="hljs-string">&apos;/todos&apos;</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            todos.innerHTML = response.map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-string">`&lt;li &quot;&gt;&lt;input value=&quot;<span class="hljs-subst">${item.id}</span>&quot; type=&quot;checkbox&quot; <span class="hljs-subst">${item.completed?<span class="hljs-string">&quot;checked&quot;</span>:<span class="hljs-string">&quot;&quot;</span>}</span>/&gt;<span class="hljs-subst">${item.text}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">&apos;&apos;</span>);
        });
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle</span>(<span class="hljs-params">id</span>)</span>{
       fetch(<span class="hljs-string">`/toggle/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;response&apos;</span>,response);
        });
    }
    <span class="hljs-keyword">let</span> LazyToggle = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)</span>{
        <span class="hljs-keyword">let</span> ids = [];
        <span class="hljs-keyword">let</span> timer;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)</span>{
            ids.push(id);
            <span class="hljs-keyword">if</span>(timer){
               clearTimeout(timer);
            }
            timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                toggle(ids.join(<span class="hljs-string">&apos;,&apos;</span>));
                ids = <span class="hljs-literal">null</span>;
                clearTimeout(timer);
                timer = <span class="hljs-literal">null</span>;
            },<span class="hljs-number">2000</span>);
        }
    })();
    todos.addEventListener(<span class="hljs-string">&apos;click&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
        <span class="hljs-keyword">let</span> checkbox = event.target;
        <span class="hljs-keyword">let</span> id = checkbox.value;
        LazyToggle(id);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>app.js</p>
<pre><code class="lang-js">app.get(<span class="hljs-string">&apos;/toggle/:ids&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> ids=req.params.ids;
    ids=ids.split(<span class="hljs-string">&apos;,&apos;</span>).map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-built_in">parseInt</span>(item));
    todos = todos.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (ids.includes(item.id)) {
            item.completed=!item.completed;
        }
        <span class="hljs-keyword">return</span> item;
    });
    res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>});
});
</code></pre>
<h5 id="t948.3.6 &#x4EE3;&#x7406;&#x8DE8;&#x57DF;">8.3.6 &#x4EE3;&#x7406;&#x8DE8;&#x57DF; <a href="#t948.3.6 &#x4EE3;&#x7406;&#x8DE8;&#x57DF;"> # </a></h5>
<h6 id="t958.3.6.1 &#x6B63;&#x5411;&#x4EE3;&#x7406;&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406;">8.3.6.1 &#x6B63;&#x5411;&#x4EE3;&#x7406;&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406; <a href="#t958.3.6.1 &#x6B63;&#x5411;&#x4EE3;&#x7406;&#x548C;&#x53CD;&#x5411;&#x4EE3;&#x7406;"> # </a></h6>
<ul>
<li>&#x6B63;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5BA2;&#x6237;&#x7AEF;,&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x770B;&#x4E0D;&#x5230;&#x771F;&#x6B63;&#x7684;&#x5BA2;&#x6237;&#x7AEF;</li>
<li>&#x901A;&#x8FC7;&#x516C;&#x53F8;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7F51;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/positiveproxy.jpg" alt="positiveproxy"></p>
<ul>
<li>&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x670D;&#x52A1;&#x7AEF;,&#x5BA2;&#x6237;&#x7AEF;&#x770B;&#x4E0D;&#x5230;&#x771F;&#x6B63;&#x7684;&#x670D;&#x52A1;&#x7AEF;</li>
<li>nginx&#x4EE3;&#x7406;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/fanproxy.jpg" alt="fanproxy"></p>
<p>proxy-server.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;http&apos;</span>);
<span class="hljs-keyword">const</span> httpProxy = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;http-proxy&apos;</span>);
<span class="hljs-comment">//&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x670D;&#x52A1;</span>
<span class="hljs-keyword">const</span> proxy = httpProxy.createProxyServer();
<span class="hljs-comment">//&#x521B;&#x5EFA;http&#x670D;&#x52A1;&#x5668;&#x5E76;&#x76D1;&#x542C;8888&#x7AEF;&#x53E3;</span>
<span class="hljs-keyword">let</span> server = http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-comment">//&#x5C06;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x672C;&#x5730;9999&#x7AEF;&#x53E3;&#x4E0A;</span>
    proxy.web(req, res, {
        <span class="hljs-attr">target</span>: <span class="hljs-string">&apos;http://127.0.0.1:9999&apos;</span>
    });
    <span class="hljs-comment">//&#x76D1;&#x542C;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x9519;&#x8BEF;</span>
    proxy.on(<span class="hljs-string">&apos;error&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
        <span class="hljs-built_in">console</span>.log(err);
    });
});
server.listen(<span class="hljs-number">8888</span>, <span class="hljs-string">&apos;0.0.0.0&apos;</span>);
</code></pre>
<p>real-server.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;http&apos;</span>);
<span class="hljs-keyword">let</span> server = http.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
    res.end(<span class="hljs-string">&apos;9999&apos;</span>);
});
server.listen(<span class="hljs-number">9999</span>, <span class="hljs-string">&apos;0.0.0.0&apos;</span>);
</code></pre>
<h6 id="t968.3.6.2 &#x4EE3;&#x7406;&#x8DE8;&#x57DF;">8.3.6.2 &#x4EE3;&#x7406;&#x8DE8;&#x57DF; <a href="#t968.3.6.2 &#x4EE3;&#x7406;&#x8DE8;&#x57DF;"> # </a></h6>
<ul>
<li>nginx&#x4EE3;&#x7406;&#x8DE8;&#x57DF;</li>
<li><code>webpack-dev-server</code>&#x4EE3;&#x7406;&#x8DE8;&#x57DF;</li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7406;&#x8DE8;&#x57DF;</li>
<li>&#x5F53;&#x524D;&#x7684;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x5728;origin(3000&#x7AEF;&#x53E3;)&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x5728;target(4000&#x7AEF;&#x53E3;)&#x4E0A;</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage">postMessage</a>&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x5B9E;&#x73B0;&#x8DE8;&#x6E90;&#x901A;&#x4FE1;<ul>
<li><code>otherWindow</code>:&#x5176;&#x4ED6;&#x7A97;&#x53E3;&#x7684;&#x4E00;&#x4E2A;&#x5F15;&#x7528; message:&#x5C06;&#x8981;&#x53D1;&#x9001;&#x5230;&#x5176;&#x4ED6;window&#x7684;&#x6570;&#x636E;  </li>
<li><code>message</code> &#x5C06;&#x8981;&#x53D1;&#x9001;&#x5230;&#x5176;&#x4ED6;window&#x7684;&#x6570;&#x636E;  </li>
<li><code>targetOrigin</code>&#x901A;&#x8FC7;&#x7A97;&#x53E3;&#x7684;origin&#x5C5E;&#x6027;&#x6765;&#x6307;&#x5B9A;&#x54EA;&#x4E9B;&#x7A97;&#x53E3;&#x80FD;&#x63A5;&#x6536;&#x5230;&#x6D88;&#x606F;&#x4E8B;&#x4EF6;&#xFF0C;&#x5176;&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x5B57;&#x7B26;&#x4E32;&quot;*&quot;&#xFF08;&#x8868;&#x793A;&#x65E0;&#x9650;&#x5236;&#xFF09;&#x6216;&#x8005;&#x4E00;&#x4E2A;URI</li>
</ul>
</li>
</ul>
<pre><code class="lang-js">otherWindow.postMessage(message, targetOrigin, [transfer]);
</code></pre>
<ul>
<li>data &#x4ECE;&#x5176;&#x4ED6;<code>window</code>&#x4E2D;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x5BF9;&#x8C61;</li>
<li>origin &#x8C03;&#x7528;<code>postMessage</code>&#x65F6;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x65B9;&#x7A97;&#x53E3;&#x7684;<code>origin</code></li>
<li>source &#x5BF9;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x7A97;&#x53E3;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;message&quot;</span>, receiveMessage, <span class="hljs-literal">false</span>);
</code></pre>
<p>origin.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> app=express();
app.use(express.static(__dirname));
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<p>target.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">let</span> app = express();
<span class="hljs-keyword">let</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;body-parser&apos;</span>);
app.use(bodyParser.urlencoded({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));
app.use(express.static(__dirname));
<span class="hljs-keyword">let</span> users = [];
app.post(<span class="hljs-string">&apos;/register&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">let</span> body = req.body;
    <span class="hljs-keyword">let</span> target = body.target;
    <span class="hljs-keyword">let</span> callback = body.callback;
    <span class="hljs-keyword">let</span> username = body.username;
    <span class="hljs-keyword">let</span> password = body.password;
    <span class="hljs-keyword">let</span> user = { username, password };
    <span class="hljs-keyword">let</span> id = users.length == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : users[users.length - <span class="hljs-number">1</span>].id + <span class="hljs-number">1</span>;
    user.id = id;
    users.push(user);
    res.status(<span class="hljs-number">302</span>);
    res.header(<span class="hljs-string">&apos;Location&apos;</span>, <span class="hljs-string">`<span class="hljs-subst">${target}</span>?callback=<span class="hljs-subst">${callback}</span>&amp;args=<span class="hljs-subst">${id}</span>`</span>);
    res.end();
});
app.listen(<span class="hljs-number">4000</span>);
</code></pre>
<p>reg.html</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript">
        <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&apos;message&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
            <span class="hljs-built_in">console</span>.log(event.data);

            <span class="hljs-keyword">if</span> (event.data.receiveId) {
                alert(<span class="hljs-string">&apos;&#x7528;&#x6237;ID=&apos;</span> + event.data.receiveId);
            }
        })
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;proxyIframe&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;proxyIframe&quot;</span> <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:4000/register&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;POST&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;proxyIframe&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;callback&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;receiveId&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;target&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;http://localhost:3000/target.html&quot;</span>&gt;</span>
        &#x7528;&#x6237;&#x540D;<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span>
        &#x5BC6;&#x7801;<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#x63D0;&#x4EA4;&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>target.html</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> query = location.search.substr(<span class="hljs-number">1</span>).split(<span class="hljs-string">&apos;&amp;&apos;</span>);
            <span class="hljs-keyword">let</span> callback, args;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, len = query.length; i &lt; len; i++) {
                <span class="hljs-keyword">let</span> item = query[i].split(<span class="hljs-string">&apos;=&apos;</span>);
                <span class="hljs-keyword">if</span> (item[<span class="hljs-number">0</span>] == <span class="hljs-string">&apos;callback&apos;</span>) {
                    callback = item[<span class="hljs-number">1</span>];
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (item[<span class="hljs-number">0</span>] == <span class="hljs-string">&apos;args&apos;</span>) {
                    args = item[<span class="hljs-number">1</span>];
                }
            }
            <span class="hljs-keyword">try</span> {
                <span class="hljs-built_in">window</span>.parent.postMessage({ [callback]: args }, <span class="hljs-string">&apos;*&apos;</span>);
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-built_in">console</span>.log(error);
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t978.3.7 $.proxy">8.3.7 $.proxy <a href="#t978.3.7 $.proxy"> # </a></h5>
<ul>
<li>&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x65B0;&#x51FD;&#x6570;&#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x4E86;&#x7279;&#x5B9A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x8BED;&#x5883;&#x3002;</li>
<li><code>jQuery.proxy( function, context )</code> function&#x4E3A;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF0C;content&#x4E3A;&#x51FD;&#x6570;&#x7684;&#x4E0A;&#x4E0B;&#x6587;this&#x503C;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;&#x8FD9;&#x4E2A;object&#x5BF9;&#x8C61;</li>
</ul>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;title&gt;jquery proxy&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button id=&quot;btn&quot;&gt;&#x70B9;&#x6211;&#x53D8;&#x7EA2;&lt;/button&gt;
    &lt;script src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        let btn = document.getElementById(&apos;btn&apos;);
        btn.addEventListener(&apos;click&apos;, function () {
            setTimeout($.proxy((function () {
                $(this).css(&apos;color&apos;, &apos;red&apos;);
            }), this), 1000);
        });    
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxy</span>(<span class="hljs-params">fn, context</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
       <span class="hljs-keyword">return</span> fn.call(context, <span class="hljs-built_in">arguments</span>);
    }
}
</code></pre>
<h5 id="t988.3.8 Proxy">8.3.8 Proxy <a href="#t988.3.8 Proxy"> # </a></h5>
<ul>
<li>Proxy &#x7528;&#x4E8E;&#x4FEE;&#x6539;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;</li>
<li>Proxy &#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#xFF0C;&#x5728;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x4E4B;&#x524D;&#x67B6;&#x8BBE;&#x4E00;&#x5C42;<code>&#x62E6;&#x622A;</code>,&#x5916;&#x754C;&#x5BF9;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x5148;&#x901A;&#x8FC7;&#x8FD9;&#x5C42;&#x62E6;&#x622A;&#xFF0C;&#x56E0;&#x6B64;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x673A;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5916;&#x754C;&#x7684;&#x8BBF;&#x95EE;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x548C;&#x6539;&#x5199;&#x3002;</li>
<li>Proxy &#x8FD9;&#x4E2A;&#x8BCD;&#x7684;&#x539F;&#x610F;&#x662F;&#x4EE3;&#x7406;&#xFF0C;&#x7528;&#x5728;&#x8FD9;&#x91CC;&#x8868;&#x793A;&#x7531;&#x5B83;&#x6765;<code>&#x4EE3;&#x7406;</code>&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x8BD1;&#x4E3A;<code>&#x4EE3;&#x7406;&#x5668;</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">defineProperty</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> wang={
    <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;wanglaoshi&apos;</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>,
    <span class="hljs-attr">height</span>:<span class="hljs-number">165</span>
}
<span class="hljs-keyword">let</span> wangMama=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(wang,{
    get(target,key) {
        <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;age&apos;</span>) {
            <span class="hljs-keyword">return</span> wang.age<span class="hljs-number">-1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;height&apos;</span>) {
            <span class="hljs-keyword">return</span> wang.height<span class="hljs-number">-5</span>;
        }
        <span class="hljs-keyword">return</span> target[key];
    },
    set(target,key,val) {
        <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;boyfriend&apos;</span>) {
            <span class="hljs-keyword">let</span> boyfriend=val;
            <span class="hljs-keyword">if</span> (boyfriend.age&gt;<span class="hljs-number">40</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;&#x592A;&#x8001;&apos;</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (boyfriend.salary&lt;<span class="hljs-number">20000</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;&#x592A;&#x7A77;&apos;</span>);
            } <span class="hljs-keyword">else</span> {
                target[key]=val;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
});
<span class="hljs-built_in">console</span>.log(wangMama.age);
<span class="hljs-built_in">console</span>.log(wangMama.height);
wangMama.boyfriend={
    <span class="hljs-attr">age</span>: <span class="hljs-number">41</span>,
    <span class="hljs-attr">salary</span>:<span class="hljs-number">3000</span>
}
</code></pre>
<h5 id="t998.3.9 Vue2&#x548C;Vue3">8.3.9 Vue2&#x548C;Vue3 <a href="#t998.3.9 Vue2&#x548C;Vue3"> # </a></h5>
<ul>
<li>Vue2 &#x4E2D;&#x7684;&#x53D8;&#x5316;&#x4FA6;&#x6D4B;&#x5B9E;&#x73B0;&#x5BF9; Object &#x53CA; Array &#x5206;&#x522B;&#x8FDB;&#x884C;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;,Object &#x4F7F;&#x7528;&#x4E86;
<code>Object.defineProperty API</code>,<code>Array</code>&#x4F7F;&#x7528;&#x4E86;&#x62E6;&#x622A;&#x5668;&#x5BF9; <code>Array</code> &#x539F;&#x578B;&#x4E0A;&#x7684;&#x80FD;&#x591F;&#x6539;&#x53D8;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x3002;&#x867D;&#x7136;&#x4E5F;&#x5B9E;&#x73B0;&#x4E86;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x4FA6;&#x6D4B;&#xFF0C;&#x4F46;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x5C40;&#x9650; &#xFF0C;&#x6BD4;&#x5982;&#x5BF9;&#x8C61;&#x65B0;&#x589E;&#x5C5E;&#x6027;&#x65E0;&#x6CD5;&#x88AB;&#x4FA6;&#x6D4B;&#xFF0C;&#x4EE5;&#x53CA;&#x901A;&#x8FC7;&#x6570;&#x7EC4;&#x4E0B;&#x8FB9;&#x4FEE;&#x6539;&#x6570;&#x7EC4;&#x5185;&#x5BB9;&#xFF0C;&#x4E5F;&#x56E0;&#x6B64;&#x5728; Vue2 &#x4E2D;&#x7ECF;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;&#x5230; <code>$set</code> &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9;&#x6570;&#x636E;&#x4FEE;&#x6539;&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x4F9D;&#x8D56;&#x66F4;&#x65B0;&#x3002;</li>
<li>Vue3 &#x4E2D;&#x4F7F;&#x7528;&#x4E86; es6 &#x7684; <code>Proxy API</code>&#x5BF9;&#x6570;&#x636E;&#x4EE3;&#x7406;&#xFF0C;&#x6CA1;&#x6709;&#x50CF; <code>Vue2</code> &#x4E2D;&#x5BF9;&#x539F;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x53EA;&#x662F;&#x52A0;&#x4E86;&#x4EE3;&#x7406;&#x5305;&#x88C5;&#xFF0C;&#x56E0;&#x6B64;&#x9996;&#x5148;&#x6027;&#x80FD;&#x4E0A;&#x4F1A;&#x6709;&#x6240;&#x6539;&#x5584;&#x3002;&#x5176;&#x6B21;&#x89E3;&#x51B3;&#x4E86; <code>Vue2</code> &#x4E2D;&#x53D8;&#x5316;&#x4FA6;&#x6D4B;&#x7684;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528; <code>$set</code> &#x65B0;&#x589E;&#x7684;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x53CA;&#x901A;&#x8FC7;&#x4E0B;&#x6807;&#x4FEE;&#x6539;&#x6570;&#x7EC4;&#x90FD;&#x80FD;&#x88AB;&#x4FA6;&#x6D4B;&#x5230;&#x3002;</li>
</ul>
<h5 id="t1008.3.10">8.3.10 <a href="#t1008.3.10"> # </a></h5>
<ul>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F; VS &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F; &#x9002;&#x914D;&#x5668;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x63A5;&#x53E3;&#xFF0C;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;&#x63A5;&#x53E3;</li>
<li>&#x4EE3;&#x7406;&#x6A21;&#x5F0F; VS &#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F; &#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;&#x539F;&#x6765;&#x7684;&#x529F;&#x80FD;&#x4E0D;&#x53D8;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF0C;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x6539;&#x53D8;&#x539F;&#x6765;&#x7684;&#x529F;&#x80FD;</li>
</ul>
<h2 id="t1019.&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;">9.&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F; <a href="#t1019.&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x8BA9;&#x591A;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x67D0;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x5F53;&#x8FD9;&#x4E2A;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x4F1A;&#x901A;&#x77E5;&#x6240;&#x6709;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x4F7F;&#x5B83;&#x4EEC;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x66F4;&#x65B0;</li>
<li>&#x53CC;&#x5341;&#x4E00;&#x52A0;&#x5165;&#x8D2D;&#x7269;&#x8F66;</li>
</ul>
<h4 id="t1029.1 &#x7C7B;&#x56FE;">9.1 &#x7C7B;&#x56FE; <a href="#t1029.1 &#x7C7B;&#x56FE;"> # </a></h4>
<ul>
<li>&#x4E3B;&#x9898;&#x5BF9;&#x8C61;(Subject) &#x8BE5;&#x89D2;&#x8272;&#x53C8;&#x79F0;&#x4E3A;&#x88AB;&#x89C2;&#x5BDF;&#x8005;,&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x548C;&#x5220;&#x9664;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;,&#x5B83;&#x5C06;&#x6709;&#x5173;&#x72B6;&#x6001;&#x5B58;&#x5165;&#x5177;&#x4F53;&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x5177;&#x4F53;&#x4E3B;&#x9898;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x7ED9;&#x6240;&#x6709;&#x767B;&#x8BB0;&#x8FC7;(&#x5173;&#x8054;&#x4E86;&#x89C2;&#x5BDF;&#x5173;&#x7CFB;)&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x53D1;&#x51FA;&#x901A;&#x77E5;</li>
<li>&#x89C2;&#x5BDF;&#x8005;(Observer)&#x89D2;&#x8272;&#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x6536;&#x901A;&#x77E5;&#x7684;&#x63A5;&#x53E3;(update),&#x5728;&#x5F97;&#x5230;&#x4E3B;&#x9898;&#x7684;&#x901A;&#x77E5;&#x65F6;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/teacherobserver.png" alt="teacherobserver"></p>
<h4 id="t1039.2 &#x4EE3;&#x7801;">9.2 &#x4EE3;&#x7801; <a href="#t1039.2 &#x4EE3;&#x7801;"> # </a></h4>
<pre><code class="lang-js">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>{
    <span class="hljs-keyword">constructor</span>(public teacher: Teacher) { }
    public abstract update();
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Xueba</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Student</span> </span>{
    public update() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.teacher.getState() + <span class="hljs-string">&apos;,&#x5B66;&#x9738;&#x62AC;&#x5934;&#x4E3E;&#x624B;&apos;</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Xuezha</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Student</span> </span>{
    public update() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.teacher.getState() + <span class="hljs-string">&apos;,&#x5B66;&#x6E23;&#x4F4E;&#x5934;&#x7948;&#x7977;&apos;</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> </span>{
    private students: Student[] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>&lt;Student&gt;();
    public state: string = <span class="hljs-string">&apos;&#x8001;&#x5E08;&#x8BB2;&#x8BFE;&apos;</span>
    getState() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state;
    }
    public askQuestion() {
        <span class="hljs-keyword">this</span>.state = <span class="hljs-string">&apos;&#x8001;&#x5E08;&#x63D0;&#x95EE;&apos;</span>;
        <span class="hljs-keyword">this</span>.notifyAllStudents();
    }
    attach(student: Student) {
        <span class="hljs-keyword">this</span>.students.push(student);
    }
    notifyAllStudents() {
        <span class="hljs-keyword">this</span>.students.forEach(<span class="hljs-function"><span class="hljs-params">student</span> =&gt;</span> student.update());
    }
}
<span class="hljs-keyword">let</span> teacher = <span class="hljs-keyword">new</span> Teacher();
teacher.attach(<span class="hljs-keyword">new</span> Xueba(teacher));
teacher.attach(<span class="hljs-keyword">new</span> Xueza(teacher));
teacher.askQuestion();
</code></pre>
<h4 id="t1049.3 &#x573A;&#x666F;">9.3 &#x573A;&#x666F; <a href="#t1049.3 &#x573A;&#x666F;"> # </a></h4>
<h5 id="t1059.3.1 DOM&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;">9.3.1 DOM&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A; <a href="#t1059.3.1 DOM&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;"> # </a></h5>
<p>&#x539F;&#x751F;</p>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;title&gt;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button id=&quot;btn&quot;&gt;click&lt;/button&gt;
    &lt;script&gt;
        let btn = document.getElementById(&apos;btn&apos;);
        const handler1 = () =&gt; { console.log(1); }
        const handler2 = () =&gt; { console.log(2); }
        const handler3 = () =&gt; { console.log(3); }
        btn.addEventListener(&apos;click&apos;, handler1);
        btn.addEventListener(&apos;click&apos;,handler2);
        btn.addEventListener(&apos;click&apos;, handler3);
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>jquery</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> handler1 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>); }
        <span class="hljs-keyword">const</span> handler2 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>); }
        <span class="hljs-keyword">const</span> handler3 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>); }
        $(<span class="hljs-string">&apos;#btn&apos;</span>).on(<span class="hljs-string">&apos;clickMe&apos;</span>, handler1);
        $(<span class="hljs-string">&apos;#btn&apos;</span>).on(<span class="hljs-string">&apos;clickMe&apos;</span>, handler2);
        $(<span class="hljs-string">&apos;#btn&apos;</span>).on(<span class="hljs-string">&apos;clickMe&apos;</span>, handler3);
        $(<span class="hljs-string">&apos;#btn&apos;</span>).trigger(<span class="hljs-string">&apos;clickMe&apos;</span>);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;=================================&apos;</span>);
        $(<span class="hljs-string">&apos;#btn&apos;</span>).off(<span class="hljs-string">&apos;clickMe&apos;</span>, handler2);
        $(<span class="hljs-string">&apos;#btn&apos;</span>).trigger(<span class="hljs-string">&apos;clickMe&apos;</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t1069.3.2 Promise">9.3.2 Promise <a href="#t1069.3.2 Promise"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Promise</span> </span>{
    private callbacks: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Function</span>&gt; = []
    <span class="hljs-keyword">constructor</span>(fn) {
        <span class="hljs-keyword">let</span> resolve = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> callback())
        };
        fn(resolve);
    }
    then(callback) {
        <span class="hljs-keyword">this</span>.callbacks.push(callback);
    }
}
<span class="hljs-keyword">let</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        resolve(<span class="hljs-number">100</span>);
    }, <span class="hljs-number">1000</span>);
});
promise.then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>));
promise.then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>));
</code></pre>
<h5 id="t1079.3.3 callbacks">9.3.3 callbacks <a href="#t1079.3.3 callbacks"> # </a></h5>
<ul>
<li><code>JQuery.Callbacks</code>&#x662F;jQuery1.7+&#x4E4B;&#x540E;&#x5F15;&#x5165;&#x7684;&#xFF0C;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x961F;&#x5217;&#x7684;add&#x3001;remove&#x3001;fire&#x3001;lock&#x7B49;&#x64CD;&#x4F5C;</li>
<li>Callbacks&#x5BF9;&#x8C61;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x961F;&#x5217;&#xFF0C;&#x83B7;&#x5F97;Callbacks&#x5BF9;&#x8C61;&#x4E4B;&#x540E; &#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5411;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x589E;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x51FD;&#x6570;&#x3002;add&#x548C;remove&#x529F;&#x80FD;&#x76F8;&#x53CD;&#xFF0C;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;empty()&#x5220;&#x9664;&#x56DE;&#x8C03;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x51FD;&#x6570;</li>
</ul>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> callbacks = $.Callbacks();

        <span class="hljs-keyword">let</span> a1 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">let</span> a2 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-number">2</span>);
        <span class="hljs-keyword">let</span> a3 = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> alert(<span class="hljs-number">13</span>);
        callbacks.add(a1);
        callbacks.add(a2);
        callbacks.add(a3);
        callbacks.remove(a3);
        callbacks.fire();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Callbacks</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Callbacks</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> observers = [];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">observer</span>) </span>{
        observers.push(observer);
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">remove</span>(<span class="hljs-params">observer</span>) </span>{
        <span class="hljs-keyword">let</span> index = observers.indexOf(observer);
        <span class="hljs-keyword">if</span> (index != <span class="hljs-number">-1</span>)
            observers.splice(index, <span class="hljs-number">1</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span>(<span class="hljs-params"></span>) </span>{
        observers.forEach(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> observer());
    }
    <span class="hljs-keyword">return</span> {
        add,
        remove,
        fire
    }
}
</code></pre>
<h5 id="t1089.3.4 EventEmitter">9.3.4 EventEmitter <a href="#t1089.3.4 EventEmitter"> # </a></h5>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> EventEmitter = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;events&apos;</span>);
<span class="hljs-keyword">let</span> subject = <span class="hljs-keyword">new</span> EventEmitter();
subject.on(<span class="hljs-string">&apos;click&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>, name);
});
subject.on(<span class="hljs-string">&apos;click&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>, name);
});
subject.emit(<span class="hljs-string">&apos;click&apos;</span>, <span class="hljs-string">&apos;zhufeng&apos;</span>);
</code></pre>
<p>events.js</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventEmitter</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>._events={};
    }
    on(type,listener) {
        <span class="hljs-keyword">let</span> listeners=<span class="hljs-keyword">this</span>._events[type];
        <span class="hljs-keyword">if</span> (listeners) {
            listeners.push(listener);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>._events[type]=[listener];
        }
    }
    emit(type) {
        <span class="hljs-keyword">let</span> listeners=<span class="hljs-keyword">this</span>._events[type];
        <span class="hljs-keyword">let</span> args=<span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">arguments</span>).slice(<span class="hljs-number">1</span>);
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener(...args));
    }
}
<span class="hljs-built_in">module</span>.exports = EventEmitter;
</code></pre>
<h5 id="t1099.3.5 &#x6D41;">9.3.5 &#x6D41; <a href="#t1099.3.5 &#x6D41;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">let</span> rs = fs.createReadStream(<span class="hljs-string">&apos;./1.txt&apos;</span>, { <span class="hljs-attr">highWaterMark</span>: <span class="hljs-number">3</span> });
rs.on(<span class="hljs-string">&apos;data&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(data.toString());
});
rs.on(<span class="hljs-string">&apos;end&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;end&apos;</span>);
});
</code></pre>
<h5 id="t1109.3.6 http&#x670D;&#x52A1;&#x5668;">9.3.6 http&#x670D;&#x52A1;&#x5668; <a href="#t1109.3.6 http&#x670D;&#x52A1;&#x5668;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;http&apos;</span>);
<span class="hljs-keyword">let</span> server = http.createServer();
server.on(<span class="hljs-string">&apos;request&apos;</span>, (req, res) =&gt; {
    res.end(<span class="hljs-string">&apos;zhufeng&apos;</span>);
});
server.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h5 id="t1119.3.7 &#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570;">9.3.7 &#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570; <a href="#t1119.3.7 &#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570;"> # </a></h5>
<p><img src="http://img.zhufengpeixun.cn/reactlifecycles.jpg" alt="reactlifecycles"></p>
<p><img src="http://img.zhufengpeixun.cn/vuelifecycles.jpg" alt="vuelifecycles"></p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> container = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>);
        <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Component</span> </span>{
            state = { <span class="hljs-attr">number</span>: <span class="hljs-number">0</span> }
            componentWillMount() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;componentWillMount&apos;</span>);
            }

            componentDidMount() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;componentDidMount&apos;</span>);
            }
            shouldComponentUpdate() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;shouldComponentUpdate&apos;</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            componentWillUpdate() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;componentWillUpdate&apos;</span>);
            }

            componentDidUpdate() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;componentDidUpdate&apos;</span>);
            }
            setState(newState) {
                <span class="hljs-keyword">this</span>.state = { ...this.state, ...newState }
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.shouldComponentUpdate || (<span class="hljs-keyword">this</span>.shouldComponentUpdate &amp;&amp; <span class="hljs-keyword">this</span>.shouldComponentUpdate())) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.componentWillUpdate)
                        <span class="hljs-keyword">this</span>.componentWillUpdate();
                    <span class="hljs-keyword">let</span> content = <span class="hljs-keyword">this</span>.render();
                    container.innerHTML = content;
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.componentDidUpdate)
                        <span class="hljs-keyword">this</span>.componentDidUpdate();
                }
            }
            render() {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;render&apos;</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state.number;
            }
        }
        render(Component, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>));
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">Component, container</span>) </span>{

            <span class="hljs-keyword">let</span> component = <span class="hljs-keyword">new</span> Component();
            <span class="hljs-keyword">if</span> (component.componentWillMount)
                component.componentWillMount();
            <span class="hljs-keyword">let</span> content = component.render();
            container.innerHTML = content;
            <span class="hljs-keyword">if</span> (component.componentDidMount)
                component.componentDidMount();

            setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                component.setState({ <span class="hljs-attr">number</span>: <span class="hljs-number">1</span> });
            }, <span class="hljs-number">3000</span>);
        }

    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t1129.3.8 EventBus">9.3.8 EventBus <a href="#t1129.3.8 EventBus"> # </a></h5>
<ul>
<li>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x4F7F;&#x7528;<code>$on</code>&#x3001;<code>$emit</code>&#x4E0D;&#x65B9;&#x4FBF;,&#x800C;&#x4F60;&#x53C8;&#x4E0D;&#x613F;&#x610F;&#x5F15;&#x5165;<code>vuex</code>,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>EventBus</code></li>
<li>&#x5728;&#x8981;&#x76F8;&#x4E92;&#x901A;&#x4FE1;&#x7684;&#x5144;&#x5F1F;&#x7EC4;&#x4EF6;&#x4E4B;&#x4E2D;&#xFF0C;&#x90FD;&#x5F15;&#x5165;&#x4E00;&#x4E2A;&#x65B0;&#x7684;vue&#x5B9E;&#x4F8B;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x5206;&#x522B;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x548C;&#x76D1;&#x542C;&#x6765;&#x5B9E;&#x73B0;&#x901A;&#x4FE1;&#x548C;&#x53C2;&#x6570;&#x4F20;&#x9012;</li>
</ul>
<p>EventBus.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>;  
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vue(); 
</code></pre>
<p>&#x7EC4;&#x4EF6;A</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> EventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./EventBus&apos;</span>;  
EventBus.$on(<span class="hljs-string">&quot;customEvent&quot;</span>, name =&gt; {
    <span class="hljs-built_in">console</span>.log(name);
})
</code></pre>
<p>&#x7EC4;&#x4EF6;B</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> EventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./EventBus&apos;</span>;  
EventBus.$emit(<span class="hljs-string">&quot;customEvent&quot;</span>, <span class="hljs-string">&apos;zhufeng&apos;</span>)
</code></pre>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcss.com/vue/2.5.17/vue.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> EventBus = <span class="hljs-keyword">new</span> Vue();
        EventBus.$on(<span class="hljs-string">&quot;customEvent&quot;</span>, name =&gt; {
            <span class="hljs-built_in">console</span>.log(name);
        })
        EventBus.$emit(<span class="hljs-string">&quot;customEvent&quot;</span>, <span class="hljs-string">&apos;zhufeng&apos;</span>)
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h5 id="t1139.3.9 Vue&#x54CD;&#x5E94;&#x5F0F;">9.3.9 Vue&#x54CD;&#x5E94;&#x5F0F; <a href="#t1139.3.9 Vue&#x54CD;&#x5E94;&#x5F0F;"> # </a></h5>
<ul>
<li>&#x5728; Vue &#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#x90FD;&#x6709;&#x76F8;&#x5E94;&#x7684; <code>watcher</code> &#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x628A;&#x5C5E;&#x6027;&#x8BB0;&#x5F55;&#x4E3A;&#x4F9D;&#x8D56;&#xFF0C;&#x4E4B;&#x540E;&#x5F53;&#x4F9D;&#x8D56;&#x9879;&#x7684; <code>setter</code> &#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x4F1A;&#x901A;&#x77E5; <code>watcher</code> &#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#xFF0C;&#x4ECE;&#x800C;&#x81F4;&#x4F7F;&#x5B83;&#x5173;&#x8054;&#x7684;&#x7EC4;&#x4EF6;&#x5F97;&#x4EE5;&#x66F4;&#x65B0;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/vuereactive.jpg" alt="vuereactive"></p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>vue<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">let</span> name = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;name&apos;</span>);
        <span class="hljs-keyword">let</span> age = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;age&apos;</span>);
        <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dep</span> </span>{
            subs = []
            addSub(sub) {
                <span class="hljs-keyword">this</span>.subs.push(sub);
            }
            notify() {
                <span class="hljs-keyword">this</span>.subs.forEach(<span class="hljs-function">(<span class="hljs-params">sub</span>) =&gt;</span> sub())
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">observe</span>(<span class="hljs-params">target</span>) </span>{
            <span class="hljs-built_in">Object</span>.keys(target).forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
                <span class="hljs-keyword">let</span> val = target[key];
                <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> Dep();
                <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;name&apos;</span>) {
                    name.innerHTML = val;
                    dep.addSub(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { name.innerHTML = val });
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;age&apos;</span>) {
                    age.innerHTML = val;
                    dep.addSub(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { age.innerHTML = val });
                }
                <span class="hljs-built_in">Object</span>.defineProperty(target, key, {
                    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> val;
                    },
                    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
                        val = value;
                        dep.notify();
                    }
                });
            })
        }

        <span class="hljs-keyword">let</span> obj = { <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;&#x540D;&#x79F0;&apos;</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">&apos;&#x5E74;&#x9F84;&apos;</span> };
        observe(obj);
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            obj.name = <span class="hljs-string">&apos;&#x65B0;&#x540D;&#x79F0;&apos;</span>;
        }, <span class="hljs-number">3000</span>);
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            obj.age = <span class="hljs-string">&apos;&#x65B0;&#x5E74;&#x9F84;&apos;</span>;
        }, <span class="hljs-number">6000</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 id="t1149.3.9 redux">9.3.9 redux <a href="#t1149.3.9 redux"> # </a></h5>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/master/src/createStore.js">createStore</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStore</span>(<span class="hljs-params">reducer,preloadedState,enhancer</span>) </span>{
    <span class="hljs-keyword">if</span> (enhancer) {
        <span class="hljs-keyword">return</span> enhancer(createStore)(reducer,preloadedState);
    }
    <span class="hljs-keyword">let</span> state=preloadedState;
    <span class="hljs-keyword">let</span> listeners=[];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getState</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> state;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscribe</span>(<span class="hljs-params">listener</span>) </span>{
        listeners.push(listener);
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">const</span> index=listeners.indexOf(listener);
            listeners.splice(index,<span class="hljs-number">1</span>);
        }
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dispatch</span>(<span class="hljs-params">action</span>) </span>{
        state=reducer(state,action);
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">listener</span>=&gt;</span>listener())
    }
    dispatch({<span class="hljs-attr">type</span>:<span class="hljs-string">&apos;@@redux/INIT&apos;</span>});
    <span class="hljs-keyword">return</span> {
        dispatch,
        subscribe,
        getState
    }
}
</code></pre>
<h4 id="t1159.4 &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x6A21;&#x5F0F;">9.4 &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x6A21;&#x5F0F; <a href="#t1159.4 &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x6A21;&#x5F0F;"> # </a></h4>
<h5 id="t1169.4.1 &#x533A;&#x522B;">9.4.1 &#x533A;&#x522B; <a href="#t1169.4.1 &#x533A;&#x522B;"> # </a></h5>
<ul>
<li>&#x8BA2;&#x9605;&#x8005;&#x628A;&#x81EA;&#x5DF1;&#x60F3;&#x8BA2;&#x9605;&#x7684;&#x4E8B;&#x4EF6;&#x6CE8;&#x518C;&#x5230;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;</li>
<li>&#x5F53;&#x8BE5;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x65F6;&#x5019;&#xFF0C;&#x53D1;&#x5E03;&#x8005;&#x53D1;&#x5E03;&#x8BE5;&#x4E8B;&#x4EF6;&#x5230;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;,&#x7531;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7EDF;&#x4E00;&#x8C03;&#x5EA6;&#x8BA2;&#x9605;&#x8005;&#x6CE8;&#x518C;&#x5230;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;&#x5904;&#x7406;&#x4EE3;&#x7801;&#x3002;</li>
<li>&#x867D;&#x7136;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x90FD;&#x5B58;&#x5728;&#x8BA2;&#x9605;&#x8005;&#x548C;&#x53D1;&#x5E03;&#x8005;&#xFF08;&#x89C2;&#x5BDF;&#x8005;&#x53EF;&#x8BA4;&#x4E3A;&#x662F;&#x8BA2;&#x9605;&#x8005;&#x3001;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x53EF;&#x8BA4;&#x4E3A;&#x662F;&#x53D1;&#x5E03;&#x8005;&#xFF09;</li>
<li>&#x4F46;&#x662F;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x662F;&#x7531;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x8C03;&#x5EA6;&#x7684;&#xFF0C;&#x800C;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x662F;&#x7EDF;&#x4E00;&#x7531;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x8C03;&#x7684;</li>
<li>&#x6240;&#x4EE5;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x8BA2;&#x9605;&#x8005;&#x4E0E;&#x53D1;&#x5E03;&#x8005;&#x4E4B;&#x95F4;&#x662F;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x7684;&#xFF0C;&#x800C;&#x53D1;&#x5E03;/&#x8BA2;&#x9605;&#x6A21;&#x5F0F;&#x5219;&#x4E0D;&#x4F1A;&#x3002;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/subscribepattern.jpg" alt="subscribepattern"></p>
<h5 id="t1179.4.2 &#x7C7B;&#x56FE;">9.4.2 &#x7C7B;&#x56FE; <a href="#t1179.4.2 &#x7C7B;&#x56FE;"> # </a></h5>
<p><img src="http://img.zhufengpeixun.cn/publishsubscribe.png" alt="publishsubscribe"></p>
<h5 id="t1189.4.3 &#x4EE3;&#x7801;">9.4.3 &#x4EE3;&#x7801; <a href="#t1189.4.3 &#x4EE3;&#x7801;"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Agency</span> </span>{
    _topics = {}
    subscribe(topic, listener) {
        <span class="hljs-keyword">let</span> listeners = <span class="hljs-keyword">this</span>._topics[topic];
        <span class="hljs-keyword">if</span> (listeners) {
            listeners.push(listener);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>._topics[topic] = [listener];
        }
    }
    publish(topic, ...args) {
        <span class="hljs-keyword">let</span> listeners = <span class="hljs-keyword">this</span>._topics[topic] || [];
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener(...args));
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Landlord</span> </span>{
    <span class="hljs-keyword">constructor</span>(public agent: Agency) { }
    lend(topic, area, money) {
        <span class="hljs-keyword">this</span>.agent.publish(topic, area, money);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tenant</span> </span>{
    <span class="hljs-keyword">constructor</span>(public agent: Agency, public name: string) { }
    order(topic) {
        <span class="hljs-keyword">this</span>.agent.subscribe(topic, (area, money) =&gt; {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name, <span class="hljs-string">`<span class="hljs-subst">${area}</span>&#x5E73;&#x7C73;, <span class="hljs-subst">${money}</span>&#x5143;`</span>);
        });
    }
}
<span class="hljs-keyword">let</span> agent = <span class="hljs-keyword">new</span> Agency();
<span class="hljs-keyword">let</span> rich = <span class="hljs-keyword">new</span> Tenant(agent, <span class="hljs-string">&apos;&#x5927;&#x6B3E;&apos;</span>);
<span class="hljs-keyword">let</span> poor = <span class="hljs-keyword">new</span> Tenant(agent, <span class="hljs-string">&apos;&#x5317;&#x6F02;&apos;</span>);
<span class="hljs-keyword">let</span> landlord = <span class="hljs-keyword">new</span> Landlord(agent);
rich.order(<span class="hljs-string">&apos;&#x8C6A;&#x5B85;&apos;</span>);
poor.order(<span class="hljs-string">&apos;&#x5355;&#x95F4;&apos;</span>);
landlord.lend(<span class="hljs-string">&apos;&#x8C6A;&#x5B85;&apos;</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">1000000</span>);
landlord.lend(<span class="hljs-string">&apos;&#x5355;&#x95F4;&apos;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1000</span>);
</code></pre>
<h5 id="t1199.4.4 Redis&#x53D1;&#x5E03;&#x8BA2;&#x9605;">9.4.4 Redis&#x53D1;&#x5E03;&#x8BA2;&#x9605; <a href="#t1199.4.4 Redis&#x53D1;&#x5E03;&#x8BA2;&#x9605;"> # </a></h5>
<ul>
<li>Redis &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x662F;&#x4E00;&#x79CD;&#x6D88;&#x606F;&#x901A;&#x4FE1;&#x6A21;&#x5F0F;&#xFF1A;&#x53D1;&#x9001;&#x8005;&#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x8BA2;&#x9605;&#x8005;&#x63A5;&#x6536;&#x6D88;&#x606F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x8BA2;&#x9605;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x9891;&#x9053;&#x3002;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/redissubscribe.jpg" alt="redissubscribe"></p>
<p><img src="http://img.zhufengpeixun.cn/redispublishsubscribe.png" alt="redispublishsubscribe"></p>
<pre><code class="lang-js">SUBSCRIBE channel_a
PUBLISH channel_a zhufeng
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;redis&apos;</span>);
<span class="hljs-keyword">let</span> client1 = redis.createClient(<span class="hljs-number">6379</span>, <span class="hljs-string">&apos;127.0.0.1&apos;</span>);
<span class="hljs-keyword">let</span> client2 = redis.createClient(<span class="hljs-number">6379</span>, <span class="hljs-string">&apos;127.0.0.1&apos;</span>);

client1.subscribe(<span class="hljs-string">&apos;channel_a&apos;</span>);
client1.subscribe(<span class="hljs-string">&apos;channel_b&apos;</span>);
client1.on(<span class="hljs-string">&apos;message&apos;</span>, (channel, message) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;client1&apos;</span>, channel, message);
    client1.unsubscribe(<span class="hljs-string">&apos;channel_a&apos;</span>);
});
client2.publish(<span class="hljs-string">&apos;channel_a&apos;</span>, <span class="hljs-string">&apos;a_hello&apos;</span>);
client2.publish(<span class="hljs-string">&apos;channel_b&apos;</span>, <span class="hljs-string">&apos;b_hello&apos;</span>);

setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    client2.publish(<span class="hljs-string">&apos;channel_a&apos;</span>, <span class="hljs-string">&apos;a_world&apos;</span>);
    client2.publish(<span class="hljs-string">&apos;channel_b&apos;</span>, <span class="hljs-string">&apos;b_world&apos;</span>);
}, <span class="hljs-number">3000</span>);
</code></pre>
<h2 id="t12010. &#x5916;&#x89C2;&#x6A21;&#x5F0F;">10. &#x5916;&#x89C2;&#x6A21;&#x5F0F; <a href="#t12010. &#x5916;&#x89C2;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x5916;&#x89C2;&#x6A21;&#x5F0F;(Facade Pattern)&#x53C8;&#x53EB;&#x95E8;&#x9762;&#x6A21;&#x5F0F;&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5C06;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x7EC4;&#x63A5;&#x53E3;&#x96C6;&#x6210;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x9AD8;&#x5C42;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x5916;&#x89C2;</li>
<li>&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x8BA9;&#x5916;&#x754C;&#x51CF;&#x5C11;&#x4E0E;&#x5B50;&#x7CFB;&#x7EDF;&#x5185;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x76F4;&#x63A5;&#x4EA4;&#x4E92;&#xFF0C;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x8026;&#x5408;&#xFF0C;&#x8BA9;&#x5916;&#x754C;&#x53EF;&#x4EE5;&#x66F4;&#x8F7B;&#x677E;&#x5730;&#x4F7F;&#x7528;&#x5B50;&#x7CFB;&#x7EDF;</li>
<li>&#x8BE5;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7531;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;&#x7EC4;&#x6210;<ul>
<li>&#x95E8;&#x9762;&#x89D2;&#x8272;&#xFF1A;&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#x7684;&#x6838;&#x5FC3;&#x3002;&#x5B83;&#x88AB;&#x5BA2;&#x6237;&#x89D2;&#x8272;&#x8C03;&#x7528;,&#x5B83;&#x719F;&#x6089;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5185;&#x90E8;&#x6839;&#x636E;&#x5BA2;&#x6237;&#x89D2;&#x8272;&#x7684;&#x9700;&#x6C42;&#x9884;&#x5B9A;&#x4E86;&#x51E0;&#x79CD;&#x529F;&#x80FD;&#x7684;&#x7EC4;&#x5408;</li>
<li>&#x5B50;&#x7CFB;&#x7EDF;&#x89D2;&#x8272;:&#x5B9E;&#x73B0;&#x4E86;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5B83;&#x5BF9;&#x5BA2;&#x6237;&#x89D2;&#x8272;&#x548C;<code>Facade</code>&#x662F;&#x672A;&#x77E5;&#x7684;</li>
<li>&#x5BA2;&#x6237;&#x89D2;&#x8272;:&#x901A;&#x8FC7;&#x8C03;&#x7528;Facede&#x6765;&#x5B8C;&#x6210;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;</li>
</ul>
</li>
<li>&#x9065;&#x63A7;&#x5668;&#x3001;&#x81EA;&#x52A8;&#x9A7E;&#x9A76;&#x6C7D;&#x8F66;&#x3001;&#x623F;&#x5C4B;&#x4E2D;&#x4ECB;</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/xiaomicontrol.jpg" alt="xiaomicontrol"></p>
<p><img src="http://img.zhufengpeixun.cn/facadepattern.jpeg" alt="facadepattern"></p>
<h4 id="t12110.1 &#x8BA1;&#x7B97;&#x5668;">10.1 &#x8BA1;&#x7B97;&#x5668; <a href="#t12110.1 &#x8BA1;&#x7B97;&#x5668;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/facadepattern2.jpeg" alt="facadepattern2"></p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sum</span> </span>{
    sum(a, b) {
        <span class="hljs-keyword">return</span> a + b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Minus</span> </span>{
    minus(a, b) {
        <span class="hljs-keyword">return</span> a - b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Multiply</span> </span>{
    multiply(a, b) {
        <span class="hljs-keyword">return</span> a * b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> </span>{
    sumObj
    minusObj
    multiplyObj
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.sumObj = <span class="hljs-keyword">new</span> Sum();
        <span class="hljs-keyword">this</span>.minusObj = <span class="hljs-keyword">new</span> Minus();
        <span class="hljs-keyword">this</span>.multiplyObj = <span class="hljs-keyword">new</span> Multiply();
    }
    sum(...args) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sumObj.sum(...args);
    }
    minus(...args) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.minusObj.minus(...args);
    }
    multiply(...args) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.multiplyObj.multiply(...args);
    }
}
<span class="hljs-keyword">let</span> calculator = <span class="hljs-keyword">new</span> Calculator();
<span class="hljs-built_in">console</span>.log(calculator.sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
<span class="hljs-built_in">console</span>.log(calculator.minus(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
<span class="hljs-built_in">console</span>.log(calculator.multiply(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<h4 id="t12210.2 &#x8BA1;&#x7B97;&#x673A;">10.2 &#x8BA1;&#x7B97;&#x673A; <a href="#t12210.2 &#x8BA1;&#x7B97;&#x673A;"> # </a></h4>
<p><img src="http://img.zhufengpeixun.cn/computer2.jpg" alt="computer2"></p>
<pre><code class="lang-js">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CPU</span> </span>{
    startup() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x6253;&#x5F00;CPU&apos;</span>); }
    shutdown() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x5173;&#x95ED;CPU&apos;</span>); }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Memory</span> </span>{
    startup() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x6253;&#x5F00;&#x5185;&#x5B58;&apos;</span>); }
    shutdown() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x5173;&#x95ED;&#x5185;&#x5B58;&apos;</span>); }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Disk</span> </span>{
    startup() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x6253;&#x5F00;&#x786C;&#x76D8;&apos;</span>); }
    shutdown() { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x5173;&#x95ED;&#x786C;&#x76D8;&apos;</span>); }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Computer</span> </span>{
    cpu;
    memory;
    disk;
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.cpu = <span class="hljs-keyword">new</span> CPU();
        <span class="hljs-keyword">this</span>.memory = <span class="hljs-keyword">new</span> Memory();
        <span class="hljs-keyword">this</span>.disk = <span class="hljs-keyword">new</span> Disk();
    }
    startup() {
        <span class="hljs-keyword">this</span>.cpu.startup();
        <span class="hljs-keyword">this</span>.memory.startup();
        <span class="hljs-keyword">this</span>.disk.startup();
    }
    shutdown() {
        <span class="hljs-keyword">this</span>.cpu.shutdown();
        <span class="hljs-keyword">this</span>.memory.shutdown();
        <span class="hljs-keyword">this</span>.disk.shutdown();
    }
}
<span class="hljs-keyword">let</span> computer = <span class="hljs-keyword">new</span> Computer();
computer.startup();
computer.shutdown();
</code></pre>
<h4 id="t12310.3 &#x538B;&#x7F29;">10.3 &#x538B;&#x7F29; <a href="#t12310.3 &#x538B;&#x7F29;"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> { }
<span class="hljs-keyword">var</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zlib&apos;</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open</span>(<span class="hljs-params">input</span>) </span>{
    <span class="hljs-keyword">let</span> ext = path.extname(input);
    <span class="hljs-keyword">switch</span> (ext) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;.gz&apos;</span>:
            <span class="hljs-keyword">return</span> unZip(input);
        <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;.rar&apos;</span>:
            <span class="hljs-keyword">return</span> unRar(input);
        <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;.7z&apos;</span>:
            <span class="hljs-keyword">return</span> un7z(input);
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span>;
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unZip</span>(<span class="hljs-params">src</span>) </span>{
    <span class="hljs-keyword">var</span> gunzip = zlib.createGunzip();
    <span class="hljs-keyword">var</span> inputStream = fs.createReadStream(src);
    <span class="hljs-keyword">var</span> outputStream = fs.createWriteStream(src.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-3</span>));
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;outputStream&apos;</span>);

    inputStream.pipe(gunzip).pipe(outputStream);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unRar</span>(<span class="hljs-params">src</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Rar&#x89E3;&#x538B;&#x540E;&#x7684;&apos;</span>, src);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">un7z</span>(<span class="hljs-params">src</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;7z&#x89E3;&#x538B;&#x540E;&#x7684;&apos;</span>, src);
}
open(<span class="hljs-string">&apos;./source.txt.gz&apos;</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">zip</span>(<span class="hljs-params">src</span>) </span>{
    <span class="hljs-keyword">var</span> gzip = zlib.createGzip();<span class="hljs-comment">//&#x521B;&#x5EFA;&#x538B;&#x7F29;&#x6D41;</span>
    <span class="hljs-keyword">var</span> inputStream = fs.createReadStream(src);
    <span class="hljs-keyword">var</span> outputStream = fs.createWriteStream(src+<span class="hljs-string">&apos;.gz&apos;</span>);
    inputStream.pipe(gzip).pipe(outputStream);
}
zip(<span class="hljs-string">&apos;source.txt&apos;</span>);
</code></pre>
<h4 id="t12410.4 redux">10.4 redux <a href="#t12410.4 redux"> # </a></h4>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/v4.0.0/src/index.js">redux index.js</a></li>
</ul>
<h4 id="t12510.5 &#x51FD;&#x6570;&#x91CD;&#x8F7D;">10.5 &#x51FD;&#x6570;&#x91CD;&#x8F7D; <a href="#t12510.5 &#x51FD;&#x6570;&#x91CD;&#x8F7D;"> # </a></h4>
<ul>
<li>&#x4E3A;&#x590D;&#x6742;&#x7684;&#x6A21;&#x5757;&#x6216;&#x5B50;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x5916;&#x754C;&#x8BBF;&#x95EE;&#x7684;&#x6A21;&#x5757;</li>
<li>&#x5B50;&#x7CFB;&#x7EDF;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;</li>
</ul>
<h5 id="t12610.5.1 &#x53C2;&#x6570;&#x91CD;&#x8F7D;">10.5.1 &#x53C2;&#x6570;&#x91CD;&#x8F7D; <a href="#t12610.5.1 &#x53C2;&#x6570;&#x91CD;&#x8F7D;"> # </a></h5>
<p>sum.ts</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a: number, b: string</span>);
<span class="hljs-title">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a: string, b: number</span>);
<span class="hljs-title">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a: any, b: any</span>) </span>{
    <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<h5 id="t12710.5.2 react createElement">10.5.2 react createElement <a href="#t12710.5.2 react createElement"> # </a></h5>
<p>-<a href="https://github.com/facebook/react/blob/master/packages/react/src/ReactElement.js#L347-L361">react create-element</a></p>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createElement</span> (<span class="hljs-params">
  context: Component,
  tag: any,
  data: any,
  children: any,
  normalizationType: any,
  alwaysNormalize: boolean
</span>): <span class="hljs-title">VNode</span> | <span class="hljs-title">Array</span>&lt;<span class="hljs-title">VNode</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(data) || isPrimitive(data)) {
    normalizationType = children
    children = data
    data = <span class="hljs-literal">undefined</span>
  }
  <span class="hljs-keyword">if</span> (isTrue(alwaysNormalize)) {
    normalizationType = ALWAYS_NORMALIZE
  }
  <span class="hljs-keyword">return</span> _createElement(context, tag, data, children, normalizationType)
}
</code></pre>
<h5 id="t12810.5.3 vue createElement">10.5.3 vue createElement <a href="#t12810.5.3 vue createElement"> # </a></h5>
<p>-<a href="https://github.com/vuejs/vue/blob/v2.6.10/src/core/vdom/create-element.js#L28-L45">vue create-element</a></p>
<pre><code class="lang-js">  <span class="hljs-keyword">const</span> childrenLength = <span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span> (childrenLength === <span class="hljs-number">1</span>) {
    props.children = children;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (childrenLength &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">const</span> childArray = <span class="hljs-built_in">Array</span>(childrenLength);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; childrenLength; i++) {
      childArray[i] = <span class="hljs-built_in">arguments</span>[i + <span class="hljs-number">2</span>];
    }
    <span class="hljs-keyword">if</span> (__DEV__) {
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.freeze) {
        <span class="hljs-built_in">Object</span>.freeze(childArray);
      }
    }
    props.children = childArray;
  }
</code></pre>
<h5 id="t12910.5.4 buffer">10.5.4 buffer <a href="#t12910.5.4 buffer"> # </a></h5>
<p><a href="https://github.com/nodejs/node/blob/master/lib/buffer.js#L1082">buffer.js</a></p>
<pre><code class="lang-js">Buffer.prototype.slice = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slice</span>(<span class="hljs-params">start, end</span>) </span>{
  <span class="hljs-keyword">const</span> srcLength = <span class="hljs-keyword">this</span>.length;
  end = end !== <span class="hljs-literal">undefined</span> ? srcLength: srcLength;
  <span class="hljs-keyword">const</span> newLength = end &gt; start ? end - start : <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FastBuffer(<span class="hljs-keyword">this</span>.buffer, <span class="hljs-keyword">this</span>.byteOffset + start, newLength);
};
</code></pre>
<h5 id="t13010.5.5 createStore">10.5.5 createStore <a href="#t13010.5.5 createStore"> # </a></h5>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/e95eaf2dc2024fe99dc0f7334a8bd049b4949ed0/src/createStore.js#L31-L35">createStore</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStore</span>(<span class="hljs-params">reducer, preloadedState, enhancer</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> preloadedState === <span class="hljs-string">&apos;function&apos;</span> &amp;&amp; <span class="hljs-keyword">typeof</span> enhancer === <span class="hljs-string">&apos;undefined&apos;</span>) {
    enhancer = preloadedState
    preloadedState = <span class="hljs-literal">undefined</span>
  }
}
</code></pre>
<h5 id="t13110.5.6 axios">10.5.6 axios <a href="#t13110.5.6 axios"> # </a></h5>
<ul>
<li><a href="https://github.com/axios/axios/blob/v0.19.0/lib/defaults.js#L16-L27">defaults</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefaultAdapter</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> adapter;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">&apos;undefined&apos;</span> &amp;&amp; <span class="hljs-built_in">Object</span>.prototype.toString.call(process) === <span class="hljs-string">&apos;[object process]&apos;</span>) {
    adapter = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./adapters/http&apos;</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> XMLHttpRequest !== <span class="hljs-string">&apos;undefined&apos;</span>) {
    adapter = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./adapters/xhr&apos;</span>);
  }
  <span class="hljs-keyword">return</span> adapter;
}
</code></pre>
<h5 id="t13210.5.7 polyfill">10.5.7 polyfill <a href="#t13210.5.7 polyfill"> # </a></h5>
<ul>
<li>polyfill&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x5904;&#x7406;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;&#x548C;&#x5C4F;&#x853D;&#x4E86;&#x6D4F;&#x89C8;&#x5668;&#x5DEE;&#x5F02;</li>
<li><a href="https://github.com/jquery/jquery/blob/1.5/src/event.js#L584-L596">removeEvent</a></li>
</ul>
<pre><code class="lang-js">jQuery.removeEvent = <span class="hljs-built_in">document</span>.removeEventListener ?
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, type, handle </span>) </span>{
        <span class="hljs-keyword">if</span> ( elem.removeEventListener ) {
            elem.removeEventListener( type, handle, <span class="hljs-literal">false</span> );
        }
    } :
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> elem, type, handle </span>) </span>{
        <span class="hljs-keyword">if</span> ( elem.detachEvent ) {
            elem.detachEvent( <span class="hljs-string">&quot;on&quot;</span> + type, handle );
        }
    };
</code></pre>
<h2 id="t13311. &#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;">11. &#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F; <a href="#t13311. &#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;"> # </a></h2>
<ul>
<li>&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;(Iterator Pattern)&#x7528;&#x4E8E;&#x987A;&#x5E8F;&#x5730;&#x8BBF;&#x95EE;&#x805A;&#x5408;&#x5BF9;&#x8C61;&#x5185;&#x90E8;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x53C8;&#x65E0;&#x9700;&#x77E5;&#x9053;&#x5BF9;&#x8C61;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x3002;&#x4F7F;&#x7528;&#x4E86;&#x8FED;&#x4EE3;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x6784;&#x9020;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x5E8F;&#x8BBF;&#x95EE;&#x5176;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x3002;</li>
</ul>
<h3 id="t13411.1 &#x7C7B;&#x56FE;">11.1 &#x7C7B;&#x56FE; <a href="#t13411.1 &#x7C7B;&#x56FE;"> # </a></h3>
<p><img src="http://img.zhufengpeixun.cn/iteratorpattern.jpeg" alt="iterator"></p>
<h3 id="t13511.2 &#x4EE3;&#x7801;">11.2 &#x4EE3;&#x7801; <a href="#t13511.2 &#x4EE3;&#x7801;"> # </a></h3>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createIterator</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">let</span> index=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> {
        next() {
            <span class="hljs-keyword">return</span> index&lt;arr.length?
                {<span class="hljs-attr">value</span>: arr[index++],<span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>}:
                {<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>}
        }
    }
}
<span class="hljs-keyword">let</span> it=createIterator([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]);
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
</code></pre>
<h3 id="t13611.3 &#x573A;&#x666F;">11.3 &#x573A;&#x666F; <a href="#t13611.3 &#x573A;&#x666F;"> # </a></h3>
<h4 id="t13711.3.1 forEach">11.3.1 forEach <a href="#t13711.3.1 forEach"> # </a></h4>
<ul>
<li>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; for &#x5FAA;&#x73AF;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A; <code>forEach</code><pre><code class="lang-js"><span class="hljs-built_in">Array</span>.prototype.forEach = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cb</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.length; i++) {
      cb.call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>[i], i, arr);
  }
}
<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(item);
});
</code></pre>
</li>
</ul>
<h4 id="t13811.3.2 each">11.3.2 each <a href="#t13811.3.2 each"> # </a></h4>
<ul>
<li><a href="https://github.com/jquery/jquery/blob/3.4.1/src/core.js#L246-L265">jquery</a></li>
<li><a href="https://github.com/jashkenas/underscore/blob/1.9.1/underscore.js#L181-L195">underscore</a></li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">

    $.each([<span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-string">&apos;3&apos;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">index, item</span>) </span>{
        <span class="hljs-built_in">console</span>.log(index, item);
    })
    $.each({ <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;zhufeng&apos;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">10</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">index, item</span>) </span>{
        <span class="hljs-built_in">console</span>.log(index, item);
    })
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">each</span>(<span class="hljs-params">obj, callback</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(obj)) {
            <span class="hljs-keyword">let</span> length = obj.length;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
                <span class="hljs-keyword">if</span> (callback.call(obj[i], i, obj[i]) === <span class="hljs-literal">false</span>) {
                    <span class="hljs-keyword">break</span>;
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> obj) {
                <span class="hljs-keyword">if</span> (callback.call(obj[i], i, obj[i]) === <span class="hljs-literal">false</span>) {
                    <span class="hljs-keyword">break</span>;
                }
            }
        }

        <span class="hljs-keyword">return</span> obj;
    }

    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h4 id="t13911.3.3 Iterator">11.3.3 Iterator <a href="#t13911.3.3 Iterator"> # </a></h4>
<ul>
<li>&#x5728;ES6&#x4E2D;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6709;Array&#x3001;Map&#x3001;Set&#x3001;String&#x3001;TypedArray&#x3001;arguments&#x3001;NodeList</li>
<li>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x904D;&#x5386;&#x63A5;&#x53E3;&#x6765;&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</li>
<li>&#x4ED6;&#x4EEC;&#x90FD;&#x6709; [Symbol.Iterator]&#x5C5E;&#x6027;&#xFF0C;&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6267;&#x884C;&#x51FD;&#x6570;&#x4F1A;&#x8FD4;&#x56DE;&#x8FED;&#x4EE3;&#x5668;</li>
<li>&#x8FED;&#x4EE3;&#x5668;&#x5C31;&#x6709;<code>next</code>&#x65B9;&#x6CD5;&#x987A;&#x5E8F;&#x8FD4;&#x56DE;&#x5B50;&#x5143;&#x7D20;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-built_in">Array</span>[<span class="hljs-built_in">Symbol</span>.iterator] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> index &lt; <span class="hljs-keyword">this</span>.length ?
                { <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>[index++], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> } :
                { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> }
        }
    }
}
<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];
<span class="hljs-keyword">let</span> it = arr[<span class="hljs-built_in">Symbol</span>.iterator]();
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
</code></pre>
<h4 id="t14011.3.4 yield*">11.3.4 yield* <a href="#t14011.3.4 yield*"> # </a></h4>
<ul>
<li>yield*&#x540E;&#x9762;&#x8DDF;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x904D;&#x5386;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x7ED3;&#x6784;&#x7684;&#x904D;&#x5386;&#x5668;&#x63A5;&#x53E3;</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> generator = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">yield</span>* [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">yield</span> <span class="hljs-number">4</span>;
};

<span class="hljs-keyword">var</span> iterator = generator();

<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 1, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 2, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 3, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 4, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: undefined, done: true }</span>
</code></pre>
<h4 id="t14111.3.5 &#x4E8C;&#x53C9;&#x6811;&#x904D;&#x5386;">11.3.5 &#x4E8C;&#x53C9;&#x6811;&#x904D;&#x5386; <a href="#t14111.3.5 &#x4E8C;&#x53C9;&#x6811;&#x904D;&#x5386;"> # </a></h4>
<ul>
<li>&#x4E8C;&#x53C9;&#x6811;&#x662F;&#x6BCF;&#x4E2A;&#x7ED3;&#x70B9;&#x6700;&#x591A;&#x6709;&#x4E24;&#x4E2A;&#x5B50;&#x6811;&#x7684;&#x6811;&#x7ED3;&#x6784;&#x3002;&#x901A;&#x5E38;&#x5B50;&#x6811;&#x88AB;&#x79F0;&#x4F5C;&#x5DE6;&#x5B50;&#x6811;&#x548C;&#x53F3;&#x5B50;&#x6811;</li>
<li>&#x6839;&#x636E;&#x6839;&#x636E;&#x6839;&#x8282;&#x70B9;&#x7684;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x628A;&#x904D;&#x5386;&#x5206;&#x4E3A;&#x4E09;&#x79CD;&#x524D;&#x5E8F;&#x3001;&#x4E2D;&#x5E8F;&#x3001;&#x540E;&#x5E8F;<ul>
<li>&#x5148;&#x5E8F;&#x904D;&#x5386;&#xFF1A;&#x6839;&#x8282;&#x70B9;-&gt;&#x5DE6;&#x5B50;&#x6811;-&gt;&#x53F3;&#x5B50;&#x6811;</li>
<li>&#x4E2D;&#x5E8F;&#x904D;&#x5386;&#xFF1A;&#x5DE6;&#x5B50;&#x6811;-&gt;&#x6839;&#x8282;&#x70B9;-&gt;&#x53F3;&#x5B50;&#x6811;</li>
<li>&#x540E;&#x5E8F;&#x904D;&#x5386;&#xFF1A;&#x5DE6;&#x5B50;&#x6811;-&gt;&#x53F3;&#x5B50;&#x6811;-&gt;&#x6839;&#x8282;&#x70B9;</li>
</ul>
</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/varorder.png" alt="varorder"></p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tree</span> </span>{
    <span class="hljs-keyword">constructor</span>(public left, public value, public right) {
    }
}
<span class="hljs-comment">//[&apos;A&apos;, &apos;B&apos;, &apos;D&apos;,&apos;E&apos;, &apos;C&apos;, &apos;F&apos;,&apos;G&apos;]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">leftOrder</span>(<span class="hljs-params">tree</span>) </span>{
    <span class="hljs-keyword">if</span> (tree) {
        <span class="hljs-keyword">yield</span> tree.value;
        <span class="hljs-keyword">yield</span>* leftOrder(tree.left);
        <span class="hljs-keyword">yield</span>* leftOrder(tree.right);
    }
}

<span class="hljs-comment">//[&apos;D&apos;, &apos;B&apos;, &apos;E&apos;,&apos;A&apos;, &apos;F&apos;, &apos;C&apos;,&apos;G&apos;]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">inOrder</span>(<span class="hljs-params">tree</span>) </span>{
    <span class="hljs-keyword">if</span> (tree) {
        <span class="hljs-keyword">yield</span>* inOrder(tree.left);
        <span class="hljs-keyword">yield</span> tree.value;
        <span class="hljs-keyword">yield</span>* inOrder(tree.right);
    }
}
<span class="hljs-comment">//[&apos;D&apos;, &apos;E&apos;, &apos;B&apos;,&apos;F&apos;, &apos;G&apos;, &apos;C&apos;,&apos;A&apos;]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">rightOrder</span>(<span class="hljs-params">tree</span>) </span>{
    <span class="hljs-keyword">if</span> (tree) {
        <span class="hljs-keyword">yield</span>* rightOrder(tree.left);
        <span class="hljs-keyword">yield</span>* rightOrder(tree.right);
        <span class="hljs-keyword">yield</span> tree.value;
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">make</span>(<span class="hljs-params">array</span>) </span>{
    <span class="hljs-keyword">if</span> (array.length === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tree(<span class="hljs-literal">null</span>, array[<span class="hljs-number">0</span>], <span class="hljs-literal">null</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tree(make(array[<span class="hljs-number">0</span>]), array[<span class="hljs-number">1</span>], make(array[<span class="hljs-number">2</span>]));
}
<span class="hljs-keyword">let</span> tree = make([[[<span class="hljs-string">&apos;D&apos;</span>], <span class="hljs-string">&apos;B&apos;</span>, [<span class="hljs-string">&apos;E&apos;</span>]], <span class="hljs-string">&apos;A&apos;</span>, [[<span class="hljs-string">&apos;F&apos;</span>], <span class="hljs-string">&apos;C&apos;</span>, [<span class="hljs-string">&apos;G&apos;</span>]]]);
<span class="hljs-keyword">var</span> result: any[] = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> node <span class="hljs-keyword">of</span> rightOrder(tree)) {
    result.push(node);
}
<span class="hljs-built_in">console</span>.log(result);
</code></pre>
<blockquote>
<p> &quot;downlevelIteration&quot;: true, /<em> Provide full support for iterables in &apos;for-of&apos;, spread, and destructuring when targeting &apos;ES5&apos; or &apos;ES3&apos;. </em>/</p>
</blockquote>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>

<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.js"></script>
<script>
$('.warpper .page-toc ul ul li a').on('click',function(){
  $('.warpper .page-toc ul ul li a').removeClass('my-active')
  $(this).addClass('my-active')
})

$('.logo').on('mouseenter',function(){
  $('.nav').height('450px');
})
$('.nav').on('mouseleave',function(){
  $('.nav').height('80px');
})
$('.logo').on('click',function(){
  $('.nav').css('display','none');
 $('.warpper').css('padding','0px');
})
// if (!$('.understand-me').length) {
  //   var bar = $(window).height() - $('.navbar ').height() - $('.page-toc').position().top;
  //   var count = bar / 26 / 2;
  //   var barHeight = $('.page-toc').outerHeight();
  //   $('.page-toc li').eq(0).children('a').addClass('red');
  //   var arr = [];
  //   $("h1,h2,h3,h4,h5,h6").each(function () {
  //     arr.push($(this).position().top);
  //   });
  //   var timer
  //   function dark() {
  //     clearTimeout(timer)
  //      timer = setTimeout(function () {
  //      var top = Math.abs($('.page-toc > ul').position().top);
  //      var cur = $('.content').scrollTop();
  //      for (var i = arr.length; i >= 0; i--) {
  //        if (arr[i] <= cur) {
  //          break;
  //        }
  //      }
  //      if (i === -1) {
  //        i = 0;
  //      }
  //      $('.page-toc li a').removeClass('red');
  //      $('.page-toc li').eq(i).children('a').addClass('red');
  //      let height = $('.page-toc li').eq(i).position().top-$('.page-toc').height(); // 如果当前的offset出去了 回到中间可好？
  //      $('.page-toc').scrollTop(height+$('.page-toc').height()/2);
  //    },200)
  //   }

  //   $('.content').on('scroll', dark);
  // }
</script>
<style>

    /* ::-webkit-scrollbar{width:14px;}
    ::-webkit-scrollbar-track{background-color:transparent;}
    ::-webkit-scrollbar-thumb{background-color:transparent;}
    ::-webkit-scrollbar-thumb:hover {background-color:transparent}
    ::-webkit-scrollbar-thumb:active {background-color:transparent} */

    .page-toc > ul .red {
        background: #f3f3f3;
        z-index: 1;
        border-left: 3px solid #009a61;
        -webkit-transition: all .2s ease;
        transition: all .2s ease;
        color: #000
    }





</style>
<script type="text/javascript"  src="https://idm-su.baidu.com/su_new.js"></script>
</body>
</html>
